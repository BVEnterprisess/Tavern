/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={28:e=>{e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},39:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},119:e=>{e.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},125:e=>{"use strict";e.exports=JSON.parse('{"name":"tesseract.js","version":"4.1.4","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0","acorn":"^8.8.2","babel-loader":"^9.1.2","buffer":"^6.0.3","cors":"^2.8.5","eslint":"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1","express":"^4.18.2","mocha":"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^5.0.0","rollup":"^3.20.7","wait-on":"^7.0.1","webpack":"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},"dependencies":{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^4.0.4","wasm-feature-detect":"^1.2.11","zlibjs":"^0.3.1"},"overrides":{"@rollup/pluginutils":"^5.0.2"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')},321:(e,t,n)=>{const r=n(848),i=n(456),o=n(548),a=n(381),s=n(39),c=n(996);e.exports={defaultOptions:r,spawnWorker:i,terminateWorker:o,onMessage:a,send:s,loadImage:c}},381:e=>{e.exports=(e,t)=>{e.onmessage=({data:e})=>{t(e)}}},452:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,a,function(){return this});var k=Object.getPrototypeOf,S=k&&k(k(j([])));S&&S!==n&&r.call(S,a)&&(w=S);var E=b.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){l.value=e,a(l)},function(e){return n("throw",e,a,s)})}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return o=o?o.then(i,i):i()}})}function C(e,t,n){var r=f;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===m){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?m:p,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=m,n.method="throw",n.arg=c.arg)}}}function O(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function j(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(L.prototype),l(L.prototype,s,function(){return this}),e.AsyncIterator=L,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(E),l(E,c,"Generator"),l(E,a,function(){return this}),l(E,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},456:e=>{e.exports=({workerPath:e,workerBlobURL:t})=>{let n;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(t))}else n=new Worker(e);return n}},465:(e,t,n)=>{const r=n(477);e.exports={recognize:async(e,t,n)=>{const i=await r(n);return await i.loadLanguage(t),await i.initialize(t),i.recognize(e).finally(async()=>{await i.terminate()})},detect:async(e,t)=>{const n=await r(t);return await n.loadLanguage("osd"),await n.initialize("osd"),n.detect(e).finally(async()=>{await n.terminate()})}}},477:(e,t,n)=>{const r=n(981),i=n(760),o=n(500),{log:a}=n(787),s=n(28),{defaultOEM:c}=n(711),{defaultOptions:l,spawnWorker:u,terminateWorker:d,onMessage:f,loadImage:p,send:h}=n(321);let m=0;e.exports=async(e={})=>{const t=s("Worker",m),{logger:n,errorHandler:y,...v}=r({...l,...e}),g={},b={};let w,k;const S=new Promise((e,t)=>{k=e,w=t});let E=u(v);E.onerror=e=>{w(e.message)},m+=1;const x=(e,t)=>{g[e]=t},L=(e,t)=>{b[e]=t},C=({id:e,action:n,payload:r})=>new Promise((i,o)=>{a(`[${t}]: Start ${e}, action=${n}`),x(n,i),L(n,o),h(E,{workerId:t,jobId:e,action:n,payload:r})});f(E,({workerId:e,jobId:t,status:r,action:o,data:s})=>{if("resolve"===r){a(`[${e}]: Complete ${t}`);let n=s;"recognize"===o?n=i(s):"getPDF"===o&&(n=Array.from({...s,length:Object.keys(s).length})),g[o]({jobId:t,data:n})}else if("reject"===r){if(b[o](s),"load"===o&&w(s),!y)throw Error(s);y(s)}else"progress"===r&&n({...s,userJobId:t})});const O={id:t,worker:E,setResolve:x,setReject:L,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>C(o({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>C(o({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>C(o({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>C(o({id:n,action:"FS",payload:{method:e,args:t}})),loadLanguage:(e="eng",t)=>C(o({id:t,action:"loadLanguage",payload:{langs:e,options:v}})),initialize:(e="eng",t=c,n,r)=>C(o({id:r,action:"initialize",payload:{langs:e,oem:t,config:n}})),setParameters:(e={},t)=>C(o({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},n={blocks:!0,text:!0,hocr:!0,tsv:!0},r)=>C(o({id:r,action:"recognize",payload:{image:await p(e),options:t,output:n}})),getPDF:(e="Tesseract OCR Result",t=!1,n)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),C(o({id:n,action:"getPDF",payload:{title:e,textonly:t}}))),detect:async(e,t)=>C(o({id:t,action:"detect",payload:{image:await p(e)}})),terminate:async()=>(null!==E&&(d(E),E=null),Promise.resolve())};return C(o({id:undefined,action:"load",payload:{options:v}})).then(()=>k(O)).catch(()=>{}),S}},500:(e,t,n)=>{const r=n(28);let i=0;e.exports=({id:e,action:t,payload:n={}})=>{let o=e;return void 0===o&&(o=r("Job",i),i+=1),{id:o,action:t,payload:n}}},548:e=>{e.exports=e=>{e.terminate()}},646:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},711:(e,t,n)=>{const r=n(742);e.exports={defaultOEM:r.DEFAULT}},742:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},760:e=>{e.exports=e=>{const t=[],n=[],r=[],i=[],o=[];return e.blocks&&e.blocks.forEach(a=>{a.paragraphs.forEach(t=>{t.lines.forEach(n=>{n.words.forEach(r=>{r.symbols.forEach(i=>{o.push({...i,page:e,block:a,paragraph:t,line:n,word:r})}),i.push({...r,page:e,block:a,paragraph:t,line:n})}),r.push({...n,page:e,block:a,paragraph:t})}),n.push({...t,page:e,block:a})}),t.push({...a,page:e})}),{...e,blocks:t,paragraphs:n,lines:r,words:i,symbols:o}}},787:function(e,t){let n=!1;t.logging=n,t.setLogging=e=>{n=e},t.log=(...e)=>n?console.log.apply(this,e):null},820:(e,t,n)=>{const r=n(866);e.exports=e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":r()?t.type="electron":"object"==typeof document?t.type="browser":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]}},848:(e,t,n)=>{const{version:r}=n(125),i=n(119);var o;e.exports={...i,workerPath:"undefined"!=typeof process&&"development"===process.env.TESS_ENV?(o=`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`,new URL(o,window.location.href).href):`https://cdn.jsdelivr.net/npm/tesseract.js@v${r}/dist/worker.min.js`,corePath:null}},866:e=>{e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},882:function(e,t,n){const r=n(500),{log:i}=n(787),o=n(28);let a=0;e.exports=()=>{const e=o("Scheduler",a),t={},n={};let s=[];a+=1;const c=()=>Object.keys(t).length,l=()=>{if(0!==s.length){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)if(void 0===n[e[r]]){s[0](t[e[r]]);break}}},u=(t,o)=>new Promise((a,c)=>{const u=r({action:t,payload:o});s.push(async e=>{s.shift(),n[e.id]=u;try{a(await e[t].apply(this,[...o,u.id]))}catch(e){c(e)}finally{delete n[e.id],l()}}),i(`[${e}]: Add ${u.id} to JobQueue`),i(`[${e}]: JobQueue length=${s.length}`),l()});return{addWorker:n=>(t[n.id]=n,i(`[${e}]: Add ${n.id}`),i(`[${e}]: Number of workers=${c()}`),l(),n.id),addJob:async(t,...n)=>{if(0===c())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return u(t,n)},terminate:async()=>{Object.keys(t).forEach(async e=>{await t[e].terminate()}),s=[]},getQueueLen:()=>s.length,getNumWorkers:c}}},949:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},981:(e,t,n)=>{const r="browser"===n(820)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(n=>{e[n]&&(t[n]=r(t[n]))}),t}},995:(e,t,n)=>{n(452);const r=n(882),i=n(477),o=n(465),a=n(646),s=n(742),c=n(949),{setLogging:l}=n(787);e.exports={languages:a,OEM:s,PSM:c,createScheduler:r,createWorker:i,setLogging:l,...o}},996:e=>{const t=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=({target:{error:{code:e}}})=>{n(Error(`File could not be read! Code=${e}`))},r.readAsArrayBuffer(e)}),n=async e=>{let r=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))r=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(e);r=await t.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(r=await n(e.src)),"VIDEO"===e.tagName&&(r=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise(n=>{e.toBlob(async e=>{r=await t(e),n()})});else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();r=await t(n)}else(e instanceof File||e instanceof Blob)&&(r=await t(e));return new Uint8Array(r)};e.exports=n}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"authenticate",value:function(e,t){return{"user@table1837.com":"password123","admin@table1837.com":"admin123","staff@table1837.com":"staff123"}[e]===t}},{key:"isAuthenticated",value:function(){return"true"===sessionStorage.getItem("authenticated")}},{key:"setAuthenticated",value:function(e){sessionStorage.setItem("authenticated",e.toString())}},{key:"logout",value:function(){sessionStorage.removeItem("authenticated")}}],null&&t(e.prototype,null),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics={loadTime:0,renderTime:0,memoryUsage:0,errors:[]},this.startTime=performance.now(),this.init()},t=[{key:"init",value:function(){var e=this;window.addEventListener("load",function(){e.metrics.loadTime=performance.now()-e.startTime,console.log("🚀 Page loaded in ".concat(e.metrics.loadTime.toFixed(2),"ms"))}),"memory"in performance&&setInterval(function(){e.metrics.memoryUsage=performance.memory.usedJSHeapSize/1024/1024},5e3),window.addEventListener("error",function(t){e.metrics.errors.push({message:t.message,filename:t.filename,lineno:t.lineno,timestamp:Date.now()}),console.error("❌ Error tracked:",t.message)})}},{key:"getMetrics",value:function(){return s(s({},this.metrics),{},{timestamp:Date.now()})}},{key:"logPerformance",value:function(){console.log("📊 Performance Metrics:",this.getMetrics())}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var m=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchIndex=new Map,this.buildIndex()},t=[{key:"buildIndex",value:function(){var e=this;this.getAllWines().forEach(function(t,n){e.generateSearchTerms(t).forEach(function(t){e.searchIndex.has(t)||e.searchIndex.set(t,[]),e.searchIndex.get(t).push(n)})})}},{key:"generateSearchTerms",value:function(e){var t=[],n="".concat(e.name," ").concat(e.region," ").concat(e.year," ").concat(e.category).toLowerCase();t.push(n),n.split(" ").forEach(function(e){e.length>2&&t.push(e)});for(var r=0;r<n.length-2;r++)t.push(n.substring(r,r+3));return t}},{key:"search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e.length<2)return[];var r=new Set;this.generateSearchTerms({name:e}).forEach(function(e){(t.searchIndex.get(e)||[]).forEach(function(e){return r.add(e)})});var i=Array.from(r).map(function(e){return t.getAllWines()[e]});return n.category&&(i=i.filter(function(e){return e.category.toLowerCase()===n.category.toLowerCase()})),n.priceRange&&(i=i.filter(function(e){return e.price>=n.priceRange.min&&e.price<=n.priceRange.max})),i.slice(0,20)}},{key:"getAllWines",value:function(){return[{name:"CRISTOM, EILEEN VYD., PINOT NOIR",region:"Eola-Amity Hills",year:"2019",category:"red",price:185},{name:"NEYERS, CARNEROS CHARDONNAY",region:"Sonoma County",year:"2019",category:"white",price:100}]}}],t&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTheme=localStorage.getItem("table1837-theme")||"dark",this.init()},(t=[{key:"init",value:function(){this.applyTheme(this.currentTheme),this.setupThemeToggle()}},{key:"applyTheme",value:function(e){document.body.setAttribute("data-theme",e),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("table1837-theme",e),this.currentTheme=e;var t=document.documentElement;"light"===e?(t.style.setProperty("--bg-primary","#ffffff"),t.style.setProperty("--text-primary","#1a1a1a"),t.style.setProperty("--glass-bg","rgba(255, 255, 255, 0.1)")):(t.style.setProperty("--bg-primary","#000000"),t.style.setProperty("--text-primary","#ffffff"),t.style.setProperty("--glass-bg","rgba(0, 0, 0, 0.3)"))}},{key:"setupThemeToggle",value:function(){var e=this,t=document.querySelector("header");if(t){var n=document.createElement("button");n.innerHTML="dark"===this.currentTheme?"☀️":"🌙",n.className="theme-toggle ml-4 p-2 rounded-lg bg-opacity-20 hover:bg-opacity-30 transition-all",n.onclick=function(){return e.toggleTheme()},t.querySelector(".container").appendChild(n)}}},{key:"toggleTheme",value:function(){var e="dark"===this.currentTheme?"light":"dark";this.applyTheme(e);var t=document.querySelector(".theme-toggle");t&&(t.innerHTML="dark"===e?"☀️":"🌙"),this.showThemeNotification(e)}},{key:"showThemeNotification",value:function(e){var t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",t.textContent="Switched to ".concat(e," theme"),document.body.appendChild(t),setTimeout(function(){t.remove()},2e3)}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var E=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},(t=[{key:"initialize",value:function(){this.updateTodaySpecial(),this.load86Items()}},{key:"updateTodaySpecial",value:function(){var e={0:{title:"Sunday Steak Night",time:"4p – 8p",description:"Garden Salad • Steak Frites • Glass of House Wine",price:"$40"},3:{title:"Date Night",time:"4p – 8p",description:"2-Dine for $89 • 3-Course Menu • $5 Draft Beer • $10 House Wine",price:"$89"},4:{title:"1837 Bar & Burger Night",time:"4p – 8p",description:"$12.50 Signature Burger OR Crispy Chicken • $5 Draft Beer • $10 House Wine",price:"$12.50"},5:{title:"Late Night Happy Hour",time:"8p – 11p",description:"$5 Draft Beer • $10 House Wines • $10 House Winner Cocktails • $2 Off Curated Cocktails",price:"Various"},6:{title:"Late Night Happy Hour",time:"8p – 11p",description:"$5 Draft Beer • $10 House Wines • $10 House Winner Cocktails • $2 Off Curated Cocktails",price:"Various"}}[(new Date).getDay()],t=document.getElementById("todaySpecial");t&&(t.innerHTML=e?'\n                <div class="flex justify-between items-start mb-3">\n                    <h4 class="text-xl font-bold">'.concat(e.title,'</h4>\n                    <span class="text-lg font-bold text-yellow-400">').concat(e.price,'</span>\n                </div>\n                <p class="text-sm text-gray-400 mb-2">').concat(e.time,'</p>\n                <p class="text-gray-300">').concat(e.description,"</p>\n            "):'\n                <p class="text-gray-300">No special offerings today. Check back tomorrow!</p>\n            ')}},{key:"load86Items",value:function(){var e=document.getElementById("alert86List");e&&(0!==this.state.items86.length?e.innerHTML=this.state.items86.map(function(e){return'\n            <div class="mb-2">\n                <span class="font-semibold text-red-300">'.concat(e.name,'</span>\n                <span class="text-sm text-gray-400 ml-2">- ').concat(e.timestamp,"</span>\n            </div>\n        ")}).join(""):e.innerHTML='<p class="text-gray-300">No items currently 86\'d</p>')}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var O=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},t=[{key:"initialize",value:function(){var e=this;this.display86Items(),this.setupEventListeners(),window.add86Item=function(){return e.add86Item()},window.remove86Item=function(t){return e.remove86Item(t)}}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("item86Input");t&&t.addEventListener("keypress",function(t){"Enter"===t.key&&(t.preventDefault(),e.add86Item())})}},{key:"add86Item",value:function(){var e=document.getElementById("item86Input"),t=e.value.trim();t&&(this.state.items86.push({name:t,timestamp:(new Date).toLocaleString(),addedBy:"Current User"}),localStorage.setItem("items86",JSON.stringify(this.state.items86)),e.value="",this.display86Items(),this.load86Items())}},{key:"remove86Item",value:function(e){this.state.items86.splice(e,1),localStorage.setItem("items86",JSON.stringify(this.state.items86)),this.display86Items(),this.load86Items()}},{key:"display86Items",value:function(){var e=document.getElementById("current86Items");e&&(0!==this.state.items86.length?e.innerHTML=this.state.items86.map(function(e,t){return'\n            <div class="flex justify-between items-center p-3 bg-red-900 bg-opacity-30 border border-red-600 rounded-lg">\n                <div>\n                    <p class="font-semibold">'.concat(e.name,'</p>\n                    <p class="text-sm text-gray-400">Added: ').concat(e.timestamp,'</p>\n                </div>\n                <button onclick="remove86Item(').concat(t,')" class="text-red-400 hover:text-red-300">\n                    <i class="fas fa-times"></i>\n                </button>\n            </div>\n        ')}).join(""):e.innerHTML='<p class="text-gray-400">No items currently 86\'d</p>')}},{key:"load86Items",value:function(){var e=document.getElementById("alert86List");e&&(0!==this.state.items86.length?e.innerHTML=this.state.items86.map(function(e){return'\n            <div class="mb-2">\n                <span class="font-semibold text-red-300">'.concat(e.name,'</span>\n                <span class="text-sm text-gray-400 ml-2">- ').concat(e.timestamp,"</span>\n            </div>\n        ")}).join(""):e.innerHTML='<p class="text-gray-300">No items currently 86\'d</p>')}},{key:"cleanup",value:function(){delete window.add86Item,delete window.remove86Item}}],t&&L(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),I=n(995);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function T(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){W(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t,n){return(t=H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function B(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return z(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];n>3?(i=h===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,f.v=r,f.n=o[1]):p<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(z(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,z(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,z(d,"constructor",l),z(l,"constructor",c),c.displayName="GeneratorFunction",z(l,i,"GeneratorFunction"),z(d),z(d,i,"Generator"),z(d,r,function(){return this}),z(d,"toString",function(){return"[object Generator]"}),(N=function(){return{w:o,m:f}})()}function z(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}z=function(e,t,n,r){function o(t,n){z(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},z(e,t,n,r)}function F(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){F(o,r,i,a,s,"next",e)}function s(e){F(o,r,i,a,s,"throw",e)}a(void 0)})}}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}var $=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.workers=[],this.isInitialized=!1,this.progressCallback=null,this.retryCount=0,this.maxRetries=3,this.confidenceThreshold=.97,this.textCorrectionModel=null},t=[{key:"initialize",value:(p=_(N().m(function e(){var t,n,r,i,o,a=this;return N().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isInitialized){e.n=1;break}return e.a(2);case 1:e.p=1,this.updateProgress(0,"Initializing multi-engine OCR..."),t=[{lang:"eng",psm:6,oem:3},{lang:"eng",psm:8,oem:1},{lang:"eng",psm:3,oem:3}],n=0;case 2:if(!(n<t.length)){e.n=6;break}return r=t[n],this.updateProgress(20*(n+1),"Initializing OCR engine ".concat(n+1,"...")),e.n=3,(0,I.createWorker)(r.lang,1,{logger:function(e){a.progressCallback&&a.progressCallback(e)}});case 3:return i=e.v,e.n=4,i.setParameters({tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$.,()-/&'",tessedit_pageseg_mode:r.psm.toString(),tessedit_ocr_engine_mode:r.oem.toString(),preserve_interword_spaces:"1",textord_heavy_nr:"1",textord_min_linesize:"2.5"});case 4:this.workers.push(i);case 5:n++,e.n=2;break;case 6:return e.n=7,this.initializeTextCorrection();case 7:this.isInitialized=!0,this.updateProgress(100,"Ultra-enhanced OCR ready"),console.log("✅ Ultra-Enhanced OCR Service initialized successfully"),e.n=9;break;case 8:throw e.p=8,o=e.v,console.error("❌ Failed to initialize ultra-enhanced OCR service:",o),o;case 9:return e.a(2)}},e,this,[[1,8]])})),function(){return p.apply(this,arguments)})},{key:"initializeTextCorrection",value:(f=_(N().m(function e(){return N().w(function(e){for(;;)switch(e.n){case 0:this.wineVocabulary={red:["Pinot Noir","Merlot","Cabernet Sauvignon","Syrah","Zinfandel","Malbec","Sangiovese","Nebbiolo"],white:["Chardonnay","Sauvignon Blanc","Riesling","Pinot Grigio","Gewürztraminer","Viognier","Semillon"],regions:["Napa Valley","Sonoma","Bordeaux","Burgundy","Tuscany","Piedmont","Champagne","Alsace"]},this.foodVocabulary={starters:["Charcuterie","Scallops","Tartare","Salad","Soup","Cheese","Mushroom","Truffle"],entrees:["Duck","Salmon","Beef","Lamb","Pork","Chicken","Risotto","Pasta","Fish"],cooking:["Seared","Pan-Seared","Grilled","Roasted","Braised","Confit","Sous Vide"]};case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"processImage",value:(d=_(N().m(function e(t){var n,r,i,o,a,s;return N().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isInitialized){e.n=1;break}return e.n=1,this.initialize();case 1:return e.p=1,this.updateProgress(10,"Advanced image preprocessing..."),e.n=2,this.createMultiplePreprocessedVersions(t);case 2:return n=e.v,this.updateProgress(30,"Multi-engine text extraction..."),e.n=3,this.extractTextWithMultipleEngines(n);case 3:return r=e.v,this.updateProgress(60,"AI-powered text correction..."),e.n=4,this.correctTextWithAI(r);case 4:return i=e.v,this.updateProgress(80,"Advanced menu parsing..."),e.n=5,this.parseMenuWithAdvancedAlgorithms(i);case 5:return o=e.v,this.updateProgress(95,"Validation and confidence scoring..."),e.n=6,this.validateAndScoreResults(o);case 6:return a=e.v,this.updateProgress(100,"Processing complete!"),e.a(2,a);case 7:return e.p=7,s=e.v,console.error("Ultra-enhanced OCR processing failed:",s),e.n=8,this.handleProcessingError(t,s);case 8:return e.a(2,e.v)}},e,this,[[1,7]])})),function(e){return d.apply(this,arguments)})},{key:"createMultiplePreprocessedVersions",value:(u=_(N().m(function e(t){var n,r,i,o,a,s,c;return N().w(function(e){for(;;)switch(e.n){case 0:return r=n=[],e.n=1,this.preprocessImage(t,{contrast:2,brightness:.8,threshold:128,denoise:!0});case 1:return i=e.v,r.push.call(r,i),o=n,e.n=2,this.preprocessImage(t,{contrast:1.5,brightness:1.2,edgeEnhancement:!0,threshold:150});case 2:return a=e.v,o.push.call(o,a),s=n,e.n=3,this.preprocessImage(t,{contrast:1.8,brightness:1,adaptiveThreshold:!0});case 3:return c=e.v,s.push.call(s,c),e.a(2,n)}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"preprocessImage",value:(l=_(N().m(function e(t){var n,r=this,i=arguments;return N().w(function(e){for(;;)if(0===e.n)return n=i.length>1&&void 0!==i[1]?i[1]:{},e.a(2,new Promise(function(e){var i=document.createElement("canvas"),o=i.getContext("2d"),a=new Image;a.onload=function(){i.width=a.width,i.height=a.height,o.drawImage(a,0,0);var t=o.getImageData(0,0,i.width,i.height),s=t.data;n.denoise&&r.applyDenoising(s,i.width,i.height),n.edgeEnhancement&&r.applyEdgeEnhancement(s,i.width,i.height);for(var c=0;c<s.length;c+=4){var l=.299*s[c]+.587*s[c+1]+.114*s[c+2];n.contrast&&(l=(l-128)*n.contrast+128),n.brightness&&(l*=n.brightness);var u=n.threshold||128;n.adaptiveThreshold&&(u=r.calculateAdaptiveThreshold(s,c,i.width,i.height));var d=l>u?255:0;s[c]=d,s[c+1]=d,s[c+2]=d,s[c+3]=255}o.putImageData(t,0,0),i.toBlob(function(t){e(t)},"image/png")},a.src=URL.createObjectURL(t)}))},e)})),function(e){return l.apply(this,arguments)})},{key:"applyDenoising",value:function(e,t,n){for(var r=new Uint8ClampedArray(e),i=1;i<n-1;i++)for(var o=1;o<t-1;o++){for(var a=4*(i*t+o),s=[],c=-1;c<=1;c++)for(var l=-1;l<=1;l++){var u=4*((i+c)*t+(o+l));s.push(r[u])}s.sort(function(e,t){return e-t});var d=s[Math.floor(s.length/2)];e[a]=d,e[a+1]=d,e[a+2]=d}}},{key:"applyEdgeEnhancement",value:function(e,t,n){for(var r=new Uint8ClampedArray(e),i=1;i<n-1;i++)for(var o=1;o<t-1;o++){var a=4*(i*t+o),s=r[a],c=4*s-[r[4*((i-1)*t+o)],r[4*(i*t+(o-1))],r[4*(i*t+(o+1))],r[4*((i+1)*t+o)]].reduce(function(e,t){return e+t},0),l=Math.min(255,Math.max(0,s+.5*c));e[a]=l,e[a+1]=l,e[a+2]=l}}},{key:"calculateAdaptiveThreshold",value:function(e,t,n,r){for(var i=t/4%n,o=Math.floor(t/4/n),a=0,s=0,c=-15;c<=15;c++)for(var l=-15;l<=15;l++){var u=i+l,d=o+c;u>=0&&u<n&&d>=0&&d<r&&(a+=e[4*(d*n+u)],s++)}return a/s*.8}},{key:"extractTextWithMultipleEngines",value:(c=_(N().m(function e(t){var n,r,i,o,a,s,c,l;return N().w(function(e){for(;;)switch(e.p=e.n){case 0:n=[],r=0;case 1:if(!(r<this.workers.length)){e.n=8;break}i=0;case 2:if(!(i<t.length)){e.n=7;break}return e.p=3,e.n=4,this.workers[r].recognize(t[i]);case 4:o=e.v,a=o.data,s=a.text,c=a.confidence,n.push({text:s,confidence:c,engine:r,version:i}),e.n=6;break;case 5:e.p=5,l=e.v,console.warn("Engine ".concat(r,", version ").concat(i," failed:"),l);case 6:i++,e.n=2;break;case 7:r++,e.n=1;break;case 8:return e.a(2,n)}},e,this,[[3,5]])})),function(e){return c.apply(this,arguments)})},{key:"correctTextWithAI",value:(s=_(N().m(function e(t){var n,r,i,o,a,s;return N().w(function(e){for(;;)switch(e.p=e.n){case 0:n=[],r=A(t),e.p=1,r.s();case 2:if((i=r.n()).done){e.n=5;break}return o=i.value,e.n=3,this.applyTextCorrection(o.text);case 3:a=e.v,n.push(R(R({},o),{},{correctedText:a,originalText:o.text}));case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,s=e.v,r.e(s);case 7:return e.p=7,r.f(),e.f(7);case 8:return e.a(2,n)}},e,this,[[1,6,7,8]])})),function(e){return s.apply(this,arguments)})},{key:"applyTextCorrection",value:(a=_(N().m(function e(t){var n,r,i,o,a,s,c,l,u,d,f,p,h,m,y,v,g,b,w,k,S,E,x;return N().w(function(e){for(;;)if(0===e.n){for(n=t,r=0,i=["red","white"];r<i.length;r++){o=i[r],a=A(this.wineVocabulary[o]);try{for(a.s();!(s=a.n()).done;)c=s.value,l=new RegExp(this.createFuzzyPattern(c),"gi"),n=n.replace(l,c)}catch(e){a.e(e)}finally{a.f()}}u=A(this.wineVocabulary.regions);try{for(u.s();!(d=u.n()).done;)f=d.value,p=new RegExp(this.createFuzzyPattern(f),"gi"),n=n.replace(p,f)}catch(e){u.e(e)}finally{u.f()}for(h=0,m=["starters","entrees"];h<m.length;h++){y=m[h],v=A(this.foodVocabulary[y]);try{for(v.s();!(g=v.n()).done;)b=g.value,w=new RegExp(this.createFuzzyPattern(b),"gi"),n=n.replace(w,b)}catch(e){v.e(e)}finally{v.f()}}k=A(this.foodVocabulary.cooking);try{for(k.s();!(S=k.n()).done;)E=S.value,x=new RegExp(this.createFuzzyPattern(E),"gi"),n=n.replace(x,E)}catch(e){k.e(e)}finally{k.f()}return e.a(2,n)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createFuzzyPattern",value:function(e){return e.split("").map(function(e){return{0:"[0O]",O:"[0O]",1:"[1Il]",I:"[1Il]",l:"[1Il]",5:"[5S]",S:"[5S]",8:"[8B]",B:"[8B]",a:"[a@]","@":"[a@]",e:"[e3]",3:"[e3]"}[e.toLowerCase()]||e}).join("")}},{key:"parseMenuWithAdvancedAlgorithms",value:(o=_(N().m(function e(t){var n,r,i,o,a,s,c,l,u;return N().w(function(e){for(;;)if(0===e.n){for(n=t.map(function(e){return e.correctedText}).join("\n"),r=[this.parseWithAdvancedSectionDetection,this.parseWithMachineLearning,this.parseWithSemanticAnalysis],i=null,o=0,a=0,s=r;a<s.length;a++){c=s[a];try{l=c.call(this,n),(u=this.calculateAdvancedConfidenceScore(l,t))>o&&(o=u,i=R(R({},l),{},{confidence:u}))}catch(e){console.warn("Advanced parsing strategy failed:",e)}}return e.a(2,i||this.createFallbackResult())}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"parseWithAdvancedSectionDetection",value:function(e){var t,n=e.split("\n").filter(function(e){return e.trim()}),r=this.initializeResultStructure(),i=null,o=.9,a=A(n);try{for(a.s();!(t=a.n()).done;){var s=t.value.trim();if(s){var c=this.detectSectionWithConfidence(s);c.section&&c.confidence>.8?(i=c.section,o=c.confidence):this.parseLineWithAdvancedContext(s,i,r,o)}}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"detectSectionWithConfidence",value:function(e){for(var t=0,n=Object.entries({redWine:{patterns:[/(red\s+wine|pinot\s+noir|merlot|cabernet|syrah|zinfandel)/i],keywords:["red","wine","pinot","merlot","cabernet"],confidence:.9},whiteWine:{patterns:[/(white\s+wine|chardonnay|sauvignon|riesling|pinot\s+grigio)/i],keywords:["white","wine","chardonnay","sauvignon","riesling"],confidence:.9},starters:{patterns:[/(starters?|appetizers?|hors\s+d'oeuvres?)/i],keywords:["starter","appetizer","hors"],confidence:.85},entrees:{patterns:[/(entrees?|main\s+courses?|dishes?)/i],keywords:["entree","main","course","dish"],confidence:.85}});t<n.length;t++){var r,i=j(n[t],2),o=i[0],a=i[1],s=A(a.patterns);try{for(s.s();!(r=s.n()).done;)if(r.value.test(e))return{section:o,confidence:a.confidence}}catch(e){s.e(e)}finally{s.f()}var c=a.keywords.filter(function(t){return e.toLowerCase().includes(t)}).length;if(c>0)return{section:o,confidence:a.confidence*(c/a.keywords.length)}}return{section:null,confidence:0}}},{key:"parseLineWithAdvancedContext",value:function(e,t,n,r){var i=(r+this.calculateLineConfidence(e))/2;if(!(i<.7))switch(t){case"redWine":!n.redWine&&this.isWineLine(e)&&(n.redWine=this.parseWineLineWithConfidence(e,i));break;case"whiteWine":!n.whiteWine&&this.isWineLine(e)&&(n.whiteWine=this.parseWineLineWithConfidence(e,i));break;case"starters":this.isFoodLine(e)&&(n.starters=n.starters||[],n.starters.push({name:this.cleanFoodText(e),confidence:i}));break;case"entrees":this.isFoodLine(e)&&(n.entrees=n.entrees||[],n.entrees.push({name:this.cleanFoodText(e),confidence:i}))}}},{key:"parseWithMachineLearning",value:function(e){for(var t=this.initializeResultStructure(),n=0,r=[/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*),\s*([^,]+),\s*(\d{4})\s*\$(\d+)/g,/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)\s*\$(\d+)/g];n<r.length;n++){var i,o=r[n],a=A(T(e.matchAll(o)));try{for(a.s();!(i=a.n()).done;){var s=i.value,c=this.parseWineFromMatch(s);this.isRedWine(c.name)&&!t.redWine?t.redWine=c:this.isWhiteWine(c.name)&&!t.whiteWine&&(t.whiteWine=c)}}catch(e){a.e(e)}finally{a.f()}}return t}},{key:"parseWithSemanticAnalysis",value:function(e){var t,n=this.initializeResultStructure(),r=A(e.split("\n"));try{for(r.s();!(t=r.n()).done;){var i=t.value.trim();if(i){if(this.hasWineSemantics(i)){var o=this.parseWineLineWithConfidence(i,.95);this.isRedWine(o.name)&&!n.redWine?n.redWine=o:this.isWhiteWine(o.name)&&!n.whiteWine&&(n.whiteWine=o)}if(this.hasFoodSemantics(i)){var a={name:this.cleanFoodText(i),confidence:.9};this.isStarterSemantics(i)?(n.starters=n.starters||[],n.starters.push(a)):(n.entrees=n.entrees||[],n.entrees.push(a))}}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"hasWineSemantics",value:function(e){return["vineyard","estate","reserve","vintage","chateau","domaine"].some(function(t){return e.toLowerCase().includes(t)})||this.isWineLine(e)}},{key:"hasFoodSemantics",value:function(e){return["with","served","accompanied","garnished","topped"].some(function(t){return e.toLowerCase().includes(t)})||this.isFoodLine(e)}},{key:"isStarterSemantics",value:function(e){return["starter","appetizer","small","light","beginning"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"calculateAdvancedConfidenceScore",value:function(e,t){var n=0,r=0;return n+=t.reduce(function(e,t){return e+t.confidence},0)/t.length*.4,r+=.4,e.redWine&&(n+=.2*e.redWine.confidence,r+=.2),e.whiteWine&&(n+=.2*e.whiteWine.confidence,r+=.2),e.starters&&e.starters.length>0&&(n+=e.starters.reduce(function(e,t){return e+t.confidence},0)/e.starters.length*.1,r+=.1),e.entrees&&e.entrees.length>0&&(n+=e.entrees.reduce(function(e,t){return e+t.confidence},0)/e.entrees.length*.1,r+=.1),r>0?n/r:0}},{key:"validateAndScoreResults",value:(i=_(N().m(function e(t){var n,r=this;return N().w(function(e){for(;;)if(0===e.n)return(n=R({},t)).redWine&&(n.redWine=this.validateWineData(n.redWine)),n.whiteWine&&(n.whiteWine=this.validateWineData(n.whiteWine)),n.starters&&(n.starters=n.starters.filter(function(e){return r.validateFoodData(e)}).map(function(e){return r.cleanFoodData(e)})),n.entrees&&(n.entrees=n.entrees.filter(function(e){return r.validateFoodData(e)}).map(function(e){return r.cleanFoodData(e)})),n.confidence=this.calculateFinalConfidence(n),e.a(2,n)},e,this)})),function(e){return i.apply(this,arguments)})},{key:"validateWineData",value:function(e){return!e.name||e.name.length<3?null:(e.price.startsWith("$")||(e.price="$".concat(e.price.replace(/[^\d]/g,""))),e.year&&!/^\d{4}$/.test(e.year)&&(e.year=""),e)}},{key:"validateFoodData",value:function(e){return e.name&&e.name.length>3&&e.confidence>.7}},{key:"cleanFoodData",value:function(e){return{name:e.name,confidence:e.confidence}}},{key:"calculateFinalConfidence",value:function(e){var t=0,n=0;return e.redWine&&(t+=e.redWine.confidence,n++),e.whiteWine&&(t+=e.whiteWine.confidence,n++),e.starters&&e.starters.length>0&&(t+=e.starters.reduce(function(e,t){return e+t.confidence},0)/e.starters.length,n++),e.entrees&&e.entrees.length>0&&(t+=e.entrees.reduce(function(e,t){return e+t.confidence},0)/e.entrees.length,n++),n>0?t/n:0}},{key:"initializeResultStructure",value:function(){return{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null,specials:[],confidence:0}}},{key:"createFallbackResult",value:function(){return{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null,specials:[],confidence:.5,error:"Advanced parsing failed"}}},{key:"isWineLine",value:function(e){return["pinot noir","merlot","cabernet","chardonnay","sauvignon","riesling","syrah","zinfandel","malbec","sangiovese","pinot grigio","gewürztraminer"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"isRedWine",value:function(e){return["pinot noir","merlot","cabernet","syrah","zinfandel","malbec","sangiovese"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"isWhiteWine",value:function(e){return["chardonnay","sauvignon","riesling","pinot grigio","gewürztraminer","viognier"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"isFoodLine",value:function(e){return["salmon","duck","chicken","beef","pork","lamb","fish","shrimp","scallop","risotto","pasta","salad","soup","tartare","charcuterie","cheese","mushroom"].some(function(t){return e.toLowerCase().includes(t)})||e.length>5&&!e.match(/^\d+$/)&&!e.match(/^\$\d+/)}},{key:"cleanFoodText",value:function(e){return e.replace(/\$(\d+)/,"").replace(/^\d+\.\s*/,"").trim()}},{key:"calculateLineConfidence",value:function(e){var t=.8;return e.includes("$")&&(t+=.1),/\d{4}/.test(e)&&(t+=.05),/[A-Z]/.test(e)&&(t+=.05),Math.min(1,t)}},{key:"parseWineLineWithConfidence",value:function(e,t){var n=e.match(/\$(\d+)/),r=e.match(/(\d{4})/),i=n?"$".concat(n[1]):"$0",o=r?r[1]:"",a=e,s="";o&&(a=e.split(o)[0].trim());var c=e.split(",");return c.length>1&&(a=c[0].trim(),s=(s=c.slice(1).join(",").trim()).replace(/\d{4}/,"").trim()),{name:a=a.replace(/\$(\d+)/,"").trim(),region:s,year:o,price:i,confidence:t}}},{key:"parseWineFromMatch",value:function(e){return e.length>=5?{name:e[1].trim(),region:e[2].trim(),year:e[3],price:"$".concat(e[4]),confidence:.95}:{name:e[1].trim(),region:"",year:"",price:"$".concat(e[2]),confidence:.9}}},{key:"handleProcessingError",value:(r=_(N().m(function e(t,n){return N().w(function(e){for(;;)switch(e.n){case 0:if(console.warn("Ultra-enhanced OCR processing failed, attempting recovery..."),!(this.retryCount<this.maxRetries)){e.n=3;break}return this.retryCount++,console.log("Retry attempt ".concat(this.retryCount,"/").concat(this.maxRetries)),e.n=1,new Promise(function(e){return setTimeout(e,1e3)});case 1:return e.n=2,this.processImage(t);case 2:return e.a(2,e.v);case 3:return e.a(2,{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null,specials:[],confidence:.5,error:n.message,rawText:"Ultra-enhanced OCR processing failed after all retries"});case 4:return e.a(2)}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"setProgressCallback",value:function(e){this.progressCallback=e}},{key:"updateProgress",value:function(e,t){this.progressCallback&&this.progressCallback({percent:e,message:t})}},{key:"terminate",value:(n=_(N().m(function e(){var t,n,r,i;return N().w(function(e){for(;;)switch(e.p=e.n){case 0:t=A(this.workers),e.p=1,t.s();case 2:if((n=t.n()).done){e.n=4;break}return r=n.value,e.n=3,r.terminate();case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,i=e.v,t.e(i);case 6:return e.p=6,t.f(),e.f(6);case 7:this.workers=[],this.isInitialized=!1;case 8:return e.a(2)}},e,this,[[1,5,6,7]])})),function(){return n.apply(this,arguments)})}],t&&G(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,o,a,s,c,l,u,d,f,p}();function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function V(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return q(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];n>3?(i=h===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,f.v=r,f.n=o[1]):p<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(q(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,q(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,q(d,"constructor",l),q(l,"constructor",c),c.displayName="GeneratorFunction",q(l,i,"GeneratorFunction"),q(d),q(d,i,"Generator"),q(d,r,function(){return this}),q(d,"toString",function(){return"[object Generator]"}),(V=function(){return{w:o,m:f}})()}function q(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}q=function(e,t,n,r){function o(t,n){q(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},q(e,t,n,r)}function J(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e){if("object"!=U(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}var Z=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements,this.ocrService=new $},t=[{key:"initialize",value:function(){this.setupMessageForm(),this.setupOCRFunctionality()}},{key:"setupMessageForm",value:function(){var e=this,t=document.getElementById("adminMessageForm");t&&t.addEventListener("submit",function(t){t.preventDefault(),e.handleMessageSubmit(t)})}},{key:"setupOCRFunctionality",value:function(){var e=this,t=document.getElementById("ocrFileUpload"),n=(document.getElementById("ocrPreviewContainer"),document.getElementById("ocrResultContainer"),document.getElementById("ocrPreview"),document.getElementById("processOcrButton")),r=document.getElementById("applyOcrButton");this.ocrService.setProgressCallback(function(t){var n=t.percent,r=t.message;e.updateOCRProgress(n,r)}),t&&t.addEventListener("change",function(t){e.handleFileUpload(t)}),n&&n.addEventListener("click",function(){e.processOCR()}),r&&r.addEventListener("click",function(){e.applyOCRResults()})}},{key:"handleFileUpload",value:function(e){var t=e.target.files[0],n=document.getElementById("ocrPreview"),r=document.getElementById("ocrPreviewContainer"),i=document.getElementById("ocrResultContainer");if(t&&n&&r&&i){var o=new FileReader;o.onload=function(e){n.src=e.target.result,r.classList.remove("hidden"),i.classList.add("hidden")},o.readAsDataURL(t)}}},{key:"processOCR",value:(n=V().m(function e(){var t,n,r,i,o,a;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("ocrFileUpload"),n=document.getElementById("processOcrButton"),r=document.getElementById("ocrResultContainer"),i=document.getElementById("ocrResult"),t.files[0]){e.n=1;break}return alert("Please select an image first."),e.a(2);case 1:return n.disabled=!0,n.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Processing...',i.innerHTML='<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> Processing image with enhanced OCR...</p>',r.classList.remove("hidden"),e.p=2,e.n=3,this.ocrService.processImage(t.files[0]);case 3:o=e.v,this.state.ocrData={redWine:o.redWine,whiteWine:o.whiteWine,starters:o.starters||[],entrees:o.entrees||[],cocktail:o.cocktail,confidence:o.confidence},this.displayOCRResults(),o.confidence&&this.showConfidenceScore(o.confidence),e.n=5;break;case 4:e.p=4,a=e.v,console.error("OCR processing failed:",a),i.innerHTML='<p class="text-red-500">OCR processing failed. Please try again.</p>';case 5:return e.p=5,n.disabled=!1,n.innerHTML='<i class="fas fa-magic mr-2"></i> Process Image',e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])}),r=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){J(o,r,i,a,s,"next",e)}function s(e){J(o,r,i,a,s,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"simulateOCR",value:function(e){var t=this,n=document.getElementById("ocrResult"),r=document.getElementById("ocrResultContainer");n&&r&&(n.innerHTML='<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> Processing image...</p>',r.classList.remove("hidden"),setTimeout(function(){t.state.ocrData={redWine:{name:"INSIGNIA, JOSEPH PHELPS ESTATE",region:"Napa Valley, CA, 2014",price:"$305",code:"R051"},whiteWine:{name:"RAMEY, RUSSIAN RIVER VALLEY",region:"California, 2021",price:"$120",code:"C016"},starters:["House-Made Charcuterie Board with Artisanal Cheeses","Seared Sea Scallops with Citrus Beurre Blanc"],entrees:["Pan-Seared Duck Breast with Cherry Reduction","Wild Mushroom Risotto with Black Truffle"],cocktail:{name:"Barrel-Aged Manhattan",description:"Aged bourbon, sweet vermouth, bitters",price:"$14"}},t.displayOCRResults()},1500))}},{key:"displayOCRResults",value:function(){var e=document.getElementById("ocrResult");if(e){var t='<div class="space-y-4">';if(this.state.ocrData.redWine||this.state.ocrData.whiteWine){if(t+='<h4 class="font-bold text-yellow-400 mb-2">Featured Wines:</h4>',this.state.ocrData.redWine){var n=Math.round(100*(this.state.ocrData.redWine.confidence||.9)),r=n>=97?"text-green-400":n>=90?"text-yellow-400":"text-red-400";t+='\n                    <div class="bg-black bg-opacity-20 p-3 rounded-lg mb-2">\n                        <p><span class="font-semibold">Red:</span> '.concat(this.state.ocrData.redWine.name," - ").concat(this.state.ocrData.redWine.price,'</p>\n                        <p class="text-sm text-gray-400">').concat(this.state.ocrData.redWine.region," ").concat(this.state.ocrData.redWine.year?"(".concat(this.state.ocrData.redWine.year,")"):"",'</p>\n                        <div class="flex items-center mt-1">\n                            <span class="text-xs ').concat(r,'">Confidence: ').concat(n,"%</span>\n                        </div>\n                    </div>\n                ")}if(this.state.ocrData.whiteWine){var i=Math.round(100*(this.state.ocrData.whiteWine.confidence||.9)),o=i>=97?"text-green-400":i>=90?"text-yellow-400":"text-red-400";t+='\n                    <div class="bg-black bg-opacity-20 p-3 rounded-lg mb-2">\n                        <p><span class="font-semibold">White:</span> '.concat(this.state.ocrData.whiteWine.name," - ").concat(this.state.ocrData.whiteWine.price,'</p>\n                        <p class="text-sm text-gray-400">').concat(this.state.ocrData.whiteWine.region," ").concat(this.state.ocrData.whiteWine.year?"(".concat(this.state.ocrData.whiteWine.year,")"):"",'</p>\n                        <div class="flex items-center mt-1">\n                            <span class="text-xs ').concat(o,'">Confidence: ').concat(i,"%</span>\n                        </div>\n                    </div>\n                ")}}if(this.state.ocrData.starters&&this.state.ocrData.starters.length>0&&(t+='<h4 class="font-bold text-yellow-400 mt-4 mb-2">Starters:</h4>',t+='<ul class="list-disc pl-4 mb-2">',this.state.ocrData.starters.forEach(function(e){var n="string"==typeof e?e:e.name,r="string"==typeof e?.9:e.confidence||.9,i=Math.round(100*r),o=i>=97?"text-green-400":i>=90?"text-yellow-400":"text-red-400";t+='\n                    <li class="mb-1">\n                        '.concat(n,'\n                        <span class="text-xs ').concat(o,' ml-2">(').concat(i,"%)</span>\n                    </li>\n                ")}),t+="</ul>"),this.state.ocrData.entrees&&this.state.ocrData.entrees.length>0&&(t+='<h4 class="font-bold text-yellow-400 mt-4 mb-2">Entrees:</h4>',t+='<ul class="list-disc pl-4 mb-2">',this.state.ocrData.entrees.forEach(function(e){var n="string"==typeof e?e:e.name,r="string"==typeof e?.9:e.confidence||.9,i=Math.round(100*r),o=i>=97?"text-green-400":i>=90?"text-yellow-400":"text-red-400";t+='\n                    <li class="mb-1">\n                        '.concat(n,'\n                        <span class="text-xs ').concat(o,' ml-2">(').concat(i,"%)</span>\n                    </li>\n                ")}),t+="</ul>"),this.state.ocrData.cocktail){t+='<h4 class="font-bold text-yellow-400 mt-4 mb-2">Featured Cocktail:</h4>';var a=Math.round(100*(this.state.ocrData.cocktail.confidence||.9)),s=a>=97?"text-green-400":a>=90?"text-yellow-400":"text-red-400";t+='\n                <div class="bg-black bg-opacity-20 p-3 rounded-lg">\n                    <p>'.concat(this.state.ocrData.cocktail.name," - ").concat(this.state.ocrData.cocktail.price,'</p>\n                    <p class="text-sm text-gray-400">').concat(this.state.ocrData.cocktail.description||"",'</p>\n                    <div class="flex items-center mt-1">\n                        <span class="text-xs ').concat(s,'">Confidence: ').concat(a,"%</span>\n                    </div>\n                </div>\n            ")}t+="</div>",e.innerHTML=t}}},{key:"applyOCRResults",value:function(){var e=document.querySelectorAll(".featured-wine");if(this.state.ocrData.redWine&&e[0]){var t=e[0],n=t.querySelector("p:nth-child(2)"),r=t.querySelector("p:nth-child(3)"),i=t.querySelector("p:nth-child(4)"),o=t.querySelector("p:nth-child(5)");n&&(n.textContent=this.state.ocrData.redWine.name),r&&(r.textContent=this.state.ocrData.redWine.region),i&&(i.textContent=this.state.ocrData.redWine.price),o&&(o.textContent="(".concat(this.state.ocrData.redWine.code||"N/A",")"))}if(this.state.ocrData.whiteWine&&e[1]){var a=e[1],s=a.querySelector("p:nth-child(2)"),c=a.querySelector("p:nth-child(3)"),l=a.querySelector("p:nth-child(4)"),u=a.querySelector("p:nth-child(5)");s&&(s.textContent=this.state.ocrData.whiteWine.name),c&&(c.textContent=this.state.ocrData.whiteWine.region),l&&(l.textContent=this.state.ocrData.whiteWine.price),u&&(u.textContent="(".concat(this.state.ocrData.whiteWine.code||"N/A",")"))}if(this.state.ocrData.starters&&this.state.ocrData.starters.length>=2){var d,f=document.querySelectorAll(".food-special-card .grid div p"),p="string"==typeof this.state.ocrData.starters[0]?this.state.ocrData.starters[0]:this.state.ocrData.starters[0].name,h="string"==typeof this.state.ocrData.starters[1]?this.state.ocrData.starters[1]:(null===(d=this.state.ocrData.starters[1])||void 0===d?void 0:d.name)||"";f[0]&&(f[0].textContent=p),f[1]&&(f[1].textContent=h)}if(this.state.ocrData.entrees&&this.state.ocrData.entrees.length>0){var m=document.querySelectorAll(".food-special-card .grid div p"),y="string"==typeof this.state.ocrData.entrees[0]?this.state.ocrData.entrees[0]:this.state.ocrData.entrees[0].name;m[2]&&(m[2].textContent=y)}var v=this.state.ocrData.confidence||.95,g=Math.round(100*v),b="OCR results applied successfully! (".concat(g,g>=97?"% accuracy)":"% accuracy - please verify)");this.showToast(b,g>=97?"success":"warning")}},{key:"updateOCRProgress",value:function(e,t){var n=document.getElementById("processOcrButton"),r=document.getElementById("ocrResult");n&&(n.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>'.concat(t," (").concat(e,"%)")),r&&e<100&&(r.innerHTML='<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> '.concat(t," (").concat(e,"%)</p>"))}},{key:"showConfidenceScore",value:function(e){var t=Math.round(100*e),n=t>=97?"text-green-400":t>=90?"text-yellow-400":"text-red-400",r='\n            <div class="mt-4 p-3 bg-black bg-opacity-30 rounded-lg">\n                <h4 class="font-bold '.concat(n,' mb-2">OCR Confidence Score</h4>\n                <div class="flex items-center">\n                    <div class="flex-1 bg-gray-700 rounded-full h-2 mr-3">\n                        <div class="bg-green-500 h-2 rounded-full" style="width: ').concat(t,'%"></div>\n                    </div>\n                    <span class="text-sm ').concat(n,' font-bold">').concat(t,'%</span>\n                </div>\n                <p class="text-xs text-gray-400 mt-1">\n                    ').concat(t>=97?"Excellent accuracy!":t>=90?"Good accuracy":"Lower accuracy - please verify results","\n                </p>\n            </div>\n        "),i=document.getElementById("ocrResult");i&&(i.innerHTML+=r)}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div"),r="success"===t?"bg-green-600":"error"===t?"bg-red-600":"bg-blue-600";n.className="fixed bottom-4 right-4 ".concat(r," text-white py-2 px-4 rounded-lg shadow-lg z-50"),n.textContent=e,document.body.appendChild(n),setTimeout(function(){n.remove()},3e3)}},{key:"handleMessageSubmit",value:function(e){var t=document.getElementById("senderName").value,n=document.getElementById("messageSubject").value,r=document.getElementById("messageBody").value,i="mailto:info@table1837.com?subject=".concat(encodeURIComponent(n),"&body=").concat(encodeURIComponent("From: ".concat(t,"\n\n").concat(r)));window.location.href=i,e.target.reset(),alert("Email client opened. Please send the message from your email application.")}},{key:"cleanup",value:function(){}}],t&&K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function ee(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}var te=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},(t=[{key:"initialize",value:function(){this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("wineSearch"),n=document.getElementById("wineFilter");t&&t.addEventListener("input",function(){return e.filterWines()}),n&&n.addEventListener("change",function(){return e.filterWines()})}},{key:"filterWines",value:function(){var e=document.getElementById("wineSearch"),t=document.getElementById("wineFilter");if(e&&t){var n=e.value.toLowerCase(),r=t.value;document.querySelectorAll(".wine-category").forEach(function(e){var t=e.classList.contains("red-wine")?"red":e.classList.contains("white-wine")?"white":e.classList.contains("sparkling-wine")?"sparkling":"",i=!0;r&&r!==t&&(i=!1),n&&i&&(i=e.textContent.toLowerCase().includes(n)),e.style.display=i?"block":"none"})}}}])&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ie(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}var oe=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements,this.inventory={vodka:["Zyr Vodka","360 Double Chocolate Vodka","Western Sun Blueberry Vodka","Absolut","Smirnoff Vanilla","Smirnoff Citrus","Smirnoff Vodka (Regular)","Holla Vodka","Tito's","Gray Goose","Double Cross Vodka","Kettle One","Kettle One Cucumber and Mint"],gin:["Hendrick's Gin","Bar Hill Gin","Whitley Neill Rhubarb and Ginger Gin","Bombay Sapphire Dry Gin","Nolet's Dry Gin","Blue Coat Dry Gin","Tanqueray Dry Gin","Beef Eater Dry Gin","Aviation American Gin"],rum:["Cruzan Blueberry Lemonade Rum","Gosling's Black Rum","Malibu Coconut Rum","Captain Morgan Spiced Rum","Bacardi"],tequila:["21 Seed Cucumber Jalapeno Tequila","Jose Cuervo Silver","Jose Cuervo Gold","Casamigos Mezcal","Casamigos Blanco","Coramino Reposado","Agavales Blood Orange Blanco Tequila"],whiskey:["Knob Creek","Elijah Craig","Angels Envy","Dublin","Sycamore Rye","Maker's Mark","Bullet Rye","Bullet Bourbon","Basil Hayden's Malted Rye","Basil Hayden's Bourbon","Jack Daniels","Jim Bean","Woodford Reserve","Watershed Distillery Straight Bourbon 4-Year","Dubliner","Canadian Club","Seagrams Seven","Seagram's VO","Southern Comfort","Crown Royal Apple","Crown Royal","Jameson","Red Breast Single Pot Still Irish Whiskey 12-Year","Chivas","Highland Park 12-Year","Glenliet 12-Year","Glenfiddich 12-Year","Balvini Doublewood 12-Year","Glenmorangie 12-Year","Macallen 12 Double Cask","Dewars Scotch Whiskey White Label","Johnnie Walker Red","Johnnie Walker Black"],cordials:["Monin Blackberry","Monin Lavender","Monin Caramel","DeKuyper Sour Apple","Peychaud's Bitters","Aromatic Bitters","Angostura Bitters","Dry Vermouth","Sweet Vermouth","Saint Germain","Drambuie","Blue Curacao","DeKuyper Butterscotch","DeKuyper Melon","DeKuyper Razmataz","DeKuyper Watermelon Pucker","Jaquin's Creme de Cacao","Triple Sec","Middle West Spirits Bourbon Cream","Disaronno Amaretto","Screwball","Kahlua","Bailey's","RumChata","Frangelico","Sambuca","Luxardo","Campari","Aperol","Cream to Violet","Contreau","Pama Pomegranate Liqueur"]}},t=[{key:"initialize",value:function(){this.initializeInventory(),this.displayInventory(),this.initializeVoiceRecognition(),this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var e=this;document.querySelectorAll(".category-filter").forEach(function(t){t.addEventListener("click",function(t){document.querySelectorAll(".category-filter").forEach(function(e){e.classList.remove("active","bg-dark-green"),e.classList.add("bg-gray-700")}),t.target.classList.add("active","bg-dark-green"),t.target.classList.remove("bg-gray-700"),e.filterInventory(t.target.dataset.category)})});var t=document.getElementById("updateInventoryBtn");t&&t.addEventListener("click",function(){e.saveInventory(),alert("Inventory updated successfully!")})}},{key:"initializeInventory",value:function(){var e=this;Object.keys(this.inventory).forEach(function(t){e.inventory[t].forEach(function(n){e.state.inventoryData[n]||(e.state.inventoryData[n]={bottles:0,ounces:0,category:t})})})}},{key:"displayInventory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=document.getElementById("inventoryGrid");if(n){var r=document.createDocumentFragment();Object.keys(this.inventory).forEach(function(n){if("all"===t||t===n){var i=document.createElement("div");i.className="col-span-full",i.innerHTML='<h3 class="text-2xl font-bold mb-4 text-center capitalize text-yellow-400">'.concat(n,"</h3>"),r.appendChild(i),e.inventory[n].forEach(function(t){var i=e.state.inventoryData[t]||{bottles:0,ounces:0,category:n},o=document.createElement("div");o.className="inventory-item",o.innerHTML='\n                    <h4 class="font-semibold mb-3">'.concat(t,'</h4>\n                    <div class="grid grid-cols-2 gap-4">\n                        <div>\n                            <label class="block text-sm text-gray-300 mb-1">Bottles</label>\n                            <input type="number" \n                                   class="w-full px-3 py-2 bg-black bg-opacity-50 border border-gray-600 rounded focus:outline-none focus:border-green-600 text-white" \n                                   value="').concat(i.bottles,'" \n                                   data-item="').concat(t,'" \n                                   data-type="bottles"\n                                   min="0">\n                        </div>\n                        <div>\n                            <label class="block text-sm text-gray-300 mb-1">Ounces</label>\n                            <input type="number" \n                                   class="w-full px-3 py-2 bg-black bg-opacity-50 border border-gray-600 rounded focus:outline-none focus:border-green-600 text-white" \n                                   value="').concat(i.ounces,'" \n                                   data-item="').concat(t,'" \n                                   data-type="ounces"\n                                   min="0"\n                                   step="0.1">\n                        </div>\n                    </div>\n                '),o.querySelectorAll("input").forEach(function(t){t.addEventListener("change",function(t){var r=t.target.dataset.item,i=t.target.dataset.type,o=parseFloat(t.target.value)||0;e.state.inventoryData[r]||(e.state.inventoryData[r]={bottles:0,ounces:0,category:n}),e.state.inventoryData[r][i]=o})}),r.appendChild(o)})}}),n.innerHTML="",n.appendChild(r)}}},{key:"filterInventory",value:function(e){this.displayInventory(e)}},{key:"saveInventory",value:function(){localStorage.setItem("inventoryData",JSON.stringify(this.state.inventoryData))}},{key:"initializeVoiceRecognition",value:function(){var e=this;if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){var t=window.SpeechRecognition||window.webkitSpeechRecognition;this.state.recognition=new t,this.state.recognition.continuous=!0,this.state.recognition.interimResults=!0,this.state.recognition.lang="en-US";var n=document.getElementById("voiceButton");n&&n.addEventListener("click",function(){return e.toggleVoiceRecognition()}),this.state.recognition.onresult=function(t){return e.handleVoiceResult(t)},this.state.recognition.onerror=function(t){return e.handleVoiceError(t)},this.state.recognition.onend=function(){return e.handleVoiceEnd()}}else{var r=document.getElementById("voiceButton");r&&(r.disabled=!0,r.innerHTML='<i class="fas fa-microphone-slash"></i> Voice Not Supported')}}},{key:"toggleVoiceRecognition",value:function(){var e=document.getElementById("voiceButton"),t=document.getElementById("voiceStatus");this.state.isListening?(this.state.recognition.stop(),this.state.isListening=!1,t.classList.add("hidden"),e.innerHTML='<i class="fas fa-microphone"></i> Voice Update',e.classList.remove("bg-red-600")):(this.state.recognition.start(),this.state.isListening=!0,t.classList.remove("hidden"),e.innerHTML='<i class="fas fa-stop"></i> Stop Listening',e.classList.add("bg-red-600"))}},{key:"handleVoiceResult",value:function(e){var t=e.results[e.results.length-1],n=t[0].transcript.trim(),r=document.getElementById("voiceText");r&&(r.textContent=n),t.isFinal&&this.processVoiceInput(n)}},{key:"handleVoiceError",value:function(e){console.error("Speech recognition error:",e.error),this.state.isListening=!1;var t=document.getElementById("voiceStatus"),n=document.getElementById("voiceButton");t&&t.classList.add("hidden"),n&&(n.innerHTML='<i class="fas fa-microphone"></i> Voice Update',n.classList.remove("bg-red-600")),alert("Voice recognition error: ".concat(e.error,". Please try again."))}},{key:"handleVoiceEnd",value:function(){this.state.isListening&&this.state.recognition.start()}},{key:"processVoiceInput",value:function(e){console.log("Processing voice input:",e);try{for(var t=e.toLowerCase().split(" "),n=0,r=0,i=0;i<t.length;i++){var o=t[i],a=parseFloat(o);if(!isNaN(a)){var s=t[i+1]||"";s.includes("bottle")||"bottles"===s||"bottle"===s?n=a:(s.includes("ounce")||s.includes("oz")||"ounces"===s)&&(r=a)}}var c=0,l=null;Object.keys(this.state.inventoryData).forEach(function(t){var n=t.toLowerCase().split(" "),r=0,i=0;n.forEach(function(t){t.length>2&&(i++,e.toLowerCase().includes(t)&&r++)});var o=i>0?r/i:0;o>c&&o>.4&&(c=o,l=t)}),l&&(n>0||r>0)?(n>0&&(this.state.inventoryData[l].bottles=n),r>0&&(this.state.inventoryData[l].ounces=r),this.updateInventoryDisplay(l,n,r),this.showToast("Updated ".concat(l,": ").concat(n>0?"".concat(n," bottles"):""," ").concat(r>0?"".concat(r," ounces"):""))):l?this.showToast("Recognized ".concat(l,", but no quantity detected. Please specify bottles or ounces.")):n>0||r>0?this.showToast("Quantity detected (".concat(n>0?"".concat(n," bottles"):""," ").concat(r>0?"".concat(r," ounces"):"","), but could not match a specific item. Please try again.")):this.showToast("Could not recognize inventory update. Please try again with item name and quantity.")}catch(e){console.error("Error processing voice input:",e),this.showToast("Error processing voice input. Please try again.")}}},{key:"updateInventoryDisplay",value:function(e,t,n){document.querySelectorAll('input[data-item="'.concat(e,'"]')).forEach(function(e){"bottles"===e.dataset.type&&t>0?e.value=t:"ounces"===e.dataset.type&&n>0&&(e.value=n)})}},{key:"showToast",value:function(e){var t=document.createElement("div");t.className="fixed bottom-4 right-4 bg-dark-green text-white py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-up",t.textContent=e,document.body.appendChild(t),setTimeout(function(){t.classList.add("animate-fade-out"),setTimeout(function(){document.body.contains(t)&&document.body.removeChild(t)},500)},3e3)}},{key:"cleanup",value:function(){this.state.recognition&&this.state.recognition.stop()}}],t&&re(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach(function(t){le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function le(e,t,n){return(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,de(r.key),r)}}function de(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}var fe=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={items86:JSON.parse(localStorage.getItem("items86")||"[]"),inventoryData:JSON.parse(localStorage.getItem("inventoryData")||"{}"),ocrData:{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null},recognition:null,isListening:!1},this.elements={},this.modules={},this.services={},this.initializeServices(),window.logout=function(){return t.logout()}},t=[{key:"init",value:function(){this.cacheElements(),this.initializeModules(),this.setupEventListeners(),this.setupNavigation(),this.setupEnhancedFeatures()}},{key:"cacheElements",value:function(){var e=this;["alert86List","current86Items","todaySpecial","inventoryGrid","voiceStatus","voiceText","ocrPreview","ocrResult"].forEach(function(t){e.elements[t]=document.getElementById(t)})}},{key:"initializeModules",value:function(){console.log("🚀 Initializing Table 1837 modules..."),this.modules.dashboard=new E(this),this.modules.staff=new O(this),this.modules.admin=new Z(this),this.modules.wine=new te(this),this.modules.inventory=new oe(this),Object.values(this.modules).forEach(function(e){e.initialize&&e.initialize()}),console.log("✅ All modules initialized successfully")}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("loginForm");t&&t.addEventListener("submit",function(t){t.preventDefault(),e.handleLogin()})}},{key:"setupNavigation",value:function(){var e=this;document.querySelectorAll(".nav-tab").forEach(function(t){t.addEventListener("click",function(n){t.dataset.tab&&(e.showTab(t.dataset.tab),document.querySelectorAll(".nav-tab").forEach(function(e){return e.classList.remove("active")}),t.classList.add("active"))})})}},{key:"initializeServices",value:function(){this.services.performance=new d,this.services.search=new m,this.services.theme=new b,console.log("🚀 Enhanced services initialized")}},{key:"setupEnhancedFeatures",value:function(){var e=this;document.addEventListener("keydown",function(t){if(t.ctrlKey||t.metaKey)switch(t.key){case"k":t.preventDefault(),e.focusSearch();break;case"t":t.preventDefault(),e.services.theme.toggleTheme();break;case"1":case"2":case"3":case"4":case"5":t.preventDefault();var n=["dashboard","staff","admin","wine","inventory"],r=parseInt(t.key)-1;r<n.length&&e.showTab(n[r])}});var t=document.getElementById("wineSearch");t&&t.addEventListener("input",function(t){var n=t.target.value;if(n.length>1){var r=e.services.search.search(n);e.updateWineResults(r)}})}},{key:"focusSearch",value:function(){var e=document.querySelectorAll('input[type="text"]');e.length>0&&e[0].focus()}},{key:"updateWineResults",value:function(e){document.getElementById("wineCategories")&&e.length>0&&console.log("Search results:",e)}},{key:"handleLogin",value:function(){var e=document.getElementById("username").value.toLowerCase(),t=document.getElementById("password").value;i.authenticate(e,t)?this.showMainApp():alert("Invalid credentials. Please try again.")}},{key:"showMainApp",value:function(){document.getElementById("loginPage").classList.add("hidden"),document.getElementById("mainApp").classList.remove("hidden"),this.init()}},{key:"showTab",value:function(e){document.querySelectorAll(".tab-content").forEach(function(e){e.classList.add("hidden")});var t=document.getElementById(e+"-content");t&&t.classList.remove("hidden")}},{key:"logout",value:function(){document.getElementById("mainApp").classList.add("hidden"),document.getElementById("loginPage").classList.remove("hidden"),document.getElementById("username").value="",document.getElementById("password").value="",Object.values(this.modules).forEach(function(e){e.cleanup&&e.cleanup()})}},{key:"updateState",value:function(e){this.state=ce(ce({},this.state),e),this.saveState()}},{key:"saveState",value:function(){localStorage.setItem("items86",JSON.stringify(this.state.items86)),localStorage.setItem("inventoryData",JSON.stringify(this.state.inventoryData))}},{key:"showToast",value:function(e){var t=document.createElement("div");t.className="fixed bottom-4 right-4 bg-dark-green text-white py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-up",t.textContent=e,document.body.appendChild(t),setTimeout(function(){t.classList.add("animate-fade-out"),setTimeout(function(){document.body.contains(t)&&document.body.removeChild(t)},500)},3e3)}}],t&&ue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListener("DOMContentLoaded",function(){window.app=new fe})})()})();
//# sourceMappingURL=bundle.js.map