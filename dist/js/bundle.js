/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={28:e=>{e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},39:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},119:e=>{e.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},125:e=>{"use strict";e.exports=JSON.parse('{"name":"tesseract.js","version":"4.1.4","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0","acorn":"^8.8.2","babel-loader":"^9.1.2","buffer":"^6.0.3","cors":"^2.8.5","eslint":"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1","express":"^4.18.2","mocha":"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^5.0.0","rollup":"^3.20.7","wait-on":"^7.0.1","webpack":"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},"dependencies":{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^4.0.4","wasm-feature-detect":"^1.2.11","zlibjs":"^0.3.1"},"overrides":{"@rollup/pluginutils":"^5.0.2"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')},321:(e,t,r)=>{const n=r(848),i=r(456),o=r(548),a=r(381),s=r(39),c=r(996);e.exports={defaultOptions:n,spawnWorker:i,terminateWorker:o,onMessage:a,send:s,loadImage:c}},381:e=>{e.exports=(e,t)=>{e.onmessage=({data:e})=>{t(e)}}},452:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new C(n||[]);return i(a,"_invoke",{value:L(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,function(){return this});var k=Object.getPrototypeOf,S=k&&k(k(j([])));S&&S!==r&&n.call(S,a)&&(w=S);var E=b.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function O(e,t){function r(i,o,a,s){var c=f(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(l).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,s)})}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t(function(t,i){r(e,n,t,i)})}return o=o?o.then(i,i):i()}})}function L(e,t,r){var n=d;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw o;return D()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=f(e,t,r);if("normal"===c.type){if(n=r.done?m:h,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=m,r.method="throw",r.arg=c.arg)}}}function T(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function j(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(O.prototype),u(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(E),u(E,c,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},456:e=>{e.exports=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(t))}else r=new Worker(e);return r}},465:(e,t,r)=>{const n=r(477);e.exports={recognize:async(e,t,r)=>{const i=await n(r);return await i.loadLanguage(t),await i.initialize(t),i.recognize(e).finally(async()=>{await i.terminate()})},detect:async(e,t)=>{const r=await n(t);return await r.loadLanguage("osd"),await r.initialize("osd"),r.detect(e).finally(async()=>{await r.terminate()})}}},477:(e,t,r)=>{const n=r(981),i=r(760),o=r(500),{log:a}=r(787),s=r(28),{defaultOEM:c}=r(711),{defaultOptions:u,spawnWorker:l,terminateWorker:f,onMessage:d,loadImage:h,send:p}=r(321);let m=0;e.exports=async(e={})=>{const t=s("Worker",m),{logger:r,errorHandler:y,...v}=n({...u,...e}),g={},b={};let w,k;const S=new Promise((e,t)=>{k=e,w=t});let E=l(v);E.onerror=e=>{w(e.message)},m+=1;const x=(e,t)=>{g[e]=t},O=(e,t)=>{b[e]=t},L=({id:e,action:r,payload:n})=>new Promise((i,o)=>{a(`[${t}]: Start ${e}, action=${r}`),x(r,i),O(r,o),p(E,{workerId:t,jobId:e,action:r,payload:n})});d(E,({workerId:e,jobId:t,status:n,action:o,data:s})=>{if("resolve"===n){a(`[${e}]: Complete ${t}`);let r=s;"recognize"===o?r=i(s):"getPDF"===o&&(r=Array.from({...s,length:Object.keys(s).length})),g[o]({jobId:t,data:r})}else if("reject"===n){if(b[o](s),"load"===o&&w(s),!y)throw Error(s);y(s)}else"progress"===n&&r({...s,userJobId:t})});const T={id:t,worker:E,setResolve:x,setReject:O,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,r)=>L(o({id:r,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>L(o({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>L(o({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,r)=>L(o({id:r,action:"FS",payload:{method:e,args:t}})),loadLanguage:(e="eng",t)=>L(o({id:t,action:"loadLanguage",payload:{langs:e,options:v}})),initialize:(e="eng",t=c,r,n)=>L(o({id:n,action:"initialize",payload:{langs:e,oem:t,config:r}})),setParameters:(e={},t)=>L(o({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},r={blocks:!0,text:!0,hocr:!0,tsv:!0},n)=>L(o({id:n,action:"recognize",payload:{image:await h(e),options:t,output:r}})),getPDF:(e="Tesseract OCR Result",t=!1,r)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),L(o({id:r,action:"getPDF",payload:{title:e,textonly:t}}))),detect:async(e,t)=>L(o({id:t,action:"detect",payload:{image:await h(e)}})),terminate:async()=>(null!==E&&(f(E),E=null),Promise.resolve())};return L(o({id:undefined,action:"load",payload:{options:v}})).then(()=>k(T)).catch(()=>{}),S}},500:(e,t,r)=>{const n=r(28);let i=0;e.exports=({id:e,action:t,payload:r={}})=>{let o=e;return void 0===o&&(o=n("Job",i),i+=1),{id:o,action:t,payload:r}}},548:e=>{e.exports=e=>{e.terminate()}},646:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},711:(e,t,r)=>{const n=r(742);e.exports={defaultOEM:n.DEFAULT}},742:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},760:e=>{e.exports=e=>{const t=[],r=[],n=[],i=[],o=[];return e.blocks&&e.blocks.forEach(a=>{a.paragraphs.forEach(t=>{t.lines.forEach(r=>{r.words.forEach(n=>{n.symbols.forEach(i=>{o.push({...i,page:e,block:a,paragraph:t,line:r,word:n})}),i.push({...n,page:e,block:a,paragraph:t,line:r})}),n.push({...r,page:e,block:a,paragraph:t})}),r.push({...t,page:e,block:a})}),t.push({...a,page:e})}),{...e,blocks:t,paragraphs:r,lines:n,words:i,symbols:o}}},787:function(e,t){let r=!1;t.logging=r,t.setLogging=e=>{r=e},t.log=(...e)=>r?console.log.apply(this,e):null},820:(e,t,r)=>{const n=r(866);e.exports=e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":n()?t.type="electron":"object"==typeof document?t.type="browser":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]}},848:(e,t,r)=>{const{version:n}=r(125),i=r(119);var o;e.exports={...i,workerPath:"undefined"!=typeof process&&"development"===process.env.TESS_ENV?(o=`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`,new URL(o,window.location.href).href):`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`,corePath:null}},866:e=>{e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},882:function(e,t,r){const n=r(500),{log:i}=r(787),o=r(28);let a=0;e.exports=()=>{const e=o("Scheduler",a),t={},r={};let s=[];a+=1;const c=()=>Object.keys(t).length,u=()=>{if(0!==s.length){const e=Object.keys(t);for(let n=0;n<e.length;n+=1)if(void 0===r[e[n]]){s[0](t[e[n]]);break}}},l=(t,o)=>new Promise((a,c)=>{const l=n({action:t,payload:o});s.push(async e=>{s.shift(),r[e.id]=l;try{a(await e[t].apply(this,[...o,l.id]))}catch(e){c(e)}finally{delete r[e.id],u()}}),i(`[${e}]: Add ${l.id} to JobQueue`),i(`[${e}]: JobQueue length=${s.length}`),u()});return{addWorker:r=>(t[r.id]=r,i(`[${e}]: Add ${r.id}`),i(`[${e}]: Number of workers=${c()}`),u(),r.id),addJob:async(t,...r)=>{if(0===c())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return l(t,r)},terminate:async()=>{Object.keys(t).forEach(async e=>{await t[e].terminate()}),s=[]},getQueueLen:()=>s.length,getNumWorkers:c}}},949:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},981:(e,t,r)=>{const n="browser"===r(820)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(t[r]=n(t[r]))}),t}},995:(e,t,r)=>{r(452);const n=r(882),i=r(477),o=r(465),a=r(646),s=r(742),c=r(949),{setLogging:u}=r(787);e.exports={languages:a,OEM:s,PSM:c,createScheduler:n,createWorker:i,setLogging:u,...o}},996:e=>{const t=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:e}}})=>{r(Error(`File could not be read! Code=${e}`))},n.readAsArrayBuffer(e)}),r=async e=>{let n=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))n=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(e);n=await t.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(n=await r(e.src)),"VIDEO"===e.tagName&&(n=await r(e.poster)),"CANVAS"===e.tagName&&await new Promise(r=>{e.toBlob(async e=>{n=await t(e),r()})});else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();n=await t(r)}else(e instanceof File||e instanceof Blob)&&(n=await t(e));return new Uint8Array(n)};e.exports=r}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var a=n&&n.prototype instanceof u?n:u,l=Object.create(a.prototype);return s(l,"_invoke",function(r,n,i){var o,a,s,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,a=0,s=e,d.n=r,c}};function h(r,n){for(a=r,s=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(a=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,a=0))}if(i||r>1)return c;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),a=l,s=p;(t=a<2?e:s)||!f;){o||(a?a<3?(a>1&&(d.n=-1),h(a,s)):d.n=s:d.v=s);try{if(u=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(f=d.n<0)?s:r.call(n,d))!==c)break}catch(t){o=e,a=1,s=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),l}var c={};function u(){}function l(){}function f(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(s(t={},n,function(){return this}),t),h=f.prototype=u.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return l.prototype=f,s(h,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,i,"GeneratorFunction"),s(h),s(h,i,"Generator"),s(h,n,function(){return this}),s(h,"toString",function(){return"[object Generator]"}),(a=function(){return{w:o,m:p}})()}function s(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}s=function(e,t,r,n){function o(t,r){s(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},s(e,t,r,n)}function c(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionTimeout=18e5,this.maxLoginAttempts=5,this.lockoutDuration=9e5,this.rateLimitWindow=6e4,this.maxRequestsPerWindow=10,this.loginAttempts=new Map,this.sessions=new Map,this.rateLimitMap=new Map,this.circuitBreaker={failures:0,lastFailureTime:0,state:"CLOSED",threshold:5,timeout:6e4},this.init()},r=[{key:"init",value:function(){var e=this;this.cleanupInterval=setInterval(function(){return e.cleanupSessions()},6e4),this.rateLimitCleanup=setInterval(function(){return e.cleanupRateLimits()},3e5),this.checkSession()}},{key:"destroy",value:function(){this.cleanupInterval&&clearInterval(this.cleanupInterval),this.rateLimitCleanup&&clearInterval(this.rateLimitCleanup),this.loginAttempts.clear(),this.sessions.clear(),this.rateLimitMap.clear()}},{key:"authenticate",value:(o=u(a().m(function e(t,r){var n,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"OPEN"!==this.circuitBreaker.state){e.n=2;break}if(!(Date.now()-this.circuitBreaker.lastFailureTime>this.circuitBreaker.timeout)){e.n=1;break}this.circuitBreaker.state="HALF_OPEN",e.n=2;break;case 1:throw new Error("Service temporarily unavailable. Please try again later.");case 2:if(!this.isRateLimited(t)){e.n=3;break}throw new Error("Too many requests. Please wait before trying again.");case 3:if(!this.isLockedOut(t)){e.n=4;break}throw new Error("Account temporarily locked. Please try again later.");case 4:if(this.validateInput(t,r)){e.n=5;break}throw this.recordFailedAttempt(t),this.recordFailure(),new Error("Invalid input format.");case 5:return e.n=6,this.verifyCredentials(t,r);case 6:if(!e.v){e.n=7;break}return n=this.createSecureSession(t),this.loginAttempts.delete(t),this.recordSuccess(),e.a(2,{success:!0,session:n,user:this.getUserInfo(t)});case 7:throw this.recordFailedAttempt(t),this.recordFailure(),new Error("Invalid credentials.");case 8:e.n=10;break;case 9:throw e.p=9,i=e.v,this.recordFailure(),i;case 10:return e.a(2)}},e,this,[[0,9]])})),function(e,t){return o.apply(this,arguments)})},{key:"validateInput",value:function(e,t){if(!e||!t||e.length>100||t.length>100)return!1;var r=this.sanitizeInput(e),n=this.sanitizeInput(t);return!this.containsSuspiciousPatterns(r)&&!this.containsSuspiciousPatterns(n)}},{key:"sanitizeInput",value:function(e){return"string"!=typeof e?"":e.substring(0,100).replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/eval\s*\(/gi,"").replace(/document\./gi,"").replace(/window\./gi,"").trim()}},{key:"containsSuspiciousPatterns",value:function(e){return[/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,/javascript:/gi,/on\w+\s*=/gi,/eval\s*\(/gi,/document\./gi,/window\./gi,/alert\s*\(/gi,/confirm\s*\(/gi,/prompt\s*\(/gi].some(function(t){return t.test(e)})}},{key:"verifyCredentials",value:(i=u(a().m(function e(t,r){var n;return a().w(function(e){for(;;)switch(e.n){case 0:if(!this.isRateLimited("verify")){e.n=1;break}return e.a(2,!1);case 1:return e.n=2,new Promise(function(e){return setTimeout(e,100)});case 2:return n={"user@table1837.com":"password123","admin@table1837.com":"admin123"},e.a(2,n[t]===r)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"createSecureSession",value:function(e){var t=this.generateSecureId(),r={id:t,username:e,created:Date.now(),lastActivity:Date.now(),ip:this.getClientIP(),userAgent:navigator.userAgent};return this.sessions.set(t,r),r}},{key:"generateSecureId",value:function(){var e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,function(e){return e.toString(16).padStart(2,"0")}).join("")}},{key:"getClientIP",value:function(){return"127.0.0.1"}},{key:"isRateLimited",value:function(e){var t=Date.now(),r=t-this.rateLimitWindow;this.rateLimitMap.has(e)||this.rateLimitMap.set(e,[]);var n=this.rateLimitMap.get(e).filter(function(e){return e>r});return this.rateLimitMap.set(e,n),n.length>=this.maxRequestsPerWindow||(n.push(t),!1)}},{key:"isLockedOut",value:function(e){var t=this,r=this.loginAttempts.get(e);if(!r)return!1;var n=Date.now();return r.filter(function(e){return n-e<t.lockoutDuration}).length>=this.maxLoginAttempts}},{key:"recordFailedAttempt",value:function(e){this.loginAttempts.has(e)||this.loginAttempts.set(e,[]),this.loginAttempts.get(e).push(Date.now())}},{key:"recordSuccess",value:function(){this.circuitBreaker.failures=0,this.circuitBreaker.state="CLOSED"}},{key:"recordFailure",value:function(){this.circuitBreaker.failures++,this.circuitBreaker.lastFailureTime=Date.now(),this.circuitBreaker.failures>=this.circuitBreaker.threshold&&(this.circuitBreaker.state="OPEN")}},{key:"checkSession",value:function(){var e=localStorage.getItem("sessionId");if(e&&this.sessions.has(e)){var t=this.sessions.get(e);if(Date.now()-t.lastActivity<this.sessionTimeout)return t.lastActivity=Date.now(),!0;this.logout()}return!1}},{key:"logout",value:function(){var e=localStorage.getItem("sessionId");e&&(this.sessions.delete(e),localStorage.removeItem("sessionId"))}},{key:"cleanupSessions",value:function(){var e,r=Date.now(),i=n(this.sessions.entries());try{for(i.s();!(e=i.n()).done;){var o=t(e.value,2),a=o[0];r-o[1].lastActivity>this.sessionTimeout&&this.sessions.delete(a)}}catch(e){i.e(e)}finally{i.f()}}},{key:"cleanupRateLimits",value:function(){var e,r=Date.now()-this.rateLimitWindow,i=n(this.rateLimitMap.entries());try{for(i.s();!(e=i.n()).done;){var o=t(e.value,2),a=o[0],s=o[1].filter(function(e){return e>r});0===s.length?this.rateLimitMap.delete(a):this.rateLimitMap.set(a,s)}}catch(e){i.e(e)}finally{i.f()}}},{key:"getUserInfo",value:function(e){return{username:e,role:e.includes("admin")?"admin":"user",permissions:e.includes("admin")?["read","write","admin"]:["read","write"]}}}],r&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,i,o}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var v=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storagePrefix="table1837_",this.maxStorageSize=4194304,this.maxItemSize=1048576,this.cleanupThreshold=.8,this.maxBackups=5,this.backupInterval=6e5,this.storageManager={intervals:new Set,eventListeners:new Set,observers:new Set},this.circuitBreaker={failures:0,lastFailureTime:0,state:"CLOSED",threshold:3,timeout:3e4},this.init()},t=[{key:"init",value:function(){var e=this,t=setInterval(function(){return e.createBackup()},this.backupInterval);this.storageManager.intervals.add(t),this.checkDataIntegrity()}},{key:"destroy",value:function(){this.storageManager.intervals.forEach(function(e){return clearInterval(e)}),this.storageManager.intervals.clear(),this.storageManager.eventListeners.forEach(function(e){var t=e.element,r=e.event,n=e.handler;t.removeEventListener(r,n)}),this.storageManager.eventListeners.clear(),this.storageManager.observers.forEach(function(e){return e.disconnect()}),this.storageManager.observers.clear()}},{key:"saveData",value:function(e,t){try{if("OPEN"===this.circuitBreaker.state){if(!(Date.now()-this.circuitBreaker.lastFailureTime>this.circuitBreaker.timeout))throw new Error("Storage service temporarily unavailable.");this.circuitBreaker.state="HALF_OPEN"}this.getStorageSize()>this.maxStorageSize*this.cleanupThreshold&&this.emergencyCleanup();var r=this.storagePrefix+e,n={data:t,timestamp:Date.now(),version:"1.0",checksum:this.calculateChecksum(t)},i=JSON.stringify(n);if(i.length>this.maxItemSize)throw new Error("Data too large to store");return this.getStorageSize()+i.length>this.maxStorageSize&&this.emergencyCleanup(),localStorage.setItem(r,i),this.recordSuccess(),!0}catch(e){return this.recordFailure(),console.error("Failed to save data:",e),!1}}},{key:"loadData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var r=this.storagePrefix+e,n=localStorage.getItem(r);if(!n)return t;var i=JSON.parse(n);return this.verifyDataIntegrity(i)?(this.recordSuccess(),i.data):(console.warn("Data integrity check failed, attempting recovery..."),this.recoverData(e,t))}catch(r){return this.recordFailure(),console.error("Failed to load data:",r),this.recoverData(e,t)}}},{key:"getStorageSize",value:function(){for(var e=0,t=0;t<localStorage.length;t++){var r=localStorage.key(t);if(r&&r.startsWith(this.storagePrefix)){var n=localStorage.getItem(r);e+=r.length+n.length}}return e}},{key:"emergencyCleanup",value:function(){try{for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);if(r&&r.startsWith(this.storagePrefix))try{var n=JSON.parse(localStorage.getItem(r));e.push({key:r,timestamp:n.timestamp||0})}catch(e){localStorage.removeItem(r)}}e.sort(function(e,t){return e.timestamp-t.timestamp});var i=e.slice(0,Math.floor(e.length/2));i.forEach(function(e){var t=e.key;return localStorage.removeItem(t)}),console.log("Emergency cleanup completed. Removed",i.length,"items")}catch(e){console.error("Emergency cleanup failed:",e),this.clearAllData()}}},{key:"calculateChecksum",value:function(e){for(var t=JSON.stringify(e),r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n),r&=r;return r.toString()}},{key:"verifyDataIntegrity",value:function(e){return!!(e&&e.data&&e.checksum)&&this.calculateChecksum(e.data)===e.checksum}},{key:"createBackup",value:function(){try{if(this.getStorageSize()>.9*this.maxStorageSize)return void console.warn("Storage nearly full, skipping backup");for(var e={timestamp:Date.now(),data:{}},t=0,r=0;r<localStorage.length&&t<100;r++){var n=localStorage.key(r);if(n&&n.startsWith(this.storagePrefix))try{e.data[n]=localStorage.getItem(n),t++}catch(e){continue}}var i="backup_".concat(Date.now()),o=JSON.stringify(e);if(o.length>this.maxItemSize)return void console.warn("Backup too large, skipping");localStorage.setItem(i,o),this.cleanOldBackups(),console.log("Backup created successfully")}catch(e){console.error("Failed to create backup:",e)}}},{key:"cleanOldBackups",value:function(){for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);if(r&&r.startsWith("backup_"))try{var n=JSON.parse(localStorage.getItem(r));e.push({key:r,timestamp:n.timestamp})}catch(e){localStorage.removeItem(r)}}e.sort(function(e,t){return t.timestamp-e.timestamp});for(var i=this.maxBackups;i<e.length;i++)localStorage.removeItem(e[i].key)}},{key:"recoverData",value:function(e,t){try{var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.getBackups());try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.data[this.storagePrefix+e]){var o=JSON.parse(i.data[this.storagePrefix+e]);if(this.verifyDataIntegrity(o))return console.log("Data recovered from backup"),o.data}}}catch(e){n.e(e)}finally{n.f()}return console.warn("No valid backup found, using default value"),t}catch(e){return console.error("Recovery failed:",e),t}}},{key:"getBackups",value:function(){for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);if(r&&r.startsWith("backup_"))try{var n=JSON.parse(localStorage.getItem(r));e.push(n)}catch(e){}}return e.sort(function(e,t){return t.timestamp-e.timestamp})}},{key:"checkDataIntegrity",value:function(){for(var e=0,t=["items86","inventoryData","ocrData"];e<t.length;e++){var r=t[e];try{null===this.loadData(r)&&(console.warn("Missing data for ".concat(r,", attempting recovery...")),this.recoverData(r,this.getDefaultValue(r)))}catch(e){console.error("Data integrity check failed for ".concat(r,":"),e)}}}},{key:"getDefaultValue",value:function(e){return{items86:[],inventoryData:{},ocrData:{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null}}[e]||null}},{key:"clearAllData",value:function(){for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);r&&r.startsWith(this.storagePrefix)&&e.push(r)}for(var n=0,i=e;n<i.length;n++){var o=i[n];localStorage.removeItem(o)}console.log("All data cleared")}},{key:"recordSuccess",value:function(){this.circuitBreaker.failures=0,this.circuitBreaker.state="CLOSED"}},{key:"recordFailure",value:function(){this.circuitBreaker.failures++,this.circuitBreaker.lastFailureTime=Date.now(),this.circuitBreaker.failures>=this.circuitBreaker.threshold&&(this.circuitBreaker.state="OPEN")}}],t&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=k(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function k(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(g(e)+" is not iterable")}function x(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return O(u,"_invoke",function(r,n,i){var o,s,c,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,s=0,c=e,d.n=r,a}};function h(r,n){for(s=r,c=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(s=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,s=0))}if(i||r>1)return a;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!f;){o||(s?s<3?(s>1&&(d.n=-1),h(s,c)):d.n=c:d.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(O(t={},n,function(){return this}),t),f=u.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,O(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=u,O(f,"constructor",u),O(u,"constructor",c),c.displayName="GeneratorFunction",O(u,i,"GeneratorFunction"),O(f),O(f,i,"Generator"),O(f,n,function(){return this}),O(f,"toString",function(){return"[object Generator]"}),(x=function(){return{w:o,m:d}})()}function O(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}O=function(e,t,r,n){function o(t,r){O(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},O(e,t,r,n)}function L(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function T(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)})}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var C=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorLog=[],this.maxErrorLogSize=100,this.circuitBreakers=new Map,this.recoveryStrategies=new Map,this.errorCounts=new Map,this.maxErrorsPerMinute=10,this.init()},t=[{key:"init",value:function(){this.setupErrorMonitoring(),this.setupRecoveryStrategies(),this.setupCircuitBreakers()}},{key:"setupErrorMonitoring",value:function(){var e=this;window.addEventListener("error",function(t){e.handleError(t.error,"unhandled")}),window.addEventListener("unhandledrejection",function(t){e.handleError(t.reason,"promise")});var t=console.error;console.error=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.handleError(new Error(n.join(" ")),"console"),t.apply(console,n)}}},{key:"setupRecoveryStrategies",value:function(){this.recoveryStrategies.set("network",this.retryWithBackoff.bind(this)),this.recoveryStrategies.set("storage",this.recoverStorage.bind(this)),this.recoveryStrategies.set("auth",this.recoverAuth.bind(this)),this.recoveryStrategies.set("validation",this.recoverValidation.bind(this))}},{key:"setupCircuitBreakers",value:function(){var e=this;["auth","storage","network","validation"].forEach(function(t){e.circuitBreakers.set(t,{failures:0,lastFailureTime:0,state:"CLOSED",threshold:5,timeout:6e4})})}},{key:"handleError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";try{if(this.isErrorRateLimited(t))return void console.warn("Error rate limit exceeded for",t);if(this.isCircuitBreakerOpen(t))return void console.warn("Circuit breaker open for",t);this.logError(e,t),this.attemptRecovery(e,t),this.updateCircuitBreaker(t,!1)}catch(e){console.error("Error handling failed:",e),this.updateCircuitBreaker(t,!0)}}},{key:"logError",value:function(e,t){var r={message:e.message||"Unknown error",stack:e.stack,source:t,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href};this.errorLog.push(r),this.errorLog.length>this.maxErrorLogSize&&this.errorLog.shift();var n="".concat(t,"_").concat(Math.floor(Date.now()/6e4));this.errorCounts.set(n,(this.errorCounts.get(n)||0)+1)}},{key:"isErrorRateLimited",value:function(e){var t="".concat(e,"_").concat(Math.floor(Date.now()/6e4));return(this.errorCounts.get(t)||0)>this.maxErrorsPerMinute}},{key:"isCircuitBreakerOpen",value:function(e){var t=this.circuitBreakers.get(e);return!(!t||"OPEN"!==t.state||Date.now()-t.lastFailureTime>t.timeout&&(t.state="HALF_OPEN",1))}},{key:"updateCircuitBreaker",value:function(e,t){var r=this.circuitBreakers.get(e);r&&(t?(r.failures++,r.lastFailureTime=Date.now(),r.failures>=r.threshold&&(r.state="OPEN")):(r.failures=0,r.state="CLOSED"))}},{key:"attemptRecovery",value:(a=T(x().m(function e(t,r){var n,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(n=this.recoveryStrategies.get(r))){e.n=4;break}return e.p=1,e.n=2,n(t);case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error("Recovery failed for",r,i);case 4:return e.a(2)}},e,this,[[1,3]])})),function(e,t){return a.apply(this,arguments)})},{key:"retryWithBackoff",value:(o=T(x().m(function e(t){var r,n,i,o,a=arguments;return x().w(function(e){for(;;)switch(e.n){case 0:r=a.length>1&&void 0!==a[1]?a[1]:3,n=x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,new Promise(function(e){return setTimeout(e,1e3*Math.pow(2,t))});case 1:return e.a(2,{v:!0});case 2:e.p=2,r=e.v,console.warn("Retry ".concat(t+1," failed:"),r);case 3:return e.a(2)}},e,null,[[0,2]])}),o=0;case 1:if(!(o<r)){e.n=4;break}return e.d(E(n(o)),2);case 2:if(!(i=e.v)){e.n=3;break}return e.a(2,i.v);case 3:o++,e.n=1;break;case 4:throw new Error("All retries failed");case 5:return e.a(2)}},e)})),function(e){return o.apply(this,arguments)})},{key:"recoverStorage",value:(i=T(x().m(function e(t){var r,n,i,o;return x().w(function(e){for(;;)switch(e.n){case 0:try{for(r=Object.keys(localStorage),n=0,i=r;n<i.length;n++){o=i[n];try{JSON.parse(localStorage.getItem(o))}catch(e){localStorage.removeItem(o),console.warn("Removed corrupted storage item:",o)}}}catch(e){console.error("Storage recovery failed:",e)}case 1:return e.a(2)}},e)})),function(e){return i.apply(this,arguments)})},{key:"recoverAuth",value:(n=T(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:try{localStorage.getItem("sessionId")&&(localStorage.removeItem("sessionId"),console.warn("Cleared invalid session"))}catch(e){console.error("Auth recovery failed:",e)}case 1:return e.a(2)}},e)})),function(e){return n.apply(this,arguments)})},{key:"recoverValidation",value:(r=T(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:try{document.querySelectorAll("form").forEach(function(e){e.reset(),e.querySelectorAll(".field-error").forEach(function(e){return e.remove()})})}catch(e){console.error("Validation recovery failed:",e)}case 1:return e.a(2)}},e)})),function(e){return r.apply(this,arguments)})},{key:"getErrorLog",value:function(){return function(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.errorLog)}},{key:"getErrorStats",value:function(){var e,t={},r=w(this.errorCounts.entries());try{for(r.s();!(e=r.n()).done;){var n=b(e.value,2),i=n[0],o=n[1],a=b(i.split("_"),1)[0];t[a]=(t[a]||0)+o}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getCircuitBreakerStatus",value:function(){var e,t={},r=w(this.circuitBreakers.entries());try{for(r.s();!(e=r.n()).done;){var n=b(e.value,2),i=n[0],o=n[1];t[i]={state:o.state,failures:o.failures,lastFailure:o.lastFailureTime}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"clearErrorLog",value:function(){this.errorLog=[],this.errorCounts.clear()}},{key:"resetCircuitBreakers",value:function(){var e,t=w(this.circuitBreakers.values());try{for(t.s();!(e=t.n()).done;){var r=e.value;r.failures=0,r.state="CLOSED",r.lastFailureTime=0}}catch(e){t.e(e)}finally{t.f()}}},{key:"isHealthy",value:function(){var e=this.getErrorStats(),t=Object.values(e).reduce(function(e,t){return e+t},0),r=this.getCircuitBreakerStatus(),n=Object.values(r).filter(function(e){return"OPEN"===e.state}).length;return{healthy:t<50&&0===n,totalErrors:t,openCircuitBreakers:n,errorStats:e,circuitBreakerStatus:r}}}],t&&P(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,i,o,a}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return M(u,"_invoke",function(r,n,i){var o,s,c,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,s=0,c=e,d.n=r,a}};function h(r,n){for(s=r,c=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(s=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,s=0))}if(i||r>1)return a;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!f;){o||(s?s<3?(s>1&&(d.n=-1),h(s,c)):d.n=c:d.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(M(t={},n,function(){return this}),t),f=u.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,M(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=u,M(f,"constructor",u),M(u,"constructor",c),c.displayName="GeneratorFunction",M(u,i,"GeneratorFunction"),M(f),M(f,i,"Generator"),M(f,n,function(){return this}),M(f,"toString",function(){return"[object Generator]"}),(B=function(){return{w:o,m:d}})()}function M(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}M=function(e,t,r,n){function o(t,r){M(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},M(e,t,r,n)}function W(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function F(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){W(o,n,i,a,s,"next",e)}function s(e){W(o,n,i,a,s,"throw",e)}a(void 0)})}}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function z(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var _=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxInputLength=1e3,this.regexTimeout=1e3,this.maxValidationTime=5e3,this.validationCache=new Map,this.cacheTimeout=3e5,this.validationRules=new Map,this.customValidators=new Map,this.circuitBreaker={failures:0,lastFailureTime:0,state:"CLOSED",threshold:5,timeout:3e4},this.init()},t=[{key:"init",value:function(){var e=this;this.setupDefaultRules(),this.setupCustomValidators(),setInterval(function(){return e.cleanupCache()},3e5)}},{key:"setupDefaultRules",value:function(){this.validationRules.set("email",{pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address",maxLength:100}),this.validationRules.set("password",{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{8,}$/,message:"Password must be at least 8 characters with letters and numbers",maxLength:100}),this.validationRules.set("phone",{pattern:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number",maxLength:20}),this.validationRules.set("price",{pattern:/^\$?\d+(\.\d{2})?$/,message:"Please enter a valid price (e.g., $10.50 or 10.50)",maxLength:20}),this.validationRules.set("wineName",{pattern:/^[A-Za-z0-9\s\-\.\,\&\'\(\)]+$/,message:"Wine name contains invalid characters",maxLength:100}),this.validationRules.set("year",{pattern:/^(19|20)\d{2}$/,message:"Please enter a valid year between 1900 and 2099",maxLength:4}),this.validationRules.set("text",{pattern:/^[A-Za-z0-9\s\-\.\,\&\'\(\)\?\!]+$/,message:"Text contains invalid characters",maxLength:500})}},{key:"setupCustomValidators",value:function(){var e=this;this.customValidators.set("wineData",function(t){var r=[];return(!t.name||t.name.trim().length<2)&&r.push("Wine name is required and must be at least 2 characters"),t.name&&t.name.length>100&&r.push("Wine name is too long (max 100 characters)"),t.price&&!e.validate("price",t.price).isValid&&r.push("Invalid price format"),t.year&&!e.validate("year",t.year.toString()).isValid&&r.push("Invalid year format"),{isValid:0===r.length,errors:r}}),this.customValidators.set("inventoryItem",function(e){var t=[];return(!e.name||e.name.trim().length<2)&&t.push("Item name is required and must be at least 2 characters"),e.name&&e.name.length>100&&t.push("Item name is too long (max 100 characters)"),e.category&&!["vodka","gin","rum","tequila","whiskey","cordials"].includes(e.category)&&t.push("Invalid category"),{isValid:0===t.length,errors:t}})}},{key:"validate",value:(n=F(B().m(function e(t,r){var n,i,o,a,s;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"OPEN"!==this.circuitBreaker.state){e.n=2;break}if(!(Date.now()-this.circuitBreaker.lastFailureTime>this.circuitBreaker.timeout)){e.n=1;break}this.circuitBreaker.state="HALF_OPEN",e.n=2;break;case 1:return e.a(2,{isValid:!1,error:"Validation service temporarily unavailable"});case 2:if(r){e.n=3;break}return e.a(2,{isValid:!1,error:"Value is required"});case 3:if(!("string"==typeof r&&r.length>this.maxInputLength)){e.n=4;break}return e.a(2,{isValid:!1,error:"Input too long (max ".concat(this.maxInputLength," characters)")});case 4:if(n="".concat(t,"_").concat(r),!((i=this.validationCache.get(n))&&Date.now()-i.timestamp<this.cacheTimeout)){e.n=5;break}return e.a(2,i.result);case 5:if(o=this.validationRules.get(t)){e.n=6;break}return e.a(2,{isValid:!0,error:null});case 6:if(!(o.maxLength&&"string"==typeof r&&r.length>o.maxLength)){e.n=7;break}return e.a(2,{isValid:!1,error:"Input too long (max ".concat(o.maxLength," characters)")});case 7:return e.n=8,this.validateWithTimeout(o.pattern,r);case 8:return a=e.v,s={isValid:a,error:a?null:o.message},this.validationCache.set(n,{result:s,timestamp:Date.now()}),this.recordSuccess(),e.a(2,s);case 9:return e.p=9,e.v,this.recordFailure(),e.a(2,{isValid:!1,error:"Validation failed due to system error"})}},e,this,[[0,9]])})),function(e,t){return n.apply(this,arguments)})},{key:"validateWithTimeout",value:(r=F(B().m(function e(t,r){var n,i=arguments;return B().w(function(e){for(;;)if(0===e.n)return n=i.length>2&&void 0!==i[2]?i[2]:this.regexTimeout,e.a(2,new Promise(function(e,i){var o=setTimeout(function(){i(new Error("Validation timeout"))},n);try{var a=t.test(r);clearTimeout(o),e(a)}catch(e){clearTimeout(o),i(e)}}))},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"validateCustom",value:function(e,t){try{var r=this.customValidators.get(e);return r?r(t):{isValid:!0,errors:[]}}catch(e){return this.recordFailure(),{isValid:!1,errors:["Validation failed due to system error"]}}}},{key:"sanitizeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if("string"!=typeof e)return"";e.length>this.maxInputLength&&(e=e.substring(0,this.maxInputLength));var r=e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/eval\s*\(/gi,"").replace(/document\./gi,"").replace(/window\./gi,"").trim();switch(t){case"email":r=r.toLowerCase();break;case"price":r=r.replace(/[^\d\.\$]/g,"");break;case"year":r=r.replace(/[^\d]/g,"");break;case"phone":r=r.replace(/[^\d\+\-\(\)\s]/g,"")}return r}},{key:"validateForm",value:function(e){for(var t={},r={},n=0,i=Object.entries(e);n<i.length;n++){var o=D(i[n],2),a=o[0],s=o[1],c=this.sanitizeInput(s,this.getFieldType(a));r[a]=c;var u=this.validate(this.getFieldType(a),c);u.isValid||(t[a]=u.error)}return{isValid:0===Object.keys(t).length,errors:t,sanitizedData:r}}},{key:"getFieldType",value:function(e){return{email:"email",username:"email",password:"password",phone:"phone",price:"price",year:"year",wineName:"wineName",name:"text",description:"text"}[e]||"text"}},{key:"validateWineData",value:function(e){return this.validateCustom("wineData",e)}},{key:"validateInventoryItem",value:function(e){return this.validateCustom("inventoryItem",e)}},{key:"setupRealTimeValidation",value:function(e){var t=this;e.querySelectorAll("input, textarea, select").forEach(function(e){e.addEventListener("blur",function(){t.validateField(e)}),e.addEventListener("input",function(){t.clearFieldError(e)})})}},{key:"validateField",value:function(e){var t=this.getFieldType(e.name),r=e.value;if(r.length>this.maxInputLength)return this.showFieldError(e,"Input too long (max ".concat(this.maxInputLength," characters)")),!1;var n=this.validate(t,r);return n.isValid?this.clearFieldError(e):this.showFieldError(e,n.error),n.isValid}},{key:"showFieldError",value:function(e,t){this.clearFieldError(e);var r=document.createElement("div");r.className="field-error text-red-500 text-sm mt-1",r.textContent=t,e.parentNode.appendChild(r),e.classList.add("border-red-500")}},{key:"clearFieldError",value:function(e){var t=e.parentNode.querySelector(".field-error");t&&t.remove(),e.classList.remove("border-red-500")}},{key:"cleanupCache",value:function(){var e,t=Date.now(),r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=A(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(this.validationCache.entries());try{for(r.s();!(e=r.n()).done;){var n=D(e.value,2),i=n[0];t-n[1].timestamp>this.cacheTimeout&&this.validationCache.delete(i)}}catch(e){r.e(e)}finally{r.f()}}},{key:"recordSuccess",value:function(){this.circuitBreaker.failures=0,this.circuitBreaker.state="CLOSED"}},{key:"recordFailure",value:function(){this.circuitBreaker.failures++,this.circuitBreaker.lastFailureTime=Date.now(),this.circuitBreaker.failures>=this.circuitBreaker.threshold&&(this.circuitBreaker.state="OPEN")}}],t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n}();function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach(function(t){U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t,r){return(t=Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return q(u,"_invoke",function(r,n,i){var o,s,c,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,s=0,c=e,d.n=r,a}};function h(r,n){for(s=r,c=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(s=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,s=0))}if(i||r>1)return a;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!f;){o||(s?s<3?(s>1&&(d.n=-1),h(s,c)):d.n=c:d.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(q(t={},n,function(){return this}),t),f=u.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,q(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=u,q(f,"constructor",u),q(u,"constructor",c),c.displayName="GeneratorFunction",q(u,i,"GeneratorFunction"),q(f),q(f,i,"Generator"),q(f,n,function(){return this}),q(f,"toString",function(){return"[object Generator]"}),($=function(){return{w:o,m:d}})()}function q(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}q=function(e,t,r,n){function o(t,r){q(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},q(e,t,r,n)}function J(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function Y(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var Z=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics={loadTime:0,renderTime:0,memoryUsage:0,errors:[]},this.startTime=performance.now(),this.init()},t=[{key:"init",value:function(){var e=this;window.addEventListener("load",function(){e.metrics.loadTime=performance.now()-e.startTime,console.log(" Page loaded in ".concat(e.metrics.loadTime.toFixed(2),"ms")),window.gtag&&window.gtag("event","page_load_time",{value:Math.round(e.metrics.loadTime)})}),"memory"in performance&&setInterval(function(){e.metrics.memoryUsage=performance.memory.usedJSHeapSize/1024/1024,e.metrics.memoryUsage>100&&console.warn(" High memory usage:",e.metrics.memoryUsage.toFixed(2),"MB")},5e3),window.addEventListener("error",function(t){e.metrics.errors.push({message:t.message,filename:t.filename,lineno:t.lineno,timestamp:Date.now()}),console.error(" Error tracked:",t.message)}),this.trackModuleLoads()}},{key:"trackModuleLoads",value:function(){var e,t=this,r=null===(e=this.app)||void 0===e?void 0:e.loadModule;r&&(this.app.loadModule=function(){var e,n=(e=$().m(function e(n){var i,o,a;return $().w(function(e){for(;;)switch(e.n){case 0:return i=performance.now(),e.n=1,r.call(t.app,n);case 1:return o=e.v,a=performance.now()-i,console.log(" Module ".concat(n," loaded in ").concat(a.toFixed(2),"ms")),e.a(2,o)}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){J(o,n,i,a,s,"next",e)}function s(e){J(o,n,i,a,s,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}())}},{key:"getMetrics",value:function(){return H(H({},this.metrics),{},{timestamp:Date.now()})}},{key:"logPerformance",value:function(){console.log(" Performance Metrics:",this.getMetrics())}}],t&&K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){te(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function te(e,t,r){return(t=ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function ie(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}var oe=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics={loadTime:0,renderTime:0,memoryUsage:0,errors:[],moduleLoadTimes:{},ocrProcessingTimes:[],userInteractions:[]},this.startTime=performance.now(),this.init()},t=[{key:"init",value:function(){var e=this;window.addEventListener("load",function(){e.metrics.loadTime=performance.now()-e.startTime,console.log(" Page loaded in ".concat(e.metrics.loadTime.toFixed(2),"ms")),e.reportMetric("page_load_time",e.metrics.loadTime)}),"memory"in performance&&setInterval(function(){e.metrics.memoryUsage=performance.memory.usedJSHeapSize/1024/1024,e.metrics.memoryUsage>100&&(console.warn(" High memory usage:",e.metrics.memoryUsage.toFixed(2),"MB"),e.reportMetric("high_memory_usage",e.metrics.memoryUsage))},1e4),"PerformanceObserver"in window&&new PerformanceObserver(function(t){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t.getEntries());try{for(n.s();!(r=n.n()).done;){var i=r.value;i.duration>50&&(console.warn(" Long task detected:",i.duration.toFixed(2),"ms"),e.reportMetric("long_task",i.duration))}}catch(e){n.e(e)}finally{n.f()}}).observe({entryTypes:["longtask"]}),window.addEventListener("error",function(t){e.metrics.errors.push({message:t.message,filename:t.filename,lineno:t.lineno,timestamp:Date.now()}),console.error(" Error tracked:",t.message),e.reportMetric("error",{message:t.message,filename:t.filename})}),this.trackUserInteractions()}},{key:"trackUserInteractions",value:function(){var e=this;["click","input","scroll","keydown"].forEach(function(t){document.addEventListener(t,function(r){e.metrics.userInteractions.push({type:t,target:r.target.tagName,timestamp:Date.now()})},{passive:!0})})}},{key:"trackModuleLoad",value:function(e,t){this.metrics.moduleLoadTimes[e]=t,console.log(" Module ".concat(e," loaded in ").concat(t.toFixed(2),"ms")),this.reportMetric("module_load_time",{module:e,time:t})}},{key:"trackOCRProcessing",value:function(e,t){this.metrics.ocrProcessingTimes.push({time:e,confidence:t,timestamp:Date.now()}),this.reportMetric("ocr_processing_time",{time:e,confidence:t})}},{key:"reportMetric",value:function(e,t){window.gtag&&window.gtag("event",e,{value:t});var r=JSON.parse(localStorage.getItem("performance_metrics")||"{}");r[e]=t,localStorage.setItem("performance_metrics",JSON.stringify(r))}},{key:"getMetrics",value:function(){return ee(ee({},this.metrics),{},{timestamp:Date.now(),averageOCRTime:this.calculateAverageOCRTime(),averageModuleLoadTime:this.calculateAverageModuleLoadTime()})}},{key:"calculateAverageOCRTime",value:function(){return 0===this.metrics.ocrProcessingTimes.length?0:this.metrics.ocrProcessingTimes.reduce(function(e,t){return e+t.time},0)/this.metrics.ocrProcessingTimes.length}},{key:"calculateAverageModuleLoadTime",value:function(){var e=Object.values(this.metrics.moduleLoadTimes);return 0===e.length?0:e.reduce(function(e,t){return e+t},0)/e.length}},{key:"generateReport",value:function(){var e=this.getMetrics();return{summary:{totalErrors:e.errors.length,averageOCRTime:e.averageOCRTime.toFixed(2)+"ms",averageModuleLoadTime:e.averageModuleLoadTime.toFixed(2)+"ms",memoryUsage:e.memoryUsage.toFixed(2)+"MB",userInteractions:e.userInteractions.length},details:e}}},{key:"logPerformance",value:function(){console.log(" Performance Report:",this.generateReport())}}],t&&ne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ce(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}var ue=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchIndex=new Map,this.buildIndex(),this.debounceTimer=null,this.lastQuery=""},t=[{key:"buildIndex",value:function(){var e=this;this.getAllWines().forEach(function(t,r){e.generateSearchTerms(t).forEach(function(t){e.searchIndex.has(t)||e.searchIndex.set(t,[]),e.searchIndex.get(t).push(r)})})}},{key:"generateSearchTerms",value:function(e){var t=[],r="".concat(e.name," ").concat(e.region," ").concat(e.year," ").concat(e.category).toLowerCase();t.push(r),r.split(" ").forEach(function(e){e.length>2&&t.push(e)});for(var n=0;n<r.length-2;n++)t.push(r.substring(n,n+3));return t}},{key:"debounceSearch",value:function(e,t){var r=this;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];clearTimeout(r.debounceTimer),r.debounceTimer=setTimeout(function(){return e.apply(r,i)},t)}}},{key:"search",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e.length<2)return[];if(e===this.lastQuery)return this.lastResults||[];this.lastQuery=e;var n=new Set;this.generateSearchTerms({name:e}).forEach(function(e){(t.searchIndex.get(e)||[]).forEach(function(e){return n.add(e)})});var i=Array.from(n).map(function(e){return t.getAllWines()[e]});return r.category&&(i=i.filter(function(e){return e.category.toLowerCase()===r.category.toLowerCase()})),r.priceRange&&(i=i.filter(function(e){return e.price>=r.priceRange.min&&e.price<=r.priceRange.max})),this.lastResults=i.slice(0,20),this.lastResults}},{key:"getAllWines",value:function(){return[{name:"CRISTOM, EILEEN VYD., PINOT NOIR",region:"Eola-Amity Hills",year:"2019",category:"red",price:185},{name:"NEYERS, CARNEROS CHARDONNAY",region:"Sonoma County",year:"2019",category:"white",price:100}]}}],t&&se(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,de(n.key),n)}}function de(e){var t=function(e){if("object"!=le(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==le(t)?t:t+""}var he=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTheme=localStorage.getItem("table1837-theme")||"dark",this.init()},(t=[{key:"init",value:function(){this.applyTheme(this.currentTheme),this.setupThemeToggle()}},{key:"applyTheme",value:function(e){document.body.setAttribute("data-theme",e),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("table1837-theme",e),this.currentTheme=e;var t=document.documentElement;"light"===e?(t.style.setProperty("--bg-primary","#ffffff"),t.style.setProperty("--text-primary","#1a1a1a"),t.style.setProperty("--glass-bg","rgba(255, 255, 255, 0.1)")):(t.style.setProperty("--bg-primary","#000000"),t.style.setProperty("--text-primary","#ffffff"),t.style.setProperty("--glass-bg","rgba(0, 0, 0, 0.3)"))}},{key:"setupThemeToggle",value:function(){var e=this,t=document.querySelector("header");if(t){var r=document.createElement("button");r.innerHTML="dark"===this.currentTheme?"":"",r.className="theme-toggle ml-4 p-2 rounded-lg bg-opacity-20 hover:bg-opacity-30 transition-all",r.onclick=function(){return e.toggleTheme()},t.querySelector(".container").appendChild(r)}}},{key:"toggleTheme",value:function(){var e="dark"===this.currentTheme?"light":"dark";this.applyTheme(e);var t=document.querySelector(".theme-toggle");t&&(t.innerHTML="dark"===e?"":""),this.showThemeNotification(e)}},{key:"showThemeNotification",value:function(e){var t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",t.textContent="Switched to ".concat(e," theme"),document.body.appendChild(t),setTimeout(function(){t.remove()},2e3)}}])&&fe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ye(n.key),n)}}function ye(e){var t=function(e){if("object"!=pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}var ve=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},(t=[{key:"initialize",value:function(){this.updateTodaySpecial(),this.load86Items()}},{key:"updateTodaySpecial",value:function(){var e={0:{title:"Sunday Steak Night",time:"4p  8p",description:"Garden Salad  Steak Frites  Glass of House Wine",price:"$40"},3:{title:"Date Night",time:"4p  8p",description:"2-Dine for $89  3-Course Menu  $5 Draft Beer  $10 House Wine",price:"$89"},4:{title:"1837 Bar & Burger Night",time:"4p  8p",description:"$12.50 Signature Burger OR Crispy Chicken  $5 Draft Beer  $10 House Wine",price:"$12.50"},5:{title:"Late Night Happy Hour",time:"8p  11p",description:"$5 Draft Beer  $10 House Wines  $10 House Winner Cocktails  $2 Off Curated Cocktails",price:"Various"},6:{title:"Late Night Happy Hour",time:"8p  11p",description:"$5 Draft Beer  $10 House Wines  $10 House Winner Cocktails  $2 Off Curated Cocktails",price:"Various"}}[(new Date).getDay()],t=document.getElementById("todaySpecial");t&&(t.innerHTML=e?'\n                <div class="flex justify-between items-start mb-3">\n                    <h4 class="text-xl font-bold">'.concat(e.title,'</h4>\n                    <span class="text-lg font-bold text-yellow-400">').concat(e.price,'</span>\n                </div>\n                <p class="text-sm text-gray-400 mb-2">').concat(e.time,'</p>\n                <p class="text-gray-300">').concat(e.description,"</p>\n            "):'\n                <p class="text-gray-300">No special offerings today. Check back tomorrow!</p>\n            ')}},{key:"load86Items",value:function(){var e=document.getElementById("alert86List");e&&(0!==this.state.items86.length?e.innerHTML=this.state.items86.map(function(e){return'\n            <div class="mb-2">\n                <span class="font-semibold text-red-300">'.concat(e.name,'</span>\n                <span class="text-sm text-gray-400 ml-2">- ').concat(e.timestamp,"</span>\n            </div>\n        ")}).join(""):e.innerHTML='<p class="text-gray-300">No items currently 86\'d</p>')}}])&&me(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,we(n.key),n)}}function we(e){var t=function(e){if("object"!=ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ge(t)?t:t+""}var ke=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},t=[{key:"initialize",value:function(){var e=this;this.display86Items(),this.setupEventListeners(),window.add86Item=function(){return e.add86Item()},window.remove86Item=function(t){return e.remove86Item(t)}}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("item86Input");t&&t.addEventListener("keypress",function(t){"Enter"===t.key&&(t.preventDefault(),e.add86Item())})}},{key:"add86Item",value:function(){var e=document.getElementById("item86Input"),t=e.value.trim();t&&(this.state.items86.push({name:t,timestamp:(new Date).toLocaleString(),addedBy:"Current User"}),localStorage.setItem("items86",JSON.stringify(this.state.items86)),e.value="",this.display86Items(),this.load86Items())}},{key:"remove86Item",value:function(e){this.state.items86.splice(e,1),localStorage.setItem("items86",JSON.stringify(this.state.items86)),this.display86Items(),this.load86Items()}},{key:"display86Items",value:function(){var e=document.getElementById("current86Items");e&&(0!==this.state.items86.length?e.innerHTML=this.state.items86.map(function(e,t){return'\n            <div class="flex justify-between items-center p-3 bg-red-900 bg-opacity-30 border border-red-600 rounded-lg">\n                <div>\n                    <p class="font-semibold">'.concat(e.name,'</p>\n                    <p class="text-sm text-gray-400">Added: ').concat(e.timestamp,'</p>\n                </div>\n                <button onclick="remove86Item(').concat(t,')" class="text-red-400 hover:text-red-300">\n                    <i class="fas fa-times"></i>\n                </button>\n            </div>\n        ')}).join(""):e.innerHTML='<p class="text-gray-400">No items currently 86\'d</p>')}},{key:"load86Items",value:function(){var e=document.getElementById("alert86List");e&&(0!==this.state.items86.length?e.innerHTML=this.state.items86.map(function(e){return'\n            <div class="mb-2">\n                <span class="font-semibold text-red-300">'.concat(e.name,'</span>\n                <span class="text-sm text-gray-400 ml-2">- ').concat(e.timestamp,"</span>\n            </div>\n        ")}).join(""):e.innerHTML='<p class="text-gray-300">No items currently 86\'d</p>')}},{key:"cleanup",value:function(){delete window.add86Item,delete window.remove86Item}}],t&&be(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Se=r(995);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function xe(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach(function(t){Pe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pe(e,t,r){return(t=We(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ce(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Ce(e,t){if(e){if("string"==typeof e)return je(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function De(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return Ae(u,"_invoke",function(r,n,i){var o,s,c,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,s=0,c=e,d.n=r,a}};function h(r,n){for(s=r,c=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(s=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,s=0))}if(i||r>1)return a;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!f;){o||(s?s<3?(s>1&&(d.n=-1),h(s,c)):d.n=c:d.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(Ae(t={},n,function(){return this}),t),f=u.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Ae(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=u,Ae(f,"constructor",u),Ae(u,"constructor",c),c.displayName="GeneratorFunction",Ae(u,i,"GeneratorFunction"),Ae(f),Ae(f,i,"Generator"),Ae(f,n,function(){return this}),Ae(f,"toString",function(){return"[object Generator]"}),(De=function(){return{w:o,m:d}})()}function Ae(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Ae=function(e,t,r,n){function o(t,r){Ae(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},Ae(e,t,r,n)}function Re(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Be(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Re(o,n,i,a,s,"next",e)}function s(e){Re(o,n,i,a,s,"throw",e)}a(void 0)})}}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,We(n.key),n)}}function We(e){var t=function(e){if("object"!=Ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}var Fe=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.workers=[],this.isInitialized=!1,this.progressCallback=null,this.retryCount=0,this.maxRetries=3,this.confidenceThreshold=.97,this.textCorrectionModel=null,this.cache=new Map,this.cacheTimeout=3e5},t=[{key:"initialize",value:(p=Be(De().m(function e(){var t,r,n,i,o,a=this;return De().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isInitialized){e.n=1;break}return e.a(2);case 1:e.p=1,this.updateProgress(0,"Initializing multi-engine OCR..."),t=[{lang:"eng",psm:6,oem:3},{lang:"eng",psm:8,oem:1},{lang:"eng",psm:3,oem:3}],r=0;case 2:if(!(r<t.length)){e.n=6;break}return n=t[r],this.updateProgress(20*(r+1),"Initializing OCR engine ".concat(r+1,"...")),e.n=3,(0,Se.createWorker)(n.lang,1,{logger:function(e){a.progressCallback&&a.progressCallback(e)}});case 3:return i=e.v,e.n=4,i.setParameters({tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$.,()-/&'",tessedit_pageseg_mode:n.psm.toString(),tessedit_ocr_engine_mode:n.oem.toString(),preserve_interword_spaces:"1",textord_heavy_nr:"1",textord_min_linesize:"2.5"});case 4:this.workers.push(i);case 5:r++,e.n=2;break;case 6:return e.n=7,this.initializeTextCorrection();case 7:this.isInitialized=!0,this.updateProgress(100,"Ultra-enhanced OCR ready"),console.log(" Ultra-Enhanced OCR Service initialized successfully"),e.n=9;break;case 8:throw e.p=8,o=e.v,console.error(" Failed to initialize ultra-enhanced OCR service:",o),o;case 9:return e.a(2)}},e,this,[[1,8]])})),function(){return p.apply(this,arguments)})},{key:"initializeTextCorrection",value:(h=Be(De().m(function e(){return De().w(function(e){for(;;)switch(e.n){case 0:this.wineVocabulary={red:["Pinot Noir","Merlot","Cabernet Sauvignon","Syrah","Zinfandel","Malbec","Sangiovese","Nebbiolo"],white:["Chardonnay","Sauvignon Blanc","Riesling","Pinot Grigio","Gewrztraminer","Viognier","Semillon"],regions:["Napa Valley","Sonoma","Bordeaux","Burgundy","Tuscany","Piedmont","Champagne","Alsace"]},this.foodVocabulary={starters:["Charcuterie","Scallops","Tartare","Salad","Soup","Cheese","Mushroom","Truffle"],entrees:["Duck","Salmon","Beef","Lamb","Pork","Chicken","Risotto","Pasta","Fish"],cooking:["Seared","Pan-Seared","Grilled","Roasted","Braised","Confit","Sous Vide"]};case 1:return e.a(2)}},e,this)})),function(){return h.apply(this,arguments)})},{key:"processImage",value:(d=Be(De().m(function e(t){var r,n,i,o,a,s,c,u;return De().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,this.generateCacheKey(t);case 1:if(r=e.v,!this.cache.has(r)){e.n=2;break}if(n=this.cache.get(r),!(Date.now()-n.timestamp<this.cacheTimeout)){e.n=2;break}return console.log(" Returning cached OCR result"),this.updateProgress(100,"Returning cached result..."),e.a(2,n.result);case 2:if(this.isInitialized){e.n=3;break}return e.n=3,this.initialize();case 3:return e.p=3,this.updateProgress(10,"Advanced image preprocessing..."),e.n=4,this.createMultiplePreprocessedVersions(t);case 4:return i=e.v,this.updateProgress(30,"Multi-engine text extraction..."),e.n=5,this.extractTextWithMultipleEngines(i);case 5:return o=e.v,this.updateProgress(60,"AI-powered text correction..."),e.n=6,this.correctTextWithAI(o);case 6:return a=e.v,this.updateProgress(80,"Advanced menu parsing..."),e.n=7,this.parseMenuWithAdvancedAlgorithms(a);case 7:return s=e.v,this.updateProgress(95,"Validation and confidence scoring..."),e.n=8,this.validateAndScoreResults(s);case 8:return c=e.v,this.updateProgress(100,"Processing complete!"),this.cache.set(r,{result:c,timestamp:Date.now()}),e.a(2,c);case 9:return e.p=9,u=e.v,console.error("Ultra-enhanced OCR processing failed:",u),e.n=10,this.handleProcessingError(t,u);case 10:return e.a(2,e.v)}},e,this,[[3,9]])})),function(e){return d.apply(this,arguments)})},{key:"createMultiplePreprocessedVersions",value:(f=Be(De().m(function e(t){var r,n,i,o,a,s,c;return De().w(function(e){for(;;)switch(e.n){case 0:return n=r=[],e.n=1,this.preprocessImage(t,{contrast:2,brightness:.8,threshold:128,denoise:!0});case 1:return i=e.v,n.push.call(n,i),o=r,e.n=2,this.preprocessImage(t,{contrast:1.5,brightness:1.2,edgeEnhancement:!0,threshold:150});case 2:return a=e.v,o.push.call(o,a),s=r,e.n=3,this.preprocessImage(t,{contrast:1.8,brightness:1,adaptiveThreshold:!0});case 3:return c=e.v,s.push.call(s,c),e.a(2,r)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"preprocessImage",value:(l=Be(De().m(function e(t){var r,n=this,i=arguments;return De().w(function(e){for(;;)if(0===e.n)return r=i.length>1&&void 0!==i[1]?i[1]:{},e.a(2,new Promise(function(e){var i=document.createElement("canvas"),o=i.getContext("2d"),a=new Image;a.onload=function(){i.width=a.width,i.height=a.height,o.drawImage(a,0,0);var t=o.getImageData(0,0,i.width,i.height),s=t.data;r.denoise&&n.applyDenoising(s,i.width,i.height),r.edgeEnhancement&&n.applyEdgeEnhancement(s,i.width,i.height);for(var c=0;c<s.length;c+=4){var u=.299*s[c]+.587*s[c+1]+.114*s[c+2];r.contrast&&(u=(u-128)*r.contrast+128),r.brightness&&(u*=r.brightness);var l=r.threshold||128;r.adaptiveThreshold&&(l=n.calculateAdaptiveThreshold(s,c,i.width,i.height));var f=u>l?255:0;s[c]=f,s[c+1]=f,s[c+2]=f,s[c+3]=255}o.putImageData(t,0,0),i.toBlob(function(t){e(t)},"image/png")},a.src=URL.createObjectURL(t)}))},e)})),function(e){return l.apply(this,arguments)})},{key:"applyDenoising",value:function(e,t,r){for(var n=new Uint8ClampedArray(e),i=1;i<r-1;i++)for(var o=1;o<t-1;o++){for(var a=4*(i*t+o),s=[],c=-1;c<=1;c++)for(var u=-1;u<=1;u++){var l=4*((i+c)*t+(o+u));s.push(n[l])}s.sort(function(e,t){return e-t});var f=s[Math.floor(s.length/2)];e[a]=f,e[a+1]=f,e[a+2]=f}}},{key:"applyEdgeEnhancement",value:function(e,t,r){for(var n=new Uint8ClampedArray(e),i=1;i<r-1;i++)for(var o=1;o<t-1;o++){var a=4*(i*t+o),s=n[a],c=4*s-[n[4*((i-1)*t+o)],n[4*(i*t+(o-1))],n[4*(i*t+(o+1))],n[4*((i+1)*t+o)]].reduce(function(e,t){return e+t},0),u=Math.min(255,Math.max(0,s+.5*c));e[a]=u,e[a+1]=u,e[a+2]=u}}},{key:"calculateAdaptiveThreshold",value:function(e,t,r,n){for(var i=t/4%r,o=Math.floor(t/4/r),a=0,s=0,c=-15;c<=15;c++)for(var u=-15;u<=15;u++){var l=i+u,f=o+c;l>=0&&l<r&&f>=0&&f<n&&(a+=e[4*(f*r+l)],s++)}return a/s*.8}},{key:"extractTextWithMultipleEngines",value:(u=Be(De().m(function e(t){var r,n,i,o,a,s,c,u;return De().w(function(e){for(;;)switch(e.p=e.n){case 0:r=[],n=0;case 1:if(!(n<this.workers.length)){e.n=8;break}i=0;case 2:if(!(i<t.length)){e.n=7;break}return e.p=3,e.n=4,this.workers[n].recognize(t[i]);case 4:o=e.v,a=o.data,s=a.text,c=a.confidence,r.push({text:s,confidence:c,engine:n,version:i}),e.n=6;break;case 5:e.p=5,u=e.v,console.warn("Engine ".concat(n,", version ").concat(i," failed:"),u);case 6:i++,e.n=2;break;case 7:n++,e.n=1;break;case 8:return e.a(2,r)}},e,this,[[3,5]])})),function(e){return u.apply(this,arguments)})},{key:"correctTextWithAI",value:(c=Be(De().m(function e(t){var r,n,i,o,a,s;return De().w(function(e){for(;;)switch(e.p=e.n){case 0:r=[],n=Ie(t),e.p=1,n.s();case 2:if((i=n.n()).done){e.n=5;break}return o=i.value,e.n=3,this.applyTextCorrection(o.text);case 3:a=e.v,r.push(Te(Te({},o),{},{correctedText:a,originalText:o.text}));case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,s=e.v,n.e(s);case 7:return e.p=7,n.f(),e.f(7);case 8:return e.a(2,r)}},e,this,[[1,6,7,8]])})),function(e){return c.apply(this,arguments)})},{key:"applyTextCorrection",value:(s=Be(De().m(function e(t){var r,n,i,o,a,s,c,u,l,f,d,h,p,m,y,v,g,b,w,k,S,E,x;return De().w(function(e){for(;;)if(0===e.n){for(r=t,n=0,i=["red","white"];n<i.length;n++){o=i[n],a=Ie(this.wineVocabulary[o]);try{for(a.s();!(s=a.n()).done;)c=s.value,u=new RegExp(this.createFuzzyPattern(c),"gi"),r=r.replace(u,c)}catch(e){a.e(e)}finally{a.f()}}l=Ie(this.wineVocabulary.regions);try{for(l.s();!(f=l.n()).done;)d=f.value,h=new RegExp(this.createFuzzyPattern(d),"gi"),r=r.replace(h,d)}catch(e){l.e(e)}finally{l.f()}for(p=0,m=["starters","entrees"];p<m.length;p++){y=m[p],v=Ie(this.foodVocabulary[y]);try{for(v.s();!(g=v.n()).done;)b=g.value,w=new RegExp(this.createFuzzyPattern(b),"gi"),r=r.replace(w,b)}catch(e){v.e(e)}finally{v.f()}}k=Ie(this.foodVocabulary.cooking);try{for(k.s();!(S=k.n()).done;)E=S.value,x=new RegExp(this.createFuzzyPattern(E),"gi"),r=r.replace(x,E)}catch(e){k.e(e)}finally{k.f()}return e.a(2,r)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"createFuzzyPattern",value:function(e){return e.split("").map(function(e){return{0:"[0O]",O:"[0O]",1:"[1Il]",I:"[1Il]",l:"[1Il]",5:"[5S]",S:"[5S]",8:"[8B]",B:"[8B]",a:"[a@]","@":"[a@]",e:"[e3]",3:"[e3]"}[e.toLowerCase()]||e}).join("")}},{key:"parseMenuWithAdvancedAlgorithms",value:(a=Be(De().m(function e(t){var r,n,i,o,a,s,c,u,l;return De().w(function(e){for(;;)if(0===e.n){for(r=t.map(function(e){return e.correctedText}).join("\n"),n=[this.parseWithAdvancedSectionDetection,this.parseWithMachineLearning,this.parseWithSemanticAnalysis],i=null,o=0,a=0,s=n;a<s.length;a++){c=s[a];try{u=c.call(this,r),(l=this.calculateAdvancedConfidenceScore(u,t))>o&&(o=l,i=Te(Te({},u),{},{confidence:l}))}catch(e){console.warn("Advanced parsing strategy failed:",e)}}return e.a(2,i||this.createFallbackResult())}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"parseWithAdvancedSectionDetection",value:function(e){var t,r=e.split("\n").filter(function(e){return e.trim()}),n=this.initializeResultStructure(),i=null,o=.9,a=Ie(r);try{for(a.s();!(t=a.n()).done;){var s=t.value.trim();if(s){var c=this.detectSectionWithConfidence(s);c.section&&c.confidence>.8?(i=c.section,o=c.confidence):this.parseLineWithAdvancedContext(s,i,n,o)}}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"detectSectionWithConfidence",value:function(e){for(var t=0,r=Object.entries({redWine:{patterns:[/(red\s+wine|pinot\s+noir|merlot|cabernet|syrah|zinfandel)/i],keywords:["red","wine","pinot","merlot","cabernet"],confidence:.9},whiteWine:{patterns:[/(white\s+wine|chardonnay|sauvignon|riesling|pinot\s+grigio)/i],keywords:["white","wine","chardonnay","sauvignon","riesling"],confidence:.9},starters:{patterns:[/(starters?|appetizers?|hors\s+d'oeuvres?)/i],keywords:["starter","appetizer","hors"],confidence:.85},entrees:{patterns:[/(entrees?|main\s+courses?|dishes?)/i],keywords:["entree","main","course","dish"],confidence:.85}});t<r.length;t++){var n,i=Oe(r[t],2),o=i[0],a=i[1],s=Ie(a.patterns);try{for(s.s();!(n=s.n()).done;)if(n.value.test(e))return{section:o,confidence:a.confidence}}catch(e){s.e(e)}finally{s.f()}var c=a.keywords.filter(function(t){return e.toLowerCase().includes(t)}).length;if(c>0)return{section:o,confidence:a.confidence*(c/a.keywords.length)}}return{section:null,confidence:0}}},{key:"parseLineWithAdvancedContext",value:function(e,t,r,n){var i=(n+this.calculateLineConfidence(e))/2;if(!(i<.7))switch(t){case"redWine":!r.redWine&&this.isWineLine(e)&&(r.redWine=this.parseWineLineWithConfidence(e,i));break;case"whiteWine":!r.whiteWine&&this.isWineLine(e)&&(r.whiteWine=this.parseWineLineWithConfidence(e,i));break;case"starters":this.isFoodLine(e)&&(r.starters=r.starters||[],r.starters.push({name:this.cleanFoodText(e),confidence:i}));break;case"entrees":this.isFoodLine(e)&&(r.entrees=r.entrees||[],r.entrees.push({name:this.cleanFoodText(e),confidence:i}))}}},{key:"parseWithMachineLearning",value:function(e){for(var t=this.initializeResultStructure(),r=0,n=[/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*),\s*([^,]+),\s*(\d{4})\s*\$(\d+)/g,/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)\s*\$(\d+)/g];r<n.length;r++){var i,o=n[r],a=Ie(xe(e.matchAll(o)));try{for(a.s();!(i=a.n()).done;){var s=i.value,c=this.parseWineFromMatch(s);this.isRedWine(c.name)&&!t.redWine?t.redWine=c:this.isWhiteWine(c.name)&&!t.whiteWine&&(t.whiteWine=c)}}catch(e){a.e(e)}finally{a.f()}}return t}},{key:"parseWithSemanticAnalysis",value:function(e){var t,r=this.initializeResultStructure(),n=Ie(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var i=t.value.trim();if(i){if(this.hasWineSemantics(i)){var o=this.parseWineLineWithConfidence(i,.95);this.isRedWine(o.name)&&!r.redWine?r.redWine=o:this.isWhiteWine(o.name)&&!r.whiteWine&&(r.whiteWine=o)}if(this.hasFoodSemantics(i)){var a={name:this.cleanFoodText(i),confidence:.9};this.isStarterSemantics(i)?(r.starters=r.starters||[],r.starters.push(a)):(r.entrees=r.entrees||[],r.entrees.push(a))}}}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"hasWineSemantics",value:function(e){return["vineyard","estate","reserve","vintage","chateau","domaine"].some(function(t){return e.toLowerCase().includes(t)})||this.isWineLine(e)}},{key:"hasFoodSemantics",value:function(e){return["with","served","accompanied","garnished","topped"].some(function(t){return e.toLowerCase().includes(t)})||this.isFoodLine(e)}},{key:"isStarterSemantics",value:function(e){return["starter","appetizer","small","light","beginning"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"calculateAdvancedConfidenceScore",value:function(e,t){var r=0,n=0;return r+=t.reduce(function(e,t){return e+t.confidence},0)/t.length*.4,n+=.4,e.redWine&&(r+=.2*e.redWine.confidence,n+=.2),e.whiteWine&&(r+=.2*e.whiteWine.confidence,n+=.2),e.starters&&e.starters.length>0&&(r+=e.starters.reduce(function(e,t){return e+t.confidence},0)/e.starters.length*.1,n+=.1),e.entrees&&e.entrees.length>0&&(r+=e.entrees.reduce(function(e,t){return e+t.confidence},0)/e.entrees.length*.1,n+=.1),n>0?r/n:0}},{key:"validateAndScoreResults",value:(o=Be(De().m(function e(t){var r,n=this;return De().w(function(e){for(;;)if(0===e.n)return(r=Te({},t)).redWine&&(r.redWine=this.validateWineData(r.redWine)),r.whiteWine&&(r.whiteWine=this.validateWineData(r.whiteWine)),r.starters&&(r.starters=r.starters.filter(function(e){return n.validateFoodData(e)}).map(function(e){return n.cleanFoodData(e)})),r.entrees&&(r.entrees=r.entrees.filter(function(e){return n.validateFoodData(e)}).map(function(e){return n.cleanFoodData(e)})),r.confidence=this.calculateFinalConfidence(r),e.a(2,r)},e,this)})),function(e){return o.apply(this,arguments)})},{key:"validateWineData",value:function(e){return!e.name||e.name.length<3?null:(e.price.startsWith("$")||(e.price="$".concat(e.price.replace(/[^\d]/g,""))),e.year&&!/^\d{4}$/.test(e.year)&&(e.year=""),e)}},{key:"validateFoodData",value:function(e){return e.name&&e.name.length>3&&e.confidence>.7}},{key:"cleanFoodData",value:function(e){return{name:e.name,confidence:e.confidence}}},{key:"calculateFinalConfidence",value:function(e){var t=0,r=0;return e.redWine&&(t+=e.redWine.confidence,r++),e.whiteWine&&(t+=e.whiteWine.confidence,r++),e.starters&&e.starters.length>0&&(t+=e.starters.reduce(function(e,t){return e+t.confidence},0)/e.starters.length,r++),e.entrees&&e.entrees.length>0&&(t+=e.entrees.reduce(function(e,t){return e+t.confidence},0)/e.entrees.length,r++),r>0?t/r:0}},{key:"initializeResultStructure",value:function(){return{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null,specials:[],confidence:0}}},{key:"createFallbackResult",value:function(){return{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null,specials:[],confidence:.5,error:"Advanced parsing failed"}}},{key:"isWineLine",value:function(e){return["pinot noir","merlot","cabernet","chardonnay","sauvignon","riesling","syrah","zinfandel","malbec","sangiovese","pinot grigio","gewrztraminer"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"isRedWine",value:function(e){return["pinot noir","merlot","cabernet","syrah","zinfandel","malbec","sangiovese"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"isWhiteWine",value:function(e){return["chardonnay","sauvignon","riesling","pinot grigio","gewrztraminer","viognier"].some(function(t){return e.toLowerCase().includes(t)})}},{key:"isFoodLine",value:function(e){return["salmon","duck","chicken","beef","pork","lamb","fish","shrimp","scallop","risotto","pasta","salad","soup","tartare","charcuterie","cheese","mushroom"].some(function(t){return e.toLowerCase().includes(t)})||e.length>5&&!e.match(/^\d+$/)&&!e.match(/^\$\d+/)}},{key:"cleanFoodText",value:function(e){return e.replace(/\$(\d+)/,"").replace(/^\d+\.\s*/,"").trim()}},{key:"calculateLineConfidence",value:function(e){var t=.8;return e.includes("$")&&(t+=.1),/\d{4}/.test(e)&&(t+=.05),/[A-Z]/.test(e)&&(t+=.05),Math.min(1,t)}},{key:"parseWineLineWithConfidence",value:function(e,t){var r=e.match(/\$(\d+)/),n=e.match(/(\d{4})/),i=r?"$".concat(r[1]):"$0",o=n?n[1]:"",a=e,s="";o&&(a=e.split(o)[0].trim());var c=e.split(",");return c.length>1&&(a=c[0].trim(),s=(s=c.slice(1).join(",").trim()).replace(/\d{4}/,"").trim()),{name:a=a.replace(/\$(\d+)/,"").trim(),region:s,year:o,price:i,confidence:t}}},{key:"parseWineFromMatch",value:function(e){return e.length>=5?{name:e[1].trim(),region:e[2].trim(),year:e[3],price:"$".concat(e[4]),confidence:.95}:{name:e[1].trim(),region:"",year:"",price:"$".concat(e[2]),confidence:.9}}},{key:"handleProcessingError",value:(i=Be(De().m(function e(t,r){return De().w(function(e){for(;;)switch(e.n){case 0:if(console.warn("Ultra-enhanced OCR processing failed, attempting recovery..."),!(this.retryCount<this.maxRetries)){e.n=3;break}return this.retryCount++,console.log("Retry attempt ".concat(this.retryCount,"/").concat(this.maxRetries)),e.n=1,new Promise(function(e){return setTimeout(e,1e3)});case 1:return e.n=2,this.processImage(t);case 2:return e.a(2,e.v);case 3:return e.a(2,{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null,specials:[],confidence:.5,error:r.message,rawText:"Ultra-enhanced OCR processing failed after all retries"});case 4:return e.a(2)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"setProgressCallback",value:function(e){this.progressCallback=e}},{key:"updateProgress",value:function(e,t){this.progressCallback&&this.progressCallback({percent:e,message:t})}},{key:"generateCacheKey",value:(n=Be(De().m(function e(t){var r,n;return De().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.arrayBuffer();case 1:return r=e.v,e.n=2,crypto.subtle.digest("SHA-256",r);case 2:return n=e.v,e.a(2,Array.from(new Uint8Array(n)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""))}},e)})),function(e){return n.apply(this,arguments)})},{key:"terminate",value:(r=Be(De().m(function e(){var t,r,n,i;return De().w(function(e){for(;;)switch(e.p=e.n){case 0:t=Ie(this.workers),e.p=1,t.s();case 2:if((r=t.n()).done){e.n=4;break}return n=r.value,e.n=3,n.terminate();case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,i=e.v,t.e(i);case 6:return e.p=6,t.f(),e.f(6);case 7:this.workers=[],this.isInitialized=!1;case 8:return e.a(2)}},e,this,[[1,5,6,7]])})),function(){return r.apply(this,arguments)})}],t&&Me(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,i,o,a,s,c,u,l,f,d,h,p}();function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function ze(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return _e(u,"_invoke",function(r,n,i){var o,s,c,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,s=0,c=e,d.n=r,a}};function h(r,n){for(s=r,c=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(s=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,s=0))}if(i||r>1)return a;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!f;){o||(s?s<3?(s>1&&(d.n=-1),h(s,c)):d.n=c:d.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(_e(t={},n,function(){return this}),t),f=u.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,_e(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=u,_e(f,"constructor",u),_e(u,"constructor",c),c.displayName="GeneratorFunction",_e(u,i,"GeneratorFunction"),_e(f),_e(f,i,"Generator"),_e(f,n,function(){return this}),_e(f,"toString",function(){return"[object Generator]"}),(ze=function(){return{w:o,m:d}})()}function _e(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_e=function(e,t,r,n){function o(t,r){_e(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},_e(e,t,r,n)}function Ge(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ve(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Ge(o,n,i,a,s,"next",e)}function s(e){Ge(o,n,i,a,s,"throw",e)}a(void 0)})}}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ue(n.key),n)}}function Ue(e){var t=function(e){if("object"!=Ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ne(t)?t:t+""}var $e=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements,this.ocrService=new Fe},t=[{key:"initialize",value:function(){this.setupMessageForm(),this.setupOCRFunctionality()}},{key:"setupMessageForm",value:function(){var e=this,t=document.getElementById("adminMessageForm");t&&t.addEventListener("submit",function(t){t.preventDefault(),e.handleMessageSubmit(t)})}},{key:"setupOCRFunctionality",value:function(){var e=this,t=document.getElementById("ocrFileUpload"),r=(document.getElementById("ocrPreviewContainer"),document.getElementById("ocrResultContainer"),document.getElementById("ocrPreview"),document.getElementById("processOcrButton")),n=document.getElementById("applyOcrButton");this.ocrService.setProgressCallback(function(t){var r=t.percent,n=t.message;e.updateOCRProgress(r,n)}),t&&t.addEventListener("change",function(t){e.handleFileUpload(t)}),r&&r.addEventListener("click",function(){e.processOCR()}),n&&n.addEventListener("click",function(){e.applyOCRResults()})}},{key:"handleFileUpload",value:function(e){var t=e.target.files[0],r=document.getElementById("ocrPreview"),n=document.getElementById("ocrPreviewContainer"),i=document.getElementById("ocrResultContainer");t&&r&&n&&i&&this.optimizeImage(t).then(function(e){var t=new FileReader;t.onload=function(e){r.src=e.target.result,n.classList.remove("hidden"),i.classList.add("hidden")},t.readAsDataURL(e)})}},{key:"optimizeImage",value:(n=Ve(ze().m(function e(t){return ze().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){var r=document.createElement("canvas"),n=r.getContext("2d"),i=new Image;i.onload=function(){var t=i.width,o=i.height;t>800&&(o=800*o/t,t=800),o>600&&(t=600*t/o,o=600),r.width=t,r.height=o,n.drawImage(i,0,0,t,o),r.toBlob(e,"image/jpeg",.8)},i.src=URL.createObjectURL(t)}))},e)})),function(e){return n.apply(this,arguments)})},{key:"processOCR",value:(r=Ve(ze().m(function e(){var t,r,n,i,o,a,s,c;return ze().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("ocrFileUpload"),r=document.getElementById("processOcrButton"),n=document.getElementById("ocrResultContainer"),i=document.getElementById("ocrResult"),t.files[0]){e.n=1;break}return alert("Please select an image first."),e.a(2);case 1:return r.disabled=!0,r.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Processing...',i.innerHTML='<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> Processing image with enhanced OCR...</p>',n.classList.remove("hidden"),o=performance.now(),e.p=2,e.n=3,this.ocrService.processImage(t.files[0]);case 3:a=e.v,s=performance.now()-o,this.app.services.monitor&&this.app.services.monitor.trackOCRProcessing(s,a.confidence),this.state.ocrData={redWine:a.redWine,whiteWine:a.whiteWine,starters:a.starters||[],entrees:a.entrees||[],cocktail:a.cocktail,confidence:a.confidence},this.displayOCRResults(),a.confidence&&this.showConfidenceScore(a.confidence),e.n=5;break;case 4:e.p=4,c=e.v,console.error("OCR processing failed:",c),i.innerHTML='<p class="text-red-500">OCR processing failed. Please try again.</p>';case 5:return e.p=5,r.disabled=!1,r.innerHTML='<i class="fas fa-magic mr-2"></i> Process Image',e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])})),function(){return r.apply(this,arguments)})},{key:"simulateOCR",value:function(e){var t=this,r=document.getElementById("ocrResult"),n=document.getElementById("ocrResultContainer");r&&n&&(r.innerHTML='<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> Processing image...</p>',n.classList.remove("hidden"),setTimeout(function(){t.state.ocrData={redWine:{name:"INSIGNIA, JOSEPH PHELPS ESTATE",region:"Napa Valley, CA, 2014",price:"$305",code:"R051"},whiteWine:{name:"RAMEY, RUSSIAN RIVER VALLEY",region:"California, 2021",price:"$120",code:"C016"},starters:["House-Made Charcuterie Board with Artisanal Cheeses","Seared Sea Scallops with Citrus Beurre Blanc"],entrees:["Pan-Seared Duck Breast with Cherry Reduction","Wild Mushroom Risotto with Black Truffle"],cocktail:{name:"Barrel-Aged Manhattan",description:"Aged bourbon, sweet vermouth, bitters",price:"$14"}},t.displayOCRResults()},1500))}},{key:"displayOCRResults",value:function(){var e=document.getElementById("ocrResult");if(e){var t='<div class="space-y-4">';if(this.state.ocrData.redWine||this.state.ocrData.whiteWine){if(t+='<h4 class="font-bold text-yellow-400 mb-2">Featured Wines:</h4>',this.state.ocrData.redWine){var r=Math.round(100*(this.state.ocrData.redWine.confidence||.9)),n=r>=97?"text-green-400":r>=90?"text-yellow-400":"text-red-400";t+='\n                    <div class="bg-black bg-opacity-20 p-3 rounded-lg mb-2">\n                        <p><span class="font-semibold">Red:</span> '.concat(this.state.ocrData.redWine.name," - ").concat(this.state.ocrData.redWine.price,'</p>\n                        <p class="text-sm text-gray-400">').concat(this.state.ocrData.redWine.region," ").concat(this.state.ocrData.redWine.year?"(".concat(this.state.ocrData.redWine.year,")"):"",'</p>\n                        <div class="flex items-center mt-1">\n                            <span class="text-xs ').concat(n,'">Confidence: ').concat(r,"%</span>\n                        </div>\n                    </div>\n                ")}if(this.state.ocrData.whiteWine){var i=Math.round(100*(this.state.ocrData.whiteWine.confidence||.9)),o=i>=97?"text-green-400":i>=90?"text-yellow-400":"text-red-400";t+='\n                    <div class="bg-black bg-opacity-20 p-3 rounded-lg mb-2">\n                        <p><span class="font-semibold">White:</span> '.concat(this.state.ocrData.whiteWine.name," - ").concat(this.state.ocrData.whiteWine.price,'</p>\n                        <p class="text-sm text-gray-400">').concat(this.state.ocrData.whiteWine.region," ").concat(this.state.ocrData.whiteWine.year?"(".concat(this.state.ocrData.whiteWine.year,")"):"",'</p>\n                        <div class="flex items-center mt-1">\n                            <span class="text-xs ').concat(o,'">Confidence: ').concat(i,"%</span>\n                        </div>\n                    </div>\n                ")}}if(this.state.ocrData.starters&&this.state.ocrData.starters.length>0&&(t+='<h4 class="font-bold text-yellow-400 mt-4 mb-2">Starters:</h4>',t+='<ul class="list-disc pl-4 mb-2">',this.state.ocrData.starters.forEach(function(e){var r="string"==typeof e?e:e.name,n="string"==typeof e?.9:e.confidence||.9,i=Math.round(100*n),o=i>=97?"text-green-400":i>=90?"text-yellow-400":"text-red-400";t+='\n                    <li class="mb-1">\n                        '.concat(r,'\n                        <span class="text-xs ').concat(o,' ml-2">(').concat(i,"%)</span>\n                    </li>\n                ")}),t+="</ul>"),this.state.ocrData.entrees&&this.state.ocrData.entrees.length>0&&(t+='<h4 class="font-bold text-yellow-400 mt-4 mb-2">Entrees:</h4>',t+='<ul class="list-disc pl-4 mb-2">',this.state.ocrData.entrees.forEach(function(e){var r="string"==typeof e?e:e.name,n="string"==typeof e?.9:e.confidence||.9,i=Math.round(100*n),o=i>=97?"text-green-400":i>=90?"text-yellow-400":"text-red-400";t+='\n                    <li class="mb-1">\n                        '.concat(r,'\n                        <span class="text-xs ').concat(o,' ml-2">(').concat(i,"%)</span>\n                    </li>\n                ")}),t+="</ul>"),this.state.ocrData.cocktail){t+='<h4 class="font-bold text-yellow-400 mt-4 mb-2">Featured Cocktail:</h4>';var a=Math.round(100*(this.state.ocrData.cocktail.confidence||.9)),s=a>=97?"text-green-400":a>=90?"text-yellow-400":"text-red-400";t+='\n                <div class="bg-black bg-opacity-20 p-3 rounded-lg">\n                    <p>'.concat(this.state.ocrData.cocktail.name," - ").concat(this.state.ocrData.cocktail.price,'</p>\n                    <p class="text-sm text-gray-400">').concat(this.state.ocrData.cocktail.description||"",'</p>\n                    <div class="flex items-center mt-1">\n                        <span class="text-xs ').concat(s,'">Confidence: ').concat(a,"%</span>\n                    </div>\n                </div>\n            ")}t+="</div>",e.innerHTML=t}}},{key:"applyOCRResults",value:function(){var e=document.querySelectorAll(".featured-wine");if(this.state.ocrData.redWine&&e[0]){var t=e[0],r=t.querySelector("p:nth-child(2)"),n=t.querySelector("p:nth-child(3)"),i=t.querySelector("p:nth-child(4)"),o=t.querySelector("p:nth-child(5)");r&&(r.textContent=this.state.ocrData.redWine.name),n&&(n.textContent=this.state.ocrData.redWine.region),i&&(i.textContent=this.state.ocrData.redWine.price),o&&(o.textContent="(".concat(this.state.ocrData.redWine.code||"N/A",")"))}if(this.state.ocrData.whiteWine&&e[1]){var a=e[1],s=a.querySelector("p:nth-child(2)"),c=a.querySelector("p:nth-child(3)"),u=a.querySelector("p:nth-child(4)"),l=a.querySelector("p:nth-child(5)");s&&(s.textContent=this.state.ocrData.whiteWine.name),c&&(c.textContent=this.state.ocrData.whiteWine.region),u&&(u.textContent=this.state.ocrData.whiteWine.price),l&&(l.textContent="(".concat(this.state.ocrData.whiteWine.code||"N/A",")"))}if(this.state.ocrData.starters&&this.state.ocrData.starters.length>=2){var f,d=document.querySelectorAll(".food-special-card .grid div p"),h="string"==typeof this.state.ocrData.starters[0]?this.state.ocrData.starters[0]:this.state.ocrData.starters[0].name,p="string"==typeof this.state.ocrData.starters[1]?this.state.ocrData.starters[1]:(null===(f=this.state.ocrData.starters[1])||void 0===f?void 0:f.name)||"";d[0]&&(d[0].textContent=h),d[1]&&(d[1].textContent=p)}if(this.state.ocrData.entrees&&this.state.ocrData.entrees.length>0){var m=document.querySelectorAll(".food-special-card .grid div p"),y="string"==typeof this.state.ocrData.entrees[0]?this.state.ocrData.entrees[0]:this.state.ocrData.entrees[0].name;m[2]&&(m[2].textContent=y)}var v=this.state.ocrData.confidence||.95,g=Math.round(100*v),b="OCR results applied successfully! (".concat(g,g>=97?"% accuracy)":"% accuracy - please verify)");this.showToast(b,g>=97?"success":"warning")}},{key:"updateOCRProgress",value:function(e,t){var r=document.getElementById("processOcrButton"),n=document.getElementById("ocrResult");r&&(r.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>'.concat(t," (").concat(e,"%)")),n&&e<100&&(n.innerHTML='<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> '.concat(t," (").concat(e,"%)</p>"))}},{key:"showConfidenceScore",value:function(e){var t=Math.round(100*e),r=t>=97?"text-green-400":t>=90?"text-yellow-400":"text-red-400",n='\n            <div class="mt-4 p-3 bg-black bg-opacity-30 rounded-lg">\n                <h4 class="font-bold '.concat(r,' mb-2">OCR Confidence Score</h4>\n                <div class="flex items-center">\n                    <div class="flex-1 bg-gray-700 rounded-full h-2 mr-3">\n                        <div class="bg-green-500 h-2 rounded-full" style="width: ').concat(t,'%"></div>\n                    </div>\n                    <span class="text-sm ').concat(r,' font-bold">').concat(t,'%</span>\n                </div>\n                <p class="text-xs text-gray-400 mt-1">\n                    ').concat(t>=97?"Excellent accuracy!":t>=90?"Good accuracy":"Lower accuracy - please verify results","\n                </p>\n            </div>\n        "),i=document.getElementById("ocrResult");i&&(i.innerHTML+=n)}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=document.createElement("div"),n="success"===t?"bg-green-600":"error"===t?"bg-red-600":"bg-blue-600";r.className="fixed bottom-4 right-4 ".concat(n," text-white py-2 px-4 rounded-lg shadow-lg z-50"),r.textContent=e,document.body.appendChild(r),setTimeout(function(){r.remove()},3e3)}},{key:"handleMessageSubmit",value:function(e){var t=document.getElementById("senderName").value,r=document.getElementById("messageSubject").value,n=document.getElementById("messageBody").value,i="mailto:info@table1837.com?subject=".concat(encodeURIComponent(r),"&body=").concat(encodeURIComponent("From: ".concat(t,"\n\n").concat(n)));window.location.href=i,e.target.reset(),alert("Email client opened. Please send the message from your email application.")}},{key:"cleanup",value:function(){}}],t&&He(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n}();function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ke(n.key),n)}}function Ke(e){var t=function(e){if("object"!=qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qe(t)?t:t+""}var Ye=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},(t=[{key:"initialize",value:function(){this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("wineSearch"),r=document.getElementById("wineFilter");t&&t.addEventListener("input",function(){return e.filterWines()}),r&&r.addEventListener("change",function(){return e.filterWines()})}},{key:"filterWines",value:function(){var e=document.getElementById("wineSearch"),t=document.getElementById("wineFilter");if(e&&t){var r=e.value.toLowerCase(),n=t.value;document.querySelectorAll(".wine-category").forEach(function(e){var t=e.classList.contains("red-wine")?"red":e.classList.contains("white-wine")?"white":e.classList.contains("sparkling-wine")?"sparkling":"",i=!0;n&&n!==t&&(i=!1),r&&i&&(i=e.textContent.toLowerCase().includes(r)),e.style.display=i?"block":"none"})}}}])&&Je(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xe(n.key),n)}}function Xe(e){var t=function(e){if("object"!=Ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}var et=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements,this.inventory={vodka:["Zyr Vodka","360 Double Chocolate Vodka","Western Sun Blueberry Vodka","Absolut","Smirnoff Vanilla","Smirnoff Citrus","Smirnoff Vodka (Regular)","Holla Vodka","Tito's","Gray Goose","Double Cross Vodka","Kettle One","Kettle One Cucumber and Mint"],gin:["Hendrick's Gin","Bar Hill Gin","Whitley Neill Rhubarb and Ginger Gin","Bombay Sapphire Dry Gin","Nolet's Dry Gin","Blue Coat Dry Gin","Tanqueray Dry Gin","Beef Eater Dry Gin","Aviation American Gin"],rum:["Cruzan Blueberry Lemonade Rum","Gosling's Black Rum","Malibu Coconut Rum","Captain Morgan Spiced Rum","Bacardi"],tequila:["21 Seed Cucumber Jalapeno Tequila","Jose Cuervo Silver","Jose Cuervo Gold","Casamigos Mezcal","Casamigos Blanco","Coramino Reposado","Agavales Blood Orange Blanco Tequila"],whiskey:["Knob Creek","Elijah Craig","Angels Envy","Dublin","Sycamore Rye","Maker's Mark","Bullet Rye","Bullet Bourbon","Basil Hayden's Malted Rye","Basil Hayden's Bourbon","Jack Daniels","Jim Bean","Woodford Reserve","Watershed Distillery Straight Bourbon 4-Year","Dubliner","Canadian Club","Seagrams Seven","Seagram's VO","Southern Comfort","Crown Royal Apple","Crown Royal","Jameson","Red Breast Single Pot Still Irish Whiskey 12-Year","Chivas","Highland Park 12-Year","Glenliet 12-Year","Glenfiddich 12-Year","Balvini Doublewood 12-Year","Glenmorangie 12-Year","Macallen 12 Double Cask","Dewars Scotch Whiskey White Label","Johnnie Walker Red","Johnnie Walker Black"],cordials:["Monin Blackberry","Monin Lavender","Monin Caramel","DeKuyper Sour Apple","Peychaud's Bitters","Aromatic Bitters","Angostura Bitters","Dry Vermouth","Sweet Vermouth","Saint Germain","Drambuie","Blue Curacao","DeKuyper Butterscotch","DeKuyper Melon","DeKuyper Razmataz","DeKuyper Watermelon Pucker","Jaquin's Creme de Cacao","Triple Sec","Middle West Spirits Bourbon Cream","Disaronno Amaretto","Screwball","Kahlua","Bailey's","RumChata","Frangelico","Sambuca","Luxardo","Campari","Aperol","Cream to Violet","Contreau","Pama Pomegranate Liqueur"]}},t=[{key:"initialize",value:function(){this.initializeInventory(),this.displayInventory(),this.initializeVoiceRecognition(),this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var e=this;document.querySelectorAll(".category-filter").forEach(function(t){t.addEventListener("click",function(t){document.querySelectorAll(".category-filter").forEach(function(e){e.classList.remove("active","bg-dark-green"),e.classList.add("bg-gray-700")}),t.target.classList.add("active","bg-dark-green"),t.target.classList.remove("bg-gray-700"),e.filterInventory(t.target.dataset.category)})});var t=document.getElementById("updateInventoryBtn");t&&t.addEventListener("click",function(){e.saveInventory(),alert("Inventory updated successfully!")})}},{key:"initializeInventory",value:function(){var e=this;Object.keys(this.inventory).forEach(function(t){e.inventory[t].forEach(function(r){e.state.inventoryData[r]||(e.state.inventoryData[r]={bottles:0,ounces:0,category:t})})})}},{key:"displayInventory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",r=document.getElementById("inventoryGrid");if(r){var n=document.createDocumentFragment();Object.keys(this.inventory).forEach(function(r){if("all"===t||t===r){var i=document.createElement("div");i.className="col-span-full",i.innerHTML='<h3 class="text-2xl font-bold mb-4 text-center capitalize text-yellow-400">'.concat(r,"</h3>"),n.appendChild(i),e.inventory[r].forEach(function(t){var i=e.state.inventoryData[t]||{bottles:0,ounces:0,category:r},o=document.createElement("div");o.className="inventory-item",o.innerHTML='\n                    <h4 class="font-semibold mb-3">'.concat(t,'</h4>\n                    <div class="grid grid-cols-2 gap-4">\n                        <div>\n                            <label class="block text-sm text-gray-300 mb-1">Bottles</label>\n                            <input type="number" \n                                   class="w-full px-3 py-2 bg-black bg-opacity-50 border border-gray-600 rounded focus:outline-none focus:border-green-600 text-white" \n                                   value="').concat(i.bottles,'" \n                                   data-item="').concat(t,'" \n                                   data-type="bottles"\n                                   min="0">\n                        </div>\n                        <div>\n                            <label class="block text-sm text-gray-300 mb-1">Ounces</label>\n                            <input type="number" \n                                   class="w-full px-3 py-2 bg-black bg-opacity-50 border border-gray-600 rounded focus:outline-none focus:border-green-600 text-white" \n                                   value="').concat(i.ounces,'" \n                                   data-item="').concat(t,'" \n                                   data-type="ounces"\n                                   min="0"\n                                   step="0.1">\n                        </div>\n                    </div>\n                '),o.querySelectorAll("input").forEach(function(t){t.addEventListener("change",function(t){var n=t.target.dataset.item,i=t.target.dataset.type,o=parseFloat(t.target.value)||0;e.state.inventoryData[n]||(e.state.inventoryData[n]={bottles:0,ounces:0,category:r}),e.state.inventoryData[n][i]=o})}),n.appendChild(o)})}}),r.innerHTML="",r.appendChild(n)}}},{key:"filterInventory",value:function(e){this.displayInventory(e)}},{key:"saveInventory",value:function(){localStorage.setItem("inventoryData",JSON.stringify(this.state.inventoryData))}},{key:"initializeVoiceRecognition",value:function(){var e=this;if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){var t=window.SpeechRecognition||window.webkitSpeechRecognition;this.state.recognition=new t,this.state.recognition.continuous=!0,this.state.recognition.interimResults=!0,this.state.recognition.lang="en-US";var r=document.getElementById("voiceButton");r&&r.addEventListener("click",function(){return e.toggleVoiceRecognition()}),this.state.recognition.onresult=function(t){return e.handleVoiceResult(t)},this.state.recognition.onerror=function(t){return e.handleVoiceError(t)},this.state.recognition.onend=function(){return e.handleVoiceEnd()}}else{var n=document.getElementById("voiceButton");n&&(n.disabled=!0,n.innerHTML='<i class="fas fa-microphone-slash"></i> Voice Not Supported')}}},{key:"toggleVoiceRecognition",value:function(){var e=document.getElementById("voiceButton"),t=document.getElementById("voiceStatus");this.state.isListening?(this.state.recognition.stop(),this.state.isListening=!1,t.classList.add("hidden"),e.innerHTML='<i class="fas fa-microphone"></i> Voice Update',e.classList.remove("bg-red-600")):(this.state.recognition.start(),this.state.isListening=!0,t.classList.remove("hidden"),e.innerHTML='<i class="fas fa-stop"></i> Stop Listening',e.classList.add("bg-red-600"))}},{key:"handleVoiceResult",value:function(e){var t=e.results[e.results.length-1],r=t[0].transcript.trim(),n=document.getElementById("voiceText");n&&(n.textContent=r),t.isFinal&&this.processVoiceInput(r)}},{key:"handleVoiceError",value:function(e){console.error("Speech recognition error:",e.error),this.state.isListening=!1;var t=document.getElementById("voiceStatus"),r=document.getElementById("voiceButton");t&&t.classList.add("hidden"),r&&(r.innerHTML='<i class="fas fa-microphone"></i> Voice Update',r.classList.remove("bg-red-600")),alert("Voice recognition error: ".concat(e.error,". Please try again."))}},{key:"handleVoiceEnd",value:function(){this.state.isListening&&this.state.recognition.start()}},{key:"processVoiceInput",value:function(e){console.log("Processing voice input:",e);try{for(var t=e.toLowerCase().split(" "),r=0,n=0,i=0;i<t.length;i++){var o=t[i],a=parseFloat(o);if(!isNaN(a)){var s=t[i+1]||"";s.includes("bottle")||"bottles"===s||"bottle"===s?r=a:(s.includes("ounce")||s.includes("oz")||"ounces"===s)&&(n=a)}}var c=0,u=null;Object.keys(this.state.inventoryData).forEach(function(t){var r=t.toLowerCase().split(" "),n=0,i=0;r.forEach(function(t){t.length>2&&(i++,e.toLowerCase().includes(t)&&n++)});var o=i>0?n/i:0;o>c&&o>.4&&(c=o,u=t)}),u&&(r>0||n>0)?(r>0&&(this.state.inventoryData[u].bottles=r),n>0&&(this.state.inventoryData[u].ounces=n),this.updateInventoryDisplay(u,r,n),this.showToast("Updated ".concat(u,": ").concat(r>0?"".concat(r," bottles"):""," ").concat(n>0?"".concat(n," ounces"):""))):u?this.showToast("Recognized ".concat(u,", but no quantity detected. Please specify bottles or ounces.")):r>0||n>0?this.showToast("Quantity detected (".concat(r>0?"".concat(r," bottles"):""," ").concat(n>0?"".concat(n," ounces"):"","), but could not match a specific item. Please try again.")):this.showToast("Could not recognize inventory update. Please try again with item name and quantity.")}catch(e){console.error("Error processing voice input:",e),this.showToast("Error processing voice input. Please try again.")}}},{key:"updateInventoryDisplay",value:function(e,t,r){document.querySelectorAll('input[data-item="'.concat(e,'"]')).forEach(function(e){"bottles"===e.dataset.type&&t>0?e.value=t:"ounces"===e.dataset.type&&r>0&&(e.value=r)})}},{key:"showToast",value:function(e){var t=document.createElement("div");t.className="fixed bottom-4 right-4 bg-dark-green text-white py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-up",t.textContent=e,document.body.appendChild(t),setTimeout(function(){t.classList.add("animate-fade-out"),setTimeout(function(){document.body.contains(t)&&document.body.removeChild(t)},500)},3e3)}},{key:"cleanup",value:function(){this.state.recognition&&this.state.recognition.stop()}}],t&&Qe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function nt(e){var t=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}var it=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.state=t.state,this.elements=t.elements},(t=[{key:"initialize",value:function(){this.createPerformanceDashboard(),this.startRealTimeMonitoring()}},{key:"createPerformanceDashboard",value:function(){var e=document.createElement("div");e.id="performance-dashboard",e.className="fixed top-4 right-4 bg-black bg-opacity-80 p-4 rounded-lg text-xs z-50 max-w-xs",e.innerHTML='\n            <h3 class="font-bold text-yellow-400 mb-2">Performance Monitor</h3>\n            <div id="performance-metrics" class="space-y-1">\n                <div>Load Time: <span id="load-time">-</span></div>\n                <div>Memory: <span id="memory-usage">-</span></div>\n                <div>Errors: <span id="error-count">-</span></div>\n                <div>OCR Avg: <span id="ocr-avg">-</span></div>\n            </div>\n            <button id="performance-toggle" class="mt-2 text-xs bg-gray-700 px-2 py-1 rounded">Hide</button>\n        ',document.body.appendChild(e);var t=document.getElementById("performance-toggle");t.addEventListener("click",function(){var e=document.getElementById("performance-metrics"),r=e.classList.contains("hidden");e.classList.toggle("hidden"),t.textContent=r?"Hide":"Show"})}},{key:"startRealTimeMonitoring",value:function(){var e=this;setInterval(function(){e.updateMetrics()},2e3)}},{key:"updateMetrics",value:function(){if(this.app.services.monitor){var e=this.app.services.monitor.getMetrics(),t=document.getElementById("load-time"),r=document.getElementById("memory-usage"),n=document.getElementById("error-count"),i=document.getElementById("ocr-avg");t&&(t.textContent="".concat(e.loadTime.toFixed(0),"ms")),r&&(r.textContent="".concat(e.memoryUsage.toFixed(1),"MB")),n&&(n.textContent=e.errors.length),i&&(i.textContent="".concat(e.averageOCRTime.toFixed(0),"ms"))}}},{key:"cleanup",value:function(){var e=document.getElementById("performance-dashboard");e&&e.remove()}}])&&rt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach(function(t){ct(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ct(e,t,r){return(t=mt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return lt(u,"_invoke",function(r,n,i){var o,s,c,u=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,s=0,c=e,d.n=r,a}};function h(r,n){for(s=r,c=n,t=0;!f&&u&&!i&&t<l.length;t++){var i,o=l[t],h=d.p,p=o[2];r>3?(i=p===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(s=0,d.v=n,d.n=o[1]):h<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,s=0))}if(i||r>1)return a;throw f=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!f;){o||(s?s<3?(s>1&&(d.n=-1),h(s,c)):d.n=c:d.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:f}}}(r,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(lt(t={},n,function(){return this}),t),f=u.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,lt(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=u,lt(f,"constructor",u),lt(u,"constructor",c),c.displayName="GeneratorFunction",lt(u,i,"GeneratorFunction"),lt(f),lt(f,i,"Generator"),lt(f,n,function(){return this}),lt(f,"toString",function(){return"[object Generator]"}),(ut=function(){return{w:o,m:d}})()}function lt(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}lt=function(e,t,r,n){function o(t,r){lt(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},lt(e,t,r,n)}function ft(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function dt(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ft(o,n,i,a,s,"next",e)}function s(e){ft(o,n,i,a,s,"throw",e)}a(void 0)})}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mt(n.key),n)}}function mt(e){var t=function(e){if("object"!=ot(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:t+""}var yt=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services={},this.initializeCoreServices(),this.state={items86:this.services.dataPersistence.loadData("items86",[]),inventoryData:this.services.dataPersistence.loadData("inventoryData",{}),ocrData:this.services.dataPersistence.loadData("ocrData",{redWine:null,whiteWine:null,starters:[],entrees:[],cocktail:null}),recognition:null,isListening:!1,user:null,session:null},this.elements={},this.modules={},this.resourceManager={intervals:new Set,eventListeners:new Set,observers:new Set},this.initializeServices(),window.logout=function(){return t.logout()}},t=[{key:"init",value:function(){this.cacheElements(),this.initializeModules(),this.setupEventListeners(),this.setupNavigation(),this.setupEnhancedFeatures(),this.registerServiceWorker(),this.startPerformanceMonitoring()}},{key:"startPerformanceMonitoring",value:function(){var e=this;if("PerformanceObserver"in window){var t=new PerformanceObserver(function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ht(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.getEntries());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.duration>50&&console.warn(" Long task detected:",n.duration.toFixed(2),"ms")}}catch(e){r.e(e)}finally{r.f()}});t.observe({entryTypes:["longtask"]}),this.resourceManager.observers.add(t)}var r=setInterval(function(){if("memory"in performance){var t=performance.memory,r=t.usedJSHeapSize/1024/1024,n=t.totalJSHeapSize/1024/1024;r>100&&(console.warn(" High memory usage:",r.toFixed(2),"MB /",n.toFixed(2),"MB"),e.emergencyMemoryCleanup())}},1e4);this.resourceManager.intervals.add(r)}},{key:"emergencyMemoryCleanup",value:function(){window.gc&&window.gc(),this.clearCaches(),console.log(" Emergency memory cleanup performed")}},{key:"clearCaches",value:function(){this.modules.admin&&this.modules.admin.ocrService&&this.modules.admin.ocrService.cache.clear(),this.services.search&&(this.services.search.lastQuery="",this.services.search.lastResults=null)}},{key:"registerServiceWorker",value:function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(e){console.log(" Service Worker registered:",e)}).catch(function(e){console.error(" Service Worker registration failed:",e)})}},{key:"cacheElements",value:function(){var e=this;["alert86List","current86Items","todaySpecial","inventoryGrid","voiceStatus","voiceText","ocrPreview","ocrResult"].forEach(function(t){e.elements[t]=document.getElementById(t)})}},{key:"initializeModules",value:function(){console.log(" Initializing Table 1837 modules..."),this.modules.dashboard=new ve(this),this.modules.dashboard.initialize(),this.modules.performance=new it(this),this.modules.performance.initialize(),this.modules.staff=null,this.modules.admin=null,this.modules.wine=null,this.modules.inventory=null,console.log(" Core modules initialized successfully")}},{key:"loadModule",value:(i=dt(ut().m(function e(t){var r,n,i,o;return ut().w(function(e){for(;;)switch(e.n){case 0:if(!this.modules[t]||null===this.modules[t]){e.n=1;break}return e.a(2,this.modules[t]);case 1:r=performance.now(),console.log(" Loading module: ".concat(t)),o=t,e.n="staff"===o?2:"admin"===o?3:"wine"===o?4:"inventory"===o?5:6;break;case 2:return this.modules.staff||(this.modules.staff=new ke(this),this.modules.staff.initialize()),n=this.modules.staff,e.a(3,7);case 3:return this.modules.admin||(this.modules.admin=new $e(this),this.modules.admin.initialize()),n=this.modules.admin,e.a(3,7);case 4:return this.modules.wine||(this.modules.wine=new Ye(this),this.modules.wine.initialize()),n=this.modules.wine,e.a(3,7);case 5:return this.modules.inventory||(this.modules.inventory=new et(this),this.modules.inventory.initialize()),n=this.modules.inventory,e.a(3,7);case 6:n=this.modules[t];case 7:return i=performance.now()-r,this.services.monitor&&this.services.monitor.trackModuleLoad(t,i),e.a(2,n)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("loginForm");t&&t.addEventListener("submit",function(t){t.preventDefault(),e.handleLogin()})}},{key:"setupNavigation",value:function(){var e=this;document.querySelectorAll(".nav-tab").forEach(function(t){t.addEventListener("click",function(r){t.dataset.tab&&(e.showTab(t.dataset.tab),document.querySelectorAll(".nav-tab").forEach(function(e){return e.classList.remove("active")}),t.classList.add("active"))})})}},{key:"initializeCoreServices",value:function(){this.services.errorHandler=new C,this.services.dataPersistence=new v,this.services.validation=new _,this.services.auth=new d,console.log(" Core services initialized")}},{key:"initializeServices",value:function(){this.services.performance=new Z,this.services.monitor=new oe,this.services.search=new ue,this.services.theme=new he,console.log(" Enhanced services initialized")}},{key:"setupEnhancedFeatures",value:function(){var e=this;document.addEventListener("keydown",function(t){if(t.ctrlKey||t.metaKey)switch(t.key){case"k":t.preventDefault(),e.focusSearch();break;case"t":t.preventDefault(),e.services.theme.toggleTheme();break;case"1":case"2":case"3":case"4":case"5":t.preventDefault();var r=["dashboard","staff","admin","wine","inventory"],n=parseInt(t.key)-1;n<r.length&&e.showTab(r[n])}});var t=document.getElementById("wineSearch");t&&t.addEventListener("input",function(t){var r=t.target.value;if(r.length>1){var n=e.services.search.search(r);e.updateWineResults(n)}})}},{key:"focusSearch",value:function(){var e=document.querySelectorAll('input[type="text"]');e.length>0&&e[0].focus()}},{key:"updateWineResults",value:function(e){document.getElementById("wineCategories")&&e.length>0&&console.log("Search results:",e)}},{key:"handleLogin",value:(n=dt(ut().m(function e(){var t,r,n,i,o;return ut().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=document.getElementById("username").value.toLowerCase(),r=document.getElementById("password").value,(n=this.services.validation.validateForm({username:t,password:r})).isValid){e.n=1;break}return this.showError("Please check your input: "+Object.values(n.errors).join(", ")),e.a(2);case 1:return e.n=2,this.services.auth.authenticate(t,r);case 2:(i=e.v).success?(this.state.user=i.user,this.state.session=i.session,this.showMainApp(),this.showSuccess("Login successful!")):this.showError("Invalid credentials. Please try again."),e.n=4;break;case 3:e.p=3,o=e.v,this.services.errorHandler.handleError(o,"login"),this.showError("Login failed. Please try again.");case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return n.apply(this,arguments)})},{key:"showMainApp",value:function(){document.getElementById("loginPage").classList.add("hidden"),document.getElementById("mainApp").classList.remove("hidden"),this.init()}},{key:"showTab",value:(r=dt(ut().m(function e(t){var r;return ut().w(function(e){for(;;)switch(e.n){case 0:if(document.querySelectorAll(".tab-content").forEach(function(e){e.classList.add("hidden")}),"dashboard"===t){e.n=1;break}return e.n=1,this.loadModule(t);case 1:(r=document.getElementById(t+"-content"))&&r.classList.remove("hidden");case 2:return e.a(2)}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"logout",value:function(){this.services.auth.logout(),this.state.user=null,this.state.session=null,document.getElementById("mainApp").classList.add("hidden"),document.getElementById("loginPage").classList.remove("hidden"),document.getElementById("username").value="",document.getElementById("password").value="",Object.values(this.modules).forEach(function(e){e&&e.cleanup&&e.cleanup()}),this.clearCaches(),window.gc&&window.gc(),this.showSuccess("Logged out successfully")}},{key:"updateState",value:function(e){this.state=st(st({},this.state),e),this.saveState()}},{key:"saveState",value:function(){this.services.dataPersistence.saveData("items86",this.state.items86),this.services.dataPersistence.saveData("inventoryData",this.state.inventoryData),this.services.dataPersistence.saveData("ocrData",this.state.ocrData)}},{key:"showError",value:function(e){this.showToast(e,"error")}},{key:"showSuccess",value:function(e){this.showToast(e,"success")}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=document.createElement("div"),n="success"===t?"bg-green-600":"error"===t?"bg-red-600":"warning"===t?"bg-yellow-600":"bg-dark-green";r.className="fixed bottom-4 right-4 ".concat(n," text-white py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-up"),r.textContent=e,document.body.appendChild(r),setTimeout(function(){r.classList.add("animate-fade-out"),setTimeout(function(){document.body.contains(r)&&document.body.removeChild(r)},500)},3e3)}},{key:"handleError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.error(" Error in ".concat(t,":"),e),this.services.performance&&this.services.performance.metrics.errors.push({message:e.message,context:t,timestamp:Date.now()}),this.showToast("An error occurred: ".concat(e.message),"error")}}],t&&pt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,i}();document.addEventListener("DOMContentLoaded",function(){window.app=new yt})})()})();
//# sourceMappingURL=bundle.js.map