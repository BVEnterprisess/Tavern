<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table 1837 - Bar Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'EB Garamond', serif;
        }
        
        .login-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.stockcake.com/public/f/3/c/f3cab94a-6edb-44f9-adf2-c82fa6e8b374_large/elegant-cocktail-evening-stockcake.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .dashboard-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.stockcake.com/public/8/d/5/8d55dbe0-ce4f-482a-b3a9-5000a21a7865_large/pouring-espresso-martini-stockcake.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .inventory-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)), url('https://images.stockcake.com/public/2/3/8/238c9ec4-c6e0-4029-a30e-98096ca972c2_large/bartender-serving-cocktail-stockcake.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .wine-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.stockcake.com/public/d/a/b/dab87a2c-70ec-4978-8543-bb77a6184733_large/elegant-cocktail-served-stockcake.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .staff-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.stockcake.com/public/7/6/a/76adceb7-c734-49b1-b068-3846249ad446_large/bartender-preparing-cocktail-stockcake.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .admin-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.stockcake.com/public/4/c/6/4c636216-6c63-4bc8-98f3-1e1ddfd03026_large/elegant-bartender-serving-stockcake.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .btn-primary {
            background-color: #1a3b1a;
            border-color: #1a3b1a;
        }
        
        .btn-primary:hover {
            background-color: #0f2b0f;
            border-color: #0f2b0f;
        }
        
        .text-gold {
            color: #d4af37;
        }
        
        .bg-dark-green {
            background-color: #1a3b1a;
        }
        
        .bg-darker-green {
            background-color: #0f2b0f;
        }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nav-tab {
            transition: all 0.3s ease;
        }
        
        .nav-tab:hover {
            background-color: rgba(26, 59, 26, 0.8);
        }
        
        .nav-tab.active {
            background-color: #1a3b1a;
            border-bottom: 3px solid #d4af37;
        }
        
        .inventory-grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        
        .inventory-item {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
        }
        
        .inventory-item:hover {
            background: rgba(0, 0, 0, 0.8);
            border-color: #1a3b1a;
        }
        
        .recording {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .wine-category {
            background: rgba(0, 0, 0, 0.7);
            border-left: 4px solid #1a3b1a;
            margin-bottom: 1.5rem;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
        }
        
        .wine-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.75rem;
            margin: 0.5rem 0;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .wine-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #1a3b1a;
        }
        
        .featured-wine {
            background: linear-gradient(135deg, rgba(26, 59, 26, 0.3), rgba(212, 175, 55, 0.1));
            border: 2px solid #1a3b1a;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
        }
        
        .special-card {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .special-card:hover {
            background: rgba(0, 0, 0, 0.9);
            border-color: #1a3b1a;
        }
        
        .alert-86 {
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(0, 0, 0, 0.8));
            border: 2px solid #dc2626;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .food-special-card {
            background: linear-gradient(135deg, rgba(26, 59, 26, 0.3), rgba(0, 0, 0, 0.8));
            border: 2px solid #1a3b1a;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .inventory-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.5rem !important;
            }
            
            h2 {
                font-size: 1.25rem !important;
            }
            
            .nav-tab {
                padding: 0.5rem !important;
                font-size: 0.8rem !important;
            }
            
            .glass-panel {
                padding: 1rem !important;
            }
            
            .inventory-item, .wine-item {
                padding: 0.5rem !important;
            }
            
            .featured-wine, .special-card {
                padding: 1rem !important;
            }
        }
    </style>
</head>
<body class="bg-black text-white min-h-screen">
    <!-- Login Page -->
    <div id="loginPage" class="login-bg min-h-screen flex items-center justify-center">
        <div class="glass-panel p-8 rounded-lg w-full max-w-md mx-4">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold mb-2">TABLE 1837</h1>
                <p class="text-gray-300 text-lg">Glen Rock Mill Inn</p>
                <p class="text-gray-400">Bar Management System</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium mb-2">Username</label>
                    <input type="email" id="username" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" placeholder="Enter your email" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-3 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" placeholder="Enter your password" required>
                </div>
                
                <button type="submit" class="w-full btn-primary text-white py-3 px-6 rounded-lg font-semibold text-lg hover:bg-opacity-80 transition duration-300">
                    ACCESS INVENTORY SYSTEM
                </button>
                
                <div class="text-center text-sm text-gray-400">
                    <p>Demo Credentials:</p>
                    <p>user@table1837.com / password123</p>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden min-h-screen">
        <!-- Header with Navigation -->
        <header class="bg-black bg-opacity-90 backdrop-filter backdrop-blur-sm border-b border-gray-800 sticky top-0 z-50">
            <div class="container mx-auto px-4">
                <div class="flex items-center justify-between py-4">
                    <div class="text-center">
                        <h1 class="text-2xl font-bold">TABLE 1837</h1>
                        <p class="text-sm text-gray-400">Bar Management</p>
                    </div>
                </div>
                
                <!-- Navigation Tabs -->
                <nav class="flex space-x-1 mt-4 overflow-x-auto">
                    <button class="nav-tab px-4 py-2 rounded-t-lg text-sm font-medium active" data-tab="dashboard">
                        Dashboard
                    </button>
                    <button class="nav-tab px-4 py-2 rounded-t-lg text-sm font-medium" data-tab="staff">
                        Staff
                    </button>
                    <button class="nav-tab px-4 py-2 rounded-t-lg text-sm font-medium" data-tab="admin">
                        Admin
                    </button>
                    <button class="nav-tab px-4 py-2 rounded-t-lg text-sm font-medium" data-tab="wine">
                        Wine
                    </button>
                    <button class="nav-tab px-4 py-2 rounded-t-lg text-sm font-medium" data-tab="inventory">
                        Inventory
                    </button>
                    <button class="nav-tab px-4 py-2 rounded-t-lg text-sm font-medium ml-auto" onclick="logout()">
                        Logout
                    </button>
                </nav>
            </div>
        </header>

        <!-- Dashboard Tab -->
        <div id="dashboard-content" class="tab-content dashboard-bg min-h-screen p-6">
            <div class="container mx-auto max-w-6xl">
                <h2 class="text-3xl font-bold mb-8 text-center">Daily Dashboard</h2>
                
                <!-- Featured Wines of the Week -->
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="featured-wine">
                        <h3 class="text-xl font-bold mb-3 flex items-center">
                            <i class="fas fa-wine-glass-alt mr-2 text-yellow-400"></i>
                            Featured Red Wine
                        </h3>
                        <p class="text-lg font-semibold">CRISTOM, EILEEN VYD., PINOT NOIR</p>
                        <p class="text-gray-300">Eola-Amity Hills, Willamette Valley, OR, 2019</p>
                        <p class="text-2xl font-bold text-yellow-400 mt-2">$185</p>
                        <p class="text-sm text-gray-400">(R013)</p>
                    </div>
                    
                    <div class="featured-wine">
                        <h3 class="text-xl font-bold mb-3 flex items-center">
                            <i class="fas fa-wine-glass-alt mr-2 text-yellow-400"></i>
                            Featured White Wine
                        </h3>
                        <p class="text-lg font-semibold">NEYERS, CARNEROS CHARDONNAY</p>
                        <p class="text-gray-300">Sonoma County, CA, 2019</p>
                        <p class="text-2xl font-bold text-yellow-400 mt-2">$100</p>
                        <p class="text-sm text-gray-400">(C004)</p>
                    </div>
                </div>
                
                <!-- 86'd Items Alert -->
                <div id="alert86Items" class="alert-86 mb-8">
                    <h3 class="text-xl font-bold mb-3 flex items-center">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        86'd Items
                    </h3>
                    <div id="alert86List">
                        <p class="text-gray-300">No items currently 86'd</p>
                    </div>
                </div>
                
                <!-- Food Specials -->
                <div class="food-special-card mb-8">
                    <h3 class="text-xl font-bold mb-3 flex items-center">
                        <i class="fas fa-utensils mr-2 text-yellow-400"></i>
                        Food Specials
                    </h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div>
                            <h4 class="font-bold text-yellow-400">Hors d'oeuvre</h4>
                            <p class="text-gray-300">Salmon Tartare with Avocado Mousse</p>
                        </div>
                        <div>
                            <h4 class="font-bold text-yellow-400">Intermezzo</h4>
                            <p class="text-gray-300">Lemon Basil Sorbet</p>
                        </div>
                        <div>
                            <h4 class="font-bold text-yellow-400">Soup of the Day</h4>
                            <p class="text-gray-300">Wild Mushroom Bisque</p>
                        </div>
                    </div>
                </div>
                
                <!-- Today's Special -->
                <div class="special-card">
                    <h3 class="text-2xl font-bold mb-4 flex items-center">
                        <i class="fas fa-glass-martini mr-2 text-yellow-400"></i>
                        Happy Hour Special
                    </h3>
                    <div id="todaySpecial"></div>
                </div>
            </div>
        </div>

        <!-- Staff Tab -->
        <div id="staff-content" class="tab-content staff-bg min-h-screen p-6 hidden">
            <div class="container mx-auto max-w-4xl">
                <h2 class="text-3xl font-bold mb-8 text-center">Staff Communication</h2>
                
                <!-- Add 86'd Items -->
                <div class="glass-panel p-6 rounded-lg mb-8">
                    <h3 class="text-xl font-bold mb-4">Add 86'd Item</h3>
                    <div class="flex gap-4">
                        <input type="text" id="item86Input" class="flex-1 px-4 py-2 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" placeholder="Enter item name">
                        <button onclick="add86Item()" class="btn-primary px-6 py-2 rounded-lg font-semibold">
                            Add to 86'd List
                        </button>
                    </div>
                </div>
                
                <!-- Current 86'd Items -->
                <div class="glass-panel p-6 rounded-lg mb-8">
                    <h3 class="text-xl font-bold mb-4">Current 86'd Items</h3>
                    <div id="current86Items" class="space-y-2"></div>
                </div>
                
                <!-- Staff Contacts -->
                <div class="glass-panel p-6 rounded-lg">
                    <h3 class="text-xl font-bold mb-6">Staff Contacts</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center p-4 bg-black bg-opacity-30 rounded-lg">
                            <i class="fas fa-user-tie text-3xl mb-3 text-yellow-400"></i>
                            <h4 class="font-bold text-lg">Bar Manager</h4>
                            <p class="text-lg">Jason</p>
                            <a href="tel:7176594430" class="text-green-400 hover:text-green-300 text-lg">
                                (717) 659-4430
                            </a>
                        </div>
                        
                        <div class="text-center p-4 bg-black bg-opacity-30 rounded-lg">
                            <i class="fas fa-cocktail text-3xl mb-3 text-yellow-400"></i>
                            <h4 class="font-bold text-lg">Bartender</h4>
                            <p class="text-lg">John</p>
                            <a href="tel:7178588338" class="text-green-400 hover:text-green-300 text-lg">
                                (717) 858-8338
                            </a>
                        </div>
                        
                        <div class="text-center p-4 bg-black bg-opacity-30 rounded-lg">
                            <i class="fas fa-wine-glass text-3xl mb-3 text-yellow-400"></i>
                            <h4 class="font-bold text-lg">Bartender</h4>
                            <p class="text-lg">Ivana</p>
                            <a href="tel:7174954252" class="text-green-400 hover:text-green-300 text-lg">
                                (717) 495-4252
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Tab -->
        <div id="admin-content" class="tab-content admin-bg min-h-screen p-6 hidden">
            <div class="container mx-auto max-w-2xl">
                <h2 class="text-3xl font-bold mb-8 text-center">Admin Contact</h2>
                
                <!-- Admin Contact Info -->
                <div class="glass-panel p-6 rounded-lg mb-8">
                    <div class="text-center p-6">
                        <i class="fas fa-wine-bottle text-5xl mb-4 text-yellow-400"></i>
                        <h3 class="text-2xl font-bold mb-2">Wine Steward / Maître d'hôtel</h3>
                        <p class="text-xl mb-4">Graeson</p>
                        <a href="tel:7176836763" class="text-green-400 hover:text-green-300 text-xl">
                            (717) 683-6763
                        </a>
                    </div>
                </div>
                
                <!-- OCR Upload Tool -->
                <div class="glass-panel p-6 rounded-lg mb-8">
                    <h3 class="text-xl font-bold mb-4">Fresh Features OCR Tool</h3>
                    <p class="text-gray-300 mb-4">Upload a photo of the Fresh Features paper to automatically extract information and update the dashboard.</p>
                    
                    <div class="mb-6">
                        <div class="flex items-center justify-center w-full">
                            <label for="ocrFileUpload" class="flex flex-col w-full h-32 border-2 border-gray-600 border-dashed rounded-lg cursor-pointer bg-black bg-opacity-50 hover:bg-opacity-70">
                                <div class="flex flex-col items-center justify-center pt-7">
                                    <i class="fas fa-cloud-upload-alt text-2xl text-yellow-400"></i>
                                    <p class="pt-1 text-sm tracking-wider text-gray-300">Upload image or take photo</p>
                                </div>
                                <input id="ocrFileUpload" type="file" class="hidden" accept="image/*" capture="environment" />
                            </label>
                        </div>
                    </div>
                    
                    <div id="ocrPreviewContainer" class="hidden mb-6">
                        <h4 class="font-bold mb-2">Image Preview:</h4>
                        <div class="flex justify-center">
                            <img id="ocrPreview" class="max-h-60 rounded-lg" alt="Upload preview">
                        </div>
                        <button id="processOcrButton" class="w-full btn-primary py-3 px-6 rounded-lg font-semibold mt-4">
                            <i class="fas fa-magic mr-2"></i> Process Image
                        </button>
                    </div>
                    
                    <div id="ocrResultContainer" class="hidden">
                        <h4 class="font-bold mb-2">Extracted Information:</h4>
                        <div id="ocrResult" class="bg-black bg-opacity-60 p-4 rounded-lg text-sm max-h-60 overflow-y-auto"></div>
                        <div class="flex justify-end mt-4">
                            <button id="applyOcrButton" class="btn-primary py-2 px-4 rounded-lg font-semibold">
                                <i class="fas fa-check mr-2"></i> Apply Changes
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Message Form -->
                <div class="glass-panel p-6 rounded-lg">
                    <h3 class="text-xl font-bold mb-4">Send Message to Management</h3>
                    <form id="adminMessageForm">
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Your Name</label>
                            <input type="text" id="senderName" class="w-full px-4 py-2 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Subject</label>
                            <input type="text" id="messageSubject" class="w-full px-4 py-2 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" required>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium mb-2">Message</label>
                            <textarea id="messageBody" rows="6" class="w-full px-4 py-2 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" required></textarea>
                        </div>
                        
                        <button type="submit" class="w-full btn-primary py-3 px-6 rounded-lg font-semibold">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Wine Tab -->
        <div id="wine-content" class="tab-content wine-bg min-h-screen p-6 hidden">
            <div class="container mx-auto max-w-6xl">
                <h2 class="text-3xl font-bold mb-8 text-center">Wine Collection</h2>
                
                <!-- Search and Filter -->
                <div class="glass-panel p-4 rounded-lg mb-8">
                    <div class="flex flex-wrap gap-4">
                        <input type="text" id="wineSearch" class="flex-1 px-4 py-2 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white" placeholder="Search wines...">
                        <select id="wineFilter" class="px-4 py-2 bg-black bg-opacity-50 border border-gray-600 rounded-lg focus:outline-none focus:border-green-600 text-white">
                            <option value="">All Categories</option>
                            <option value="red">Red Wines</option>
                            <option value="white">White Wines</option>
                            <option value="sparkling">Sparkling & Champagne</option>
                        </select>
                    </div>
                </div>
                
                <!-- Wine Categories -->
                <div id="wineCategories">
                    <!-- Red Wines -->
                    <div class="wine-category red-wine">
                        <h3 class="text-2xl font-bold mb-4 text-red-400">PINOT NOIR</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="wine-item">
                                <p class="font-semibold">CRISTOM, EILEEN VY.D., EOLA-AMITY HILLS</p>
                                <p class="text-sm text-gray-300">Willamette Valley, OR, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$185 <span class="text-sm">(R013)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">CRISTOM, JESSIE VYD., EOLA-AMITY HILLS</p>
                                <p class="text-sm text-gray-300">Willamette Valley, OR, 2020</p>
                                <p class="text-lg font-bold text-yellow-400">$199 <span class="text-sm">(R059)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">ENROUTE, LES PONNIERS VYD.</p>
                                <p class="text-sm text-gray-300">Russian River Valley, CA, 2020</p>
                                <p class="text-lg font-bold text-yellow-400">$105 <span class="text-sm">(R042)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">BRAVIUM</p>
                                <p class="text-sm text-gray-300">Alexander Valley, CA, 2021</p>
                                <p class="text-lg font-bold text-yellow-400">$95 <span class="text-sm">(R024)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">CLOS DE LA TECH</p>
                                <p class="text-sm text-gray-300">Santa Cruz Mountain Estates, CA, 2017</p>
                                <p class="text-lg font-bold text-yellow-400">$66 <span class="text-sm">(R042)</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wine-category red-wine">
                        <h3 class="text-2xl font-bold mb-4 text-red-400">MERLOT</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="wine-item">
                                <p class="font-semibold">RUTHERFORD FAMILY WINERY</p>
                                <p class="text-sm text-gray-300">Monterey, CA, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$90 <span class="text-sm">(R012)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">SUBSTANCE, VYD. COLLECTION</p>
                                <p class="text-sm text-gray-300">Stoneridge Vyd., WA, 2018</p>
                                <p class="text-lg font-bold text-yellow-400">$80 <span class="text-sm">(R009)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">POST & BEAM</p>
                                <p class="text-sm text-gray-300">Napa Valley, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$150 <span class="text-sm">(R021)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">RODALE, COTARELLA</p>
                                <p class="text-sm text-gray-300">Lazio, IGT, Italy, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$70 <span class="text-sm">(R005)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">CLINE FAMILY CELLARS</p>
                                <p class="text-sm text-gray-300">Seven Ranchlands, Sonoma County, CA, 2020</p>
                                <p class="text-lg font-bold text-yellow-400">$72 <span class="text-sm">(R054)</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wine-category red-wine">
                        <h3 class="text-2xl font-bold mb-4 text-red-400">CABERNET SAUVIGNON</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="wine-item">
                                <p class="font-semibold">NEYERS</p>
                                <p class="text-sm text-gray-300">Napa Valley, 2018</p>
                                <p class="text-lg font-bold text-yellow-400">$165 <span class="text-sm">(R071)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">PENFOLDS BIN 407</p>
                                <p class="text-sm text-gray-300">South Australia, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$145 <span class="text-sm">(R011)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">SHAFER CELLARS, FOUR PLACES</p>
                                <p class="text-sm text-gray-300">Red Mountain AVA, Washington, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$124 <span class="text-sm">(R017)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">CAKEBREAD CELLARS</p>
                                <p class="text-sm text-gray-300">Napa Valley, 2021</p>
                                <p class="text-lg font-bold text-yellow-400">$250 <span class="text-sm">(R070)</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- White Wines -->
                    <div class="wine-category white-wine">
                        <h3 class="text-2xl font-bold mb-4 text-yellow-400">CHARDONNAY</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="wine-item">
                                <p class="font-semibold">ALLEGRO STEEL</p>
                                <p class="text-sm text-gray-300">Brogue, PA, 2016</p>
                                <p class="text-lg font-bold text-yellow-400">$58 <span class="text-sm">(101A)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">NEYERS</p>
                                <p class="text-sm text-gray-300">Carneros District, Sonoma County, CA, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$100 <span class="text-sm">(C004)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">WORKS & DAYS</p>
                                <p class="text-sm text-gray-300">Sonoma Coast, CA, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$102 <span class="text-sm">(C009)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">CRISTOM</p>
                                <p class="text-sm text-gray-300">Eola-Amity Hills, Willamette Valley, WA, 2019</p>
                                <p class="text-lg font-bold text-yellow-400">$95 <span class="text-sm">(404A)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">CAKEBREAD CELLARS</p>
                                <p class="text-sm text-gray-300">Napa Valley, 2021</p>
                                <p class="text-lg font-bold text-yellow-400">$115 <span class="text-sm">(C015)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">RAMEY</p>
                                <p class="text-sm text-gray-300">Russian River Valley, CA, 2021</p>
                                <p class="text-lg font-bold text-yellow-400">$120 <span class="text-sm">(C016)</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sparkling & Champagne -->
                    <div class="wine-category sparkling-wine">
                        <h3 class="text-2xl font-bold mb-4 text-blue-400">CHAMPAGNE</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="wine-item">
                                <p class="font-semibold">MOET & CHANDON</p>
                                <p class="text-sm text-gray-300">Imperial, Brut, France, NV</p>
                                <p class="text-lg font-bold text-yellow-400">$110 <span class="text-sm">(501A)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">VEUVE CLICQUOT</p>
                                <p class="text-sm text-gray-300">Yellow Label, Brut, France NV</p>
                                <p class="text-lg font-bold text-yellow-400">$135 <span class="text-sm">(503A)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">PERRIER-JOUET</p>
                                <p class="text-sm text-gray-300">Grand Brut, France, NV</p>
                                <p class="text-lg font-bold text-yellow-400">$145 <span class="text-sm">(506A)</span></p>
                            </div>
                            <div class="wine-item">
                                <p class="font-semibold">NICOLAS FEUILLATTE</p>
                                <p class="text-sm text-gray-300">Brut Reserve, France, NV</p>
                                <p class="text-lg font-bold text-yellow-400">$110 <span class="text-sm">(505A)</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div id="inventory-content" class="tab-content inventory-bg min-h-screen p-6 hidden">
            <div class="container mx-auto max-w-7xl">
                <div class="flex flex-wrap justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold mb-4 md:mb-0">Inventory Management</h2>
                    <div class="flex flex-wrap gap-4">
                        <button id="voiceButton" class="btn-primary px-6 py-3 rounded-lg font-semibold flex items-center gap-2">
                            <i class="fas fa-microphone"></i>
                            Voice Update
                        </button>
                        <button id="updateInventoryBtn" class="bg-darker-green px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition">
                            <i class="fas fa-sync mr-2"></i>
                            Update Inventory
                        </button>
                    </div>
                </div>
                
                <!-- Voice Recognition Status -->
                <div id="voiceStatus" class="hidden glass-panel p-4 rounded-lg mb-6">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-microphone recording text-red-500"></i>
                        <span id="voiceText">Listening... Speak your inventory updates</span>
                    </div>
                </div>
                
                <!-- Category Filter -->
                <div class="glass-panel p-4 rounded-lg mb-6 overflow-x-auto">
                    <div class="flex gap-4 flex-nowrap min-w-max">
                        <button class="category-filter active px-4 py-2 rounded-lg bg-dark-green" data-category="all">All</button>
                        <button class="category-filter px-4 py-2 rounded-lg bg-gray-700 hover:bg-dark-green" data-category="vodka">Vodka</button>
                        <button class="category-filter px-4 py-2 rounded-lg bg-gray-700 hover:bg-dark-green" data-category="gin">Gin</button>
                        <button class="category-filter px-4 py-2 rounded-lg bg-gray-700 hover:bg-dark-green" data-category="rum">Rum</button>
                        <button class="category-filter px-4 py-2 rounded-lg bg-gray-700 hover:bg-dark-green" data-category="tequila">Tequila</button>
                        <button class="category-filter px-4 py-2 rounded-lg bg-gray-700 hover:bg-dark-green" data-category="whiskey">Whiskey</button>
                        <button class="category-filter px-4 py-2 rounded-lg bg-gray-700 hover:bg-dark-green" data-category="cordials">Cordials</button>
                    </div>
                </div>
                
                <!-- Inventory Grid -->
                <div id="inventoryGrid" class="inventory-grid">
                    <!-- Inventory items will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global app state
        const state = {
            items86: JSON.parse(localStorage.getItem('items86') || '[]'),
            inventoryData: JSON.parse(localStorage.getItem('inventoryData') || '{}'),
            ocrData: {
                redWine: null,
                whiteWine: null,
                starters: [],
                entrees: [],
                cocktail: null
            },
            recognition: null,
            isListening: false
        };
        
        // Cache DOM elements for better performance
        const elements = {};
        
        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value.toLowerCase();
            const password = document.getElementById('password').value;
            
            if (username === 'user@table1837.com' && password === 'password123') {
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                initializeApp();
            } else {
                alert('Invalid credentials. Please try again.');
            }
        });

        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                if (this.dataset.tab) {
                    showTab(this.dataset.tab);
                    
                    // Update active tab
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-content').classList.remove('hidden');
        }

        function logout() {
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // Initialize the application
        function initializeApp() {
            // Cache frequently accessed elements
            cacheElements();
            
            // Initialize all tabs
            initializeInventory();
            initializeDashboard();
            initializeStaff();
            initializeAdmin();
            initializeWine();
        }
        
        function cacheElements() {
            const ids = ['alert86List', 'current86Items', 'todaySpecial', 'inventoryGrid', 
                        'voiceStatus', 'voiceText', 'ocrPreview', 'ocrResult'];
            
            ids.forEach(id => {
                elements[id] = document.getElementById(id);
            });
        }

        // Dashboard functionality
        function initializeDashboard() {
            updateTodaySpecial();
            load86Items();
        }

        function updateTodaySpecial() {
            const today = new Date().getDay();
            const specials = {
                0: { // Sunday
                    title: "Sunday Steak Night",
                    time: "4p – 8p",
                    description: "Garden Salad • Steak Frites • Glass of House Wine",
                    price: "$40"
                },
                3: { // Wednesday
                    title: "Date Night",
                    time: "4p – 8p", 
                    description: "2-Dine for $89 • 3-Course Menu • $5 Draft Beer • $10 House Wine",
                    price: "$89"
                },
                4: { // Thursday
                    title: "1837 Bar & Burger Night",
                    time: "4p – 8p",
                    description: "$12.50 Signature Burger OR Crispy Chicken • $5 Draft Beer • $10 House Wine",
                    price: "$12.50"
                },
                5: { // Friday
                    title: "Late Night Happy Hour",
                    time: "8p – 11p",
                    description: "$5 Draft Beer • $10 House Wines • $10 House Winner Cocktails • $2 Off Curated Cocktails",
                    price: "Various"
                },
                6: { // Saturday
                    title: "Late Night Happy Hour", 
                    time: "8p – 11p",
                    description: "$5 Draft Beer • $10 House Wines • $10 House Winner Cocktails • $2 Off Curated Cocktails",
                    price: "Various"
                }
            };

            const special = specials[today];
            if (special) {
                elements.todaySpecial.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-xl font-bold">${special.title}</h4>
                        <span class="text-lg font-bold text-yellow-400">${special.price}</span>
                    </div>
                    <p class="text-sm text-gray-400 mb-2">${special.time}</p>
                    <p class="text-gray-300">${special.description}</p>
                `;
            } else {
                elements.todaySpecial.innerHTML = `
                    <p class="text-gray-300">No special offerings today. Check back tomorrow!</p>
                `;
            }
        }

        // Staff functionality
        function initializeStaff() {
            display86Items();
            
            // Event listener for adding 86'd items
            document.getElementById('item86Input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    add86Item();
                }
            });
        }

        function add86Item() {
            const input = document.getElementById('item86Input');
            const item = input.value.trim();
            
            if (item) {
                state.items86.push({
                    name: item,
                    timestamp: new Date().toLocaleString(),
                    addedBy: 'Current User'
                });
                
                localStorage.setItem('items86', JSON.stringify(state.items86));
                input.value = '';
                display86Items();
                load86Items(); // Update dashboard
            }
        }

        function remove86Item(index) {
            state.items86.splice(index, 1);
            localStorage.setItem('items86', JSON.stringify(state.items86));
            display86Items();
            load86Items(); // Update dashboard
        }

        function display86Items() {
            if (state.items86.length === 0) {
                elements.current86Items.innerHTML = '<p class="text-gray-400">No items currently 86\'d</p>';
                return;
            }
            
            elements.current86Items.innerHTML = state.items86.map((item, index) => `
                <div class="flex justify-between items-center p-3 bg-red-900 bg-opacity-30 border border-red-600 rounded-lg">
                    <div>
                        <p class="font-semibold">${item.name}</p>
                        <p class="text-sm text-gray-400">Added: ${item.timestamp}</p>
                    </div>
                    <button onclick="remove86Item(${index})" class="text-red-400 hover:text-red-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `).join('');
        }

        function load86Items() {
            if (state.items86.length === 0) {
                elements.alert86List.innerHTML = '<p class="text-gray-300">No items currently 86\'d</p>';
                return;
            }
            
            elements.alert86List.innerHTML = state.items86.map(item => `
                <div class="mb-2">
                    <span class="font-semibold text-red-300">${item.name}</span>
                    <span class="text-sm text-gray-400 ml-2">- ${item.timestamp}</span>
                </div>
            `).join('');
        }

        // Admin functionality
        function initializeAdmin() {
            // Message form
            document.getElementById('adminMessageForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('senderName').value;
                const subject = document.getElementById('messageSubject').value;
                const body = document.getElementById('messageBody').value;
                
                // Create mailto link
                const mailtoLink = `mailto:info@table1837.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(`From: ${name}\n\n${body}`)}`;
                
                // Open email client
                window.location.href = mailtoLink;
                
                // Reset form
                this.reset();
                
                alert('Email client opened. Please send the message from your email application.');
            });
            
            // OCR functionality
            const fileUpload = document.getElementById('ocrFileUpload');
            const previewContainer = document.getElementById('ocrPreviewContainer');
            const resultContainer = document.getElementById('ocrResultContainer');
            const preview = document.getElementById('ocrPreview');
            const processBtn = document.getElementById('processOcrButton');
            const applyBtn = document.getElementById('applyOcrButton');
            
            fileUpload.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        previewContainer.classList.remove('hidden');
                        resultContainer.classList.add('hidden');
                    }
                    
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            processBtn.addEventListener('click', function() {
                // Simulate OCR processing
                simulateOCR(preview.src);
            });
            
            applyBtn.addEventListener('click', function() {
                // Apply OCR results to dashboard
                applyOCRResults();
                alert('Dashboard updated successfully with OCR data!');
                
                // Reset OCR interface
                fileUpload.value = '';
                previewContainer.classList.add('hidden');
                resultContainer.classList.add('hidden');
                
                // Switch to dashboard tab to show updates
                document.querySelector('[data-tab="dashboard"]').click();
            });
        }
        
        function simulateOCR(imageSource) {
            // In a real system, this would send the image to an OCR service
            // For demo purposes, we'll simulate extracting text with a timeout
            
            document.getElementById('ocrResult').innerHTML = '<p class="text-center"><i class="fas fa-spinner fa-spin mr-2"></i> Processing image...</p>';
            document.getElementById('ocrResultContainer').classList.remove('hidden');
            
            setTimeout(() => {
                // Simulate detected wine information
                state.ocrData = {
                    redWine: {
                        name: "INSIGNIA, JOSEPH PHELPS ESTATE",
                        region: "Napa Valley, CA, 2014",
                        price: "$305",
                        code: "R051"
                    },
                    whiteWine: {
                        name: "RAMEY, RUSSIAN RIVER VALLEY",
                        region: "California, 2021",
                        price: "$120",
                        code: "C016"
                    },
                    starters: [
                        "House-Made Charcuterie Board with Artisanal Cheeses",
                        "Seared Sea Scallops with Citrus Beurre Blanc"
                    ],
                    entrees: [
                        "Pan-Seared Duck Breast with Cherry Reduction",
                        "Wild Mushroom Risotto with Black Truffle"
                    ],
                    cocktail: {
                        name: "Barrel-Aged Manhattan",
                        description: "Aged bourbon, sweet vermouth, bitters",
                        price: "$14"
                    }
                };
                
                // Display the results
                displayOCRResults();
            }, 1500);
        }
        
        function displayOCRResults() {
            const resultHtml = `
                <h4 class="font-bold text-yellow-400 mb-2">Featured Wines:</h4>
                <p><span class="font-semibold">Red:</span> ${state.ocrData.redWine.name} - ${state.ocrData.redWine.price} (${state.ocrData.redWine.code})</p>
                <p><span class="font-semibold">White:</span> ${state.ocrData.whiteWine.name} - ${state.ocrData.whiteWine.price} (${state.ocrData.whiteWine.code})</p>
                
                <h4 class="font-bold text-yellow-400 mt-4 mb-2">Starters:</h4>
                <ul class="list-disc pl-4 mb-2">
                    ${state.ocrData.starters.map(item => `<li>${item}</li>`).join('')}
                </ul>
                
                <h4 class="font-bold text-yellow-400 mt-4 mb-2">Entrees:</h4>
                <ul class="list-disc pl-4 mb-2">
                    ${state.ocrData.entrees.map(item => `<li>${item}</li>`).join('')}
                </ul>
                
                <h4 class="font-bold text-yellow-400 mt-4 mb-2">Featured Cocktail:</h4>
                <p>${state.ocrData.cocktail.name} - ${state.ocrData.cocktail.price}</p>
                <p class="text-sm text-gray-400">${state.ocrData.cocktail.description}</p>
            `;
            
            document.getElementById('ocrResult').innerHTML = resultHtml;
        }
        
        function applyOCRResults() {
            // Update featured wines on dashboard
            const featuredWines = document.querySelectorAll('.featured-wine');
            
            // Red wine
            if (state.ocrData.redWine && featuredWines[0]) {
                const redWineElement = featuredWines[0];
                redWineElement.querySelector('p:nth-child(2)').textContent = state.ocrData.redWine.name;
                redWineElement.querySelector('p:nth-child(3)').textContent = state.ocrData.redWine.region;
                redWineElement.querySelector('p:nth-child(4)').textContent = state.ocrData.redWine.price;
                redWineElement.querySelector('p:nth-child(5)').textContent = `(${state.ocrData.redWine.code})`;
            }
            
            // White wine
            if (state.ocrData.whiteWine && featuredWines[1]) {
                const whiteWineElement = featuredWines[1];
                whiteWineElement.querySelector('p:nth-child(2)').textContent = state.ocrData.whiteWine.name;
                whiteWineElement.querySelector('p:nth-child(3)').textContent = state.ocrData.whiteWine.region;
                whiteWineElement.querySelector('p:nth-child(4)').textContent = state.ocrData.whiteWine.price;
                whiteWineElement.querySelector('p:nth-child(5)').textContent = `(${state.ocrData.whiteWine.code})`;
            }
            
            // Update food specials
            if (state.ocrData.starters && state.ocrData.starters.length >= 2) {
                document.querySelector('.food-special-card .grid div:nth-child(1) p').textContent = state.ocrData.starters[0];
                document.querySelector('.food-special-card .grid div:nth-child(2) p').textContent = state.ocrData.starters[1] || '';
            }
            
            // Update entree as soup of the day
            if (state.ocrData.entrees && state.ocrData.entrees.length > 0) {
                document.querySelector('.food-special-card .grid div:nth-child(3) p').textContent = state.ocrData.entrees[0];
            }
            
            // Update cocktail special if today doesn't have a special
            if (state.ocrData.cocktail && elements.todaySpecial.textContent.includes('No special offerings today')) {
                elements.todaySpecial.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-xl font-bold">${state.ocrData.cocktail.name}</h4>
                        <span class="text-lg font-bold text-yellow-400">${state.ocrData.cocktail.price}</span>
                    </div>
                    <p class="text-gray-300">${state.ocrData.cocktail.description}</p>
                `;
            }
        }

        // Wine functionality
        function initializeWine() {
            const searchInput = document.getElementById('wineSearch');
            const filterSelect = document.getElementById('wineFilter');
            
            searchInput.addEventListener('input', filterWines);
            filterSelect.addEventListener('change', filterWines);
        }

        function filterWines() {
            const searchTerm = document.getElementById('wineSearch').value.toLowerCase();
            const filterCategory = document.getElementById('wineFilter').value;
            
            const categories = document.querySelectorAll('.wine-category');
            
            categories.forEach(category => {
                const categoryType = category.classList.contains('red-wine') ? 'red' : 
                                  category.classList.contains('white-wine') ? 'white' : 
                                  category.classList.contains('sparkling-wine') ? 'sparkling' : '';
                
                let shouldShow = true;
                
                // Filter by category
                if (filterCategory && filterCategory !== categoryType) {
                    shouldShow = false;
                }
                
                // Filter by search term
                if (searchTerm && shouldShow) {
                    const categoryText = category.textContent.toLowerCase();
                    shouldShow = categoryText.includes(searchTerm);
                }
                
                category.style.display = shouldShow ? 'block' : 'none';
            });
        }

        // Inventory functionality
        const inventory = {
            vodka: [
                'Zyr Vodka', '360 Double Chocolate Vodka', 'Western Sun Blueberry Vodka',
                'Absolut', 'Smirnoff Vanilla', 'Smirnoff Citrus', 'Smirnoff Vodka (Regular)',
                'Holla Vodka', 'Tito\'s', 'Gray Goose', 'Double Cross Vodka',
                'Kettle One', 'Kettle One Cucumber and Mint'
            ],
            gin: [
                'Hendrick\'s Gin', 'Bar Hill Gin', 'Whitley Neill Rhubarb and Ginger Gin',
                'Bombay Sapphire Dry Gin', 'Nolet\'s Dry Gin', 'Blue Coat Dry Gin',
                'Tanqueray Dry Gin', 'Beef Eater Dry Gin', 'Aviation American Gin'
            ],
            rum: [
                'Cruzan Blueberry Lemonade Rum', 'Gosling\'s Black Rum', 'Malibu Coconut Rum',
                'Captain Morgan Spiced Rum', 'Bacardi'
            ],
            tequila: [
                '21 Seed Cucumber Jalapeno Tequila', 'Jose Cuervo Silver', 'Jose Cuervo Gold',
                'Casamigos Mezcal', 'Casamigos Blanco', 'Coramino Reposado',
                'Agavales Blood Orange Blanco Tequila'
            ],
            whiskey: [
                'Knob Creek', 'Elijah Craig', 'Angels Envy', 'Dublin', 'Sycamore Rye',
                'Maker\'s Mark', 'Bullet Rye', 'Bullet Bourbon', 'Basil Hayden\'s Malted Rye',
                'Basil Hayden\'s Bourbon', 'Jack Daniels', 'Jim Bean', 'Woodford Reserve',
                'Watershed Distillery Straight Bourbon 4-Year', 'Dubliner', 'Canadian Club',
                'Seagrams Seven', 'Seagram\'s VO', 'Southern Comfort', 'Crown Royal Apple',
                'Crown Royal', 'Jameson', 'Red Breast Single Pot Still Irish Whiskey 12-Year',
                'Chivas', 'Highland Park 12-Year', 'Glenliet 12-Year', 'Glenfiddich 12-Year',
                'Balvini Doublewood 12-Year', 'Glenmorangie 12-Year', 'Macallen 12 Double Cask',
                'Dewars Scotch Whiskey White Label', 'Johnnie Walker Red', 'Johnnie Walker Black'
            ],
            cordials: [
                'Monin Blackberry', 'Monin Lavender', 'Monin Caramel', 'DeKuyper Sour Apple',
                'Peychaud\'s Bitters', 'Aromatic Bitters', 'Angostura Bitters', 'Dry Vermouth',
                'Sweet Vermouth', 'Saint Germain', 'Drambuie', 'Blue Curacao',
                'DeKuyper Butterscotch', 'DeKuyper Melon', 'DeKuyper Razmataz',
                'DeKuyper Watermelon Pucker', 'Jaquin\'s Creme de Cacao', 'Triple Sec',
                'Middle West Spirits Bourbon Cream', 'Disaronno Amaretto', 'Screwball',
                'Kahlua', 'Bailey\'s', 'RumChata', 'Frangelico', 'Sambuca', 'Luxardo',
                'Campari', 'Aperol', 'Cream to Violet', 'Contreau', 'Pama Pomegranate Liqueur'
            ]
        };

        function initializeInventory() {
            // Initialize inventory data if empty
            Object.keys(inventory).forEach(category => {
                inventory[category].forEach(item => {
                    if (!state.inventoryData[item]) {
                        state.inventoryData[item] = {
                            bottles: 0,
                            ounces: 0,
                            category: category
                        };
                    }
                });
            });
            
            displayInventory();
            initializeVoiceRecognition();
            
            // Category filter functionality
            document.querySelectorAll('.category-filter').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-filter').forEach(b => {
                        b.classList.remove('active', 'bg-dark-green');
                        b.classList.add('bg-gray-700');
                    });
                    this.classList.add('active', 'bg-dark-green');
                    this.classList.remove('bg-gray-700');
                    
                    filterInventory(this.dataset.category);
                });
            });
            
            // Update inventory button
            document.getElementById('updateInventoryBtn').addEventListener('click', function() {
                saveInventory();
                alert('Inventory updated successfully!');
            });
        }

        function displayInventory(filter = 'all') {
            const grid = document.getElementById('inventoryGrid');
            const fragment = document.createDocumentFragment();
            
            Object.keys(inventory).forEach(category => {
                if (filter !== 'all' && filter !== category) return;
                
                const categoryHeader = document.createElement('div');
                categoryHeader.className = 'col-span-full';
                categoryHeader.innerHTML = `<h3 class="text-2xl font-bold mb-4 text-center capitalize text-yellow-400">${category}</h3>`;
                fragment.appendChild(categoryHeader);
                
                inventory[category].forEach(item => {
                    const data = state.inventoryData[item] || { bottles: 0, ounces: 0, category: category };
                    const itemElement = document.createElement('div');
                    itemElement.className = 'inventory-item';
                    itemElement.innerHTML = `
                        <h4 class="font-semibold mb-3">${item}</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm text-gray-300 mb-1">Bottles</label>
                                <input type="number" 
                                       class="w-full px-3 py-2 bg-black bg-opacity-50 border border-gray-600 rounded focus:outline-none focus:border-green-600 text-white" 
                                       value="${data.bottles}" 
                                       data-item="${item}" 
                                       data-type="bottles"
                                       min="0">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-300 mb-1">Ounces</label>
                                <input type="number" 
                                       class="w-full px-3 py-2 bg-black bg-opacity-50 border border-gray-600 rounded focus:outline-none focus:border-green-600 text-white" 
                                       value="${data.ounces}" 
                                       data-item="${item}" 
                                       data-type="ounces"
                                       min="0"
                                       step="0.1">
                            </div>
                        </div>
                    `;
                    
                    // Add event listeners to inputs
                    const inputs = itemElement.querySelectorAll('input');
                    inputs.forEach(input => {
                        input.addEventListener('change', function() {
                            const item = this.dataset.item;
                            const type = this.dataset.type;
                            const value = parseFloat(this.value) || 0;
                            
                            if (!state.inventoryData[item]) {
                                state.inventoryData[item] = { bottles: 0, ounces: 0, category: category };
                            }
                            
                            state.inventoryData[item][type] = value;
                        });
                    });
                    
                    fragment.appendChild(itemElement);
                });
            });
            
            // Clear grid and append all elements at once
            grid.innerHTML = '';
            grid.appendChild(fragment);
        }

        function filterInventory(category) {
            displayInventory(category);
        }

        function saveInventory() {
            localStorage.setItem('inventoryData', JSON.stringify(state.inventoryData));
        }

        // Voice Recognition
        function initializeVoiceRecognition() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                document.getElementById('voiceButton').disabled = true;
                document.getElementById('voiceButton').innerHTML = '<i class="fas fa-microphone-slash"></i> Voice Not Supported';
                return;
            }
            
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            state.recognition = new SpeechRecognition();
            
            state.recognition.continuous = true;
            state.recognition.interimResults = true;
            state.recognition.lang = 'en-US';
            
            document.getElementById('voiceButton').addEventListener('click', toggleVoiceRecognition);
            
            state.recognition.onresult = handleVoiceResult;
            state.recognition.onerror = handleVoiceError;
            state.recognition.onend = handleVoiceEnd;
        }
        
        function toggleVoiceRecognition() {
            const voiceButton = document.getElementById('voiceButton');
            
            if (!state.isListening) {
                state.recognition.start();
                state.isListening = true;
                elements.voiceStatus.classList.remove('hidden');
                voiceButton.innerHTML = '<i class="fas fa-stop"></i> Stop Listening';
                voiceButton.classList.add('bg-red-600');
            } else {
                state.recognition.stop();
                state.isListening = false;
                elements.voiceStatus.classList.add('hidden');
                voiceButton.innerHTML = '<i class="fas fa-microphone"></i> Voice Update';
                voiceButton.classList.remove('bg-red-600');
            }
        }
        
        function handleVoiceResult(event) {
            const result = event.results[event.results.length - 1];
            const transcript = result[0].transcript.trim();
            
            // Show real-time transcription
            elements.voiceText.textContent = transcript;
            
            if (result.isFinal) {
                processVoiceInput(transcript);
            }
        }
        
        function handleVoiceError(event) {
            console.error('Speech recognition error:', event.error);
            state.isListening = false;
            elements.voiceStatus.classList.add('hidden');
            document.getElementById('voiceButton').innerHTML = '<i class="fas fa-microphone"></i> Voice Update';
            document.getElementById('voiceButton').classList.remove('bg-red-600');
            
            // Show error message
            alert(`Voice recognition error: ${event.error}. Please try again.`);
        }
        
        function handleVoiceEnd() {
            if (state.isListening) {
                // If recognition ended but we still want to be listening, restart it
                state.recognition.start();
            }
        }
        
        function processVoiceInput(transcript) {
            console.log('Processing voice input:', transcript);
            
            // Enhanced parsing logic with error handling
            try {
                const words = transcript.toLowerCase().split(' ');
                let currentItem = '';
                let bottles = 0;
                let ounces = 0;
                
                // Improved number extraction logic
                for (let i = 0; i < words.length; i++) {
                    const word = words[i];
                    const number = parseFloat(word);
                    
                    if (!isNaN(number)) {
                        const nextWord = words[i + 1] || '';
                        if (nextWord.includes('bottle') || nextWord === 'bottles' || nextWord === 'bottle') {
                            bottles = number;
                        } else if (nextWord.includes('ounce') || nextWord.includes('oz') || nextWord === 'ounces') {
                            ounces = number;
                        }
                    }
                }
                
                // Improved item name matching
                let bestMatchScore = 0;
                let bestMatchItem = null;
                
                Object.keys(state.inventoryData).forEach(item => {
                    const itemWords = item.toLowerCase().split(' ');
                    let matches = 0;
                    let totalWords = 0;
                    
                    // Count how many words from the item name appear in the transcript
                    itemWords.forEach(itemWord => {
                        if (itemWord.length > 2) { // Skip very short words
                            totalWords++;
                            if (transcript.toLowerCase().includes(itemWord)) {
                                matches++;
                            }
                        }
                    });
                    
                    const score = totalWords > 0 ? matches / totalWords : 0;
                    if (score > bestMatchScore && score > 0.4) { // Threshold to avoid false matches
                        bestMatchScore = score;
                        bestMatchItem = item;
                    }
                });
                
                if (bestMatchItem && (bottles > 0 || ounces > 0)) {
                    if (bottles > 0) {
                        state.inventoryData[bestMatchItem].bottles = bottles;
                    }
                    if (ounces > 0) {
                        state.inventoryData[bestMatchItem].ounces = ounces;
                    }
                    
                    // Update the display
                    updateInventoryDisplay(bestMatchItem, bottles, ounces);
                    
                    // Visual feedback
                    showToast(`Updated ${bestMatchItem}: ${bottles > 0 ? `${bottles} bottles` : ''} ${ounces > 0 ? `${ounces} ounces` : ''}`);
                } else if (bestMatchItem) {
                    // Found item but no quantity
                    showToast(`Recognized ${bestMatchItem}, but no quantity detected. Please specify bottles or ounces.`);
                } else if (bottles > 0 || ounces > 0) {
                    // Found quantity but no item
                    showToast(`Quantity detected (${bottles > 0 ? `${bottles} bottles` : ''} ${ounces > 0 ? `${ounces} ounces` : ''}), but could not match a specific item. Please try again.`);
                } else {
                    // Nothing matched
                    showToast("Could not recognize inventory update. Please try again with item name and quantity.");
                }
            } catch (error) {
                console.error('Error processing voice input:', error);
                showToast('Error processing voice input. Please try again.');
            }
        }
        
        function updateInventoryDisplay(item, bottles, ounces) {
            const inputs = document.querySelectorAll(`input[data-item="${item}"]`);
            inputs.forEach(input => {
                if (input.dataset.type === 'bottles' && bottles > 0) {
                    input.value = bottles;
                } else if (input.dataset.type === 'ounces' && ounces > 0) {
                    input.value = ounces;
                }
            });
        }
        
        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 right-4 bg-dark-green text-white py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-up';
            toast.textContent = message;
            
            // Append to body
            document.body.appendChild(toast);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.add('animate-fade-out');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 500);
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Add animation styles
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes fade-out {
                    from { opacity: 1; }
                    to { opacity: 0; }
                }
                
                .animate-fade-in-up {
                    animation: fade-in-up 0.3s ease-out forwards;
                }
                
                .animate-fade-out {
                    animation: fade-out 0.5s ease-out forwards;
                }
            `;
            document.head.appendChild(style);
            
            // Auto-focus username field
            document.getElementById('username').focus();
        });
    </script>
</body>
</html>
